[2025-09-19 17:04:56] [INFO] Sales page accessed by user ID: 1, Company ID: 1
[2025-09-19 17:04:56] [INFO] Session data:
Array
(
    [user_id] => 1
    [username] => admin
    [CompID] => 1
    [FIN_YEAR_ID] => 1
    [FIN_YEAR_START] => 2025-04-01 12:24:30
    [FIN_YEAR_END] => 2026-03-31 12:24:30
    [FIN_YEAR_DISPLAY] => 2025-2026
    [COMP_NAME] => Diamond Wine Shop
    [sale_items] => Array
        (
        )

    [sale_count] => 0
    [current_focus_index] => -1
    [selected_customer] => 162
)

[2025-09-19 17:04:56] [INFO] Database connection established
[2025-09-19 17:04:56] [INFO] Mode selected: F
[2025-09-19 17:04:56] [INFO] Sequence type selected: user_defined
[2025-09-19 17:04:56] [INFO] Search keyword: ''
[2025-09-19 17:04:56] [INFO] Date range: 2025-09-19 to 2025-09-19
[2025-09-19 17:04:56] [INFO] Company ID: 1, Stock table: tbldailystock_1
[2025-09-19 17:04:56] [INFO] Stock columns already exist
[2025-09-19 17:04:56] [INFO] Order clause: ORDER BY im.DETAILS ASC
[2025-09-19 17:04:56] [INFO] Executing query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, 
                 COALESCE(st.Current_Stock1, 0) as CURRENT_STOCK
          FROM tblitemmaster im
          LEFT JOIN tblitem_stock st ON im.CODE = st.ITEM_CODE 
          WHERE im.LIQ_FLAG = ? ORDER BY im.DETAILS ASC
[2025-09-19 17:04:56] [INFO] Query parameters:
Array
(
    [0] => F
)

[2025-09-19 17:05:00] [INFO] Fetched 3592 items
[2025-09-19 17:05:00] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:05:00] [INFO] Fetched 60 subclasses
[2025-09-19 17:05:00] [INFO] Fetched 9 classes
[2025-09-19 17:05:00] [INFO] Sale module view initialized with 22 sizes
[2025-09-19 17:05:00] [INFO] Page rendering completed
[2025-09-19 17:05:00] [INFO] Getting category limits for company 1
[2025-09-19 17:05:00] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:05:00] [INFO] Getting category limits for company 1
[2025-09-19 17:05:00] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:05:00] [INFO] Getting category limits for company 1
[2025-09-19 17:05:00] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:15:39] [INFO] Sales page accessed by user ID: 1, Company ID: 1
[2025-09-19 17:15:39] [INFO] Session data:
Array
(
    [user_id] => 1
    [username] => admin
    [CompID] => 1
    [FIN_YEAR_ID] => 1
    [FIN_YEAR_START] => 2025-04-01 12:24:30
    [FIN_YEAR_END] => 2026-03-31 12:24:30
    [FIN_YEAR_DISPLAY] => 2025-2026
    [COMP_NAME] => Diamond Wine Shop
    [sale_items] => Array
        (
        )

    [sale_count] => 0
    [current_focus_index] => -1
    [selected_customer] => 162
)

[2025-09-19 17:15:39] [INFO] Database connection established
[2025-09-19 17:15:39] [INFO] Mode selected: F
[2025-09-19 17:15:39] [INFO] Sequence type selected: user_defined
[2025-09-19 17:15:39] [INFO] Search keyword: ''
[2025-09-19 17:15:39] [INFO] Date range: 2025-09-19 to 2025-09-19
[2025-09-19 17:15:39] [INFO] Company ID: 1, Stock table: tbldailystock_1
[2025-09-19 17:15:39] [INFO] Stock columns already exist
[2025-09-19 17:15:39] [INFO] Order clause: ORDER BY im.DETAILS ASC
[2025-09-19 17:15:39] [INFO] Executing query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, 
                 COALESCE(st.Current_Stock1, 0) as CURRENT_STOCK
          FROM tblitemmaster im
          LEFT JOIN tblitem_stock st ON im.CODE = st.ITEM_CODE 
          WHERE im.LIQ_FLAG = ? ORDER BY im.DETAILS ASC
[2025-09-19 17:15:39] [INFO] Query parameters:
Array
(
    [0] => F
)

[2025-09-19 17:15:41] [INFO] Fetched 3592 items
[2025-09-19 17:15:41] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:15:41] [INFO] Fetched 60 subclasses
[2025-09-19 17:15:41] [INFO] Fetched 9 classes
[2025-09-19 17:15:41] [INFO] Sale module view initialized with 22 sizes
[2025-09-19 17:15:41] [INFO] Page rendering completed
[2025-09-19 17:15:41] [INFO] Getting category limits for company 1
[2025-09-19 17:15:41] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:15:41] [INFO] Getting category limits for company 1
[2025-09-19 17:15:41] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:15:41] [INFO] Getting category limits for company 1
[2025-09-19 17:15:41] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:33:13] [INFO] Sales page accessed by user ID: 1, Company ID: 1
[2025-09-19 17:33:13] [INFO] Session data:
Array
(
    [user_id] => 1
    [username] => admin
    [CompID] => 1
    [FIN_YEAR_ID] => 1
    [FIN_YEAR_START] => 2025-04-01 12:24:30
    [FIN_YEAR_END] => 2026-03-31 12:24:30
    [FIN_YEAR_DISPLAY] => 2025-2026
    [COMP_NAME] => Diamond Wine Shop
    [sale_items] => Array
        (
            [0] => Array
                (
                    [code] => SCMBR0018182
                    [name] => Haywards 2000 Premium Strong B
                    [size] => 500 ML (CAN)
                    [price] => 110
                    [quantity] => 1
                    [current_stock] => 0
                )

        )

    [sale_count] => 1
    [current_focus_index] => -1
    [selected_customer] => 164
)

[2025-09-19 17:33:13] [INFO] Database connection established
[2025-09-19 17:33:13] [INFO] Mode selected: F
[2025-09-19 17:33:13] [INFO] Sequence type selected: user_defined
[2025-09-19 17:33:13] [INFO] Search keyword: ''
[2025-09-19 17:33:13] [INFO] Date range: 2025-09-19 to 2025-09-19
[2025-09-19 17:33:13] [INFO] Company ID: 1, Stock table: tbldailystock_1
[2025-09-19 17:33:13] [INFO] Stock columns already exist
[2025-09-19 17:33:13] [INFO] Order clause: ORDER BY im.DETAILS ASC
[2025-09-19 17:33:13] [INFO] Executing query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, 
                 COALESCE(st.Current_Stock1, 0) as CURRENT_STOCK
          FROM tblitemmaster im
          LEFT JOIN tblitem_stock st ON im.CODE = st.ITEM_CODE 
          WHERE im.LIQ_FLAG = ? ORDER BY im.DETAILS ASC
[2025-09-19 17:33:13] [INFO] Query parameters:
Array
(
    [0] => F
)

[2025-09-19 17:33:14] [INFO] Fetched 3592 items
[2025-09-19 17:33:14] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:33:14] [INFO] Fetched 60 subclasses
[2025-09-19 17:33:14] [INFO] Fetched 9 classes
[2025-09-19 17:33:14] [INFO] Sale module view initialized with 22 sizes
[2025-09-19 17:33:14] [INFO] Page rendering completed
[2025-09-19 17:44:31] [INFO] Sales page accessed by user ID: 1, Company ID: 1
[2025-09-19 17:44:31] [INFO] Session data:
Array
(
    [user_id] => 1
    [username] => admin
    [CompID] => 1
    [FIN_YEAR_ID] => 1
    [FIN_YEAR_START] => 2025-04-01 12:24:30
    [FIN_YEAR_END] => 2026-03-31 12:24:30
    [FIN_YEAR_DISPLAY] => 2025-2026
    [COMP_NAME] => Diamond Wine Shop
    [sale_items] => Array
        (
            [0] => Array
                (
                    [code] => SCMBR0018182
                    [name] => Haywards 2000 Premium Strong B
                    [size] => 500 ML (CAN)
                    [price] => 110
                    [quantity] => 1
                    [current_stock] => 0
                )

        )

    [sale_count] => 1
    [current_focus_index] => -1
    [selected_customer] => 164
)

[2025-09-19 17:44:31] [INFO] Database connection established
[2025-09-19 17:44:31] [INFO] Mode selected: F
[2025-09-19 17:44:31] [INFO] Sequence type selected: user_defined
[2025-09-19 17:44:31] [INFO] Search keyword: ''
[2025-09-19 17:44:31] [INFO] Date range: 2025-09-19 to 2025-09-19
[2025-09-19 17:44:31] [INFO] Company ID: 1, Stock table: tbldailystock_1
[2025-09-19 17:44:31] [INFO] Stock columns already exist
[2025-09-19 17:44:31] [INFO] Order clause: ORDER BY im.DETAILS ASC
[2025-09-19 17:44:31] [INFO] Executing query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, 
                 COALESCE(st.Current_Stock1, 0) as CURRENT_STOCK
          FROM tblitemmaster im
          LEFT JOIN tblitem_stock st ON im.CODE = st.ITEM_CODE 
          WHERE im.LIQ_FLAG = ? ORDER BY im.DETAILS ASC
[2025-09-19 17:44:31] [INFO] Query parameters:
Array
(
    [0] => F
)

[2025-09-19 17:44:33] [INFO] Fetched 3592 items
[2025-09-19 17:44:33] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:44:33] [INFO] Fetched 60 subclasses
[2025-09-19 17:44:33] [INFO] Fetched 9 classes
[2025-09-19 17:44:33] [INFO] Sale module view initialized with 22 sizes
[2025-09-19 17:44:33] [INFO] Page rendering completed
[2025-09-19 17:44:58] [INFO] Sales page accessed by user ID: 1, Company ID: 1
[2025-09-19 17:44:58] [INFO] Session data:
Array
(
    [user_id] => 1
    [username] => admin
    [CompID] => 1
    [FIN_YEAR_ID] => 1
    [FIN_YEAR_START] => 2025-04-01 12:24:30
    [FIN_YEAR_END] => 2026-03-31 12:24:30
    [FIN_YEAR_DISPLAY] => 2025-2026
    [COMP_NAME] => Diamond Wine Shop
    [sale_items] => Array
        (
            [0] => Array
                (
                    [code] => SCMBR0018182
                    [name] => Haywards 2000 Premium Strong B
                    [size] => 500 ML (CAN)
                    [price] => 110
                    [quantity] => 1
                    [current_stock] => 0
                )

        )

    [sale_count] => 1
    [current_focus_index] => -1
    [selected_customer] => 164
)

[2025-09-19 17:44:58] [INFO] Database connection established
[2025-09-19 17:44:58] [INFO] Mode selected: F
[2025-09-19 17:44:58] [INFO] Sequence type selected: user_defined
[2025-09-19 17:44:58] [INFO] Search keyword: ''
[2025-09-19 17:44:58] [INFO] Date range: 2025-09-19 to 2025-09-19
[2025-09-19 17:44:58] [INFO] Company ID: 1, Stock table: tbldailystock_1
[2025-09-19 17:44:58] [INFO] Stock columns already exist
[2025-09-19 17:44:58] [INFO] Order clause: ORDER BY im.DETAILS ASC
[2025-09-19 17:44:58] [INFO] Executing query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, 
                 COALESCE(st.Current_Stock1, 0) as CURRENT_STOCK
          FROM tblitemmaster im
          LEFT JOIN tblitem_stock st ON im.CODE = st.ITEM_CODE 
          WHERE im.LIQ_FLAG = ? ORDER BY im.DETAILS ASC
[2025-09-19 17:44:58] [INFO] Query parameters:
Array
(
    [0] => F
)

[2025-09-19 17:45:02] [INFO] Fetched 3592 items
[2025-09-19 17:45:02] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:45:02] [INFO] Fetched 60 subclasses
[2025-09-19 17:45:02] [INFO] Fetched 9 classes
[2025-09-19 17:45:02] [INFO] Sale module view initialized with 22 sizes
[2025-09-19 17:45:02] [INFO] Page rendering completed
[2025-09-19 17:45:18] [INFO] Saving pending sales for user 1, company 1
[2025-09-19 17:45:18] [INFO] Items to save:
Array
(
    [SCMPL0019028] => 1
    [SCMPL0019031] => 1
    [SCMPL0019029] => 01
    [SCMPL0019030] => 1
)

[2025-09-19 17:45:18] [INFO] Date range spans 1 days: 2025-09-19
[2025-09-19 17:45:18] [INFO] Distributing 1 units across 1 days
[2025-09-19 17:45:18] [INFO] Distribution for 1 units: 1
[2025-09-19 17:45:18] [INFO] Item SCMPL0019028 distribution: 1
[2025-09-19 17:45:18] [INFO] Distributing 1 units across 1 days
[2025-09-19 17:45:18] [INFO] Distribution for 1 units: 1
[2025-09-19 17:45:18] [INFO] Item SCMPL0019031 distribution: 1
[2025-09-19 17:45:18] [INFO] Distributing 01 units across 1 days
[2025-09-19 17:45:18] [INFO] Distribution for 01 units: 1
[2025-09-19 17:45:18] [INFO] Item SCMPL0019029 distribution: 1
[2025-09-19 17:45:18] [INFO] Distributing 1 units across 1 days
[2025-09-19 17:45:18] [INFO] Distribution for 1 units: 1
[2025-09-19 17:45:18] [INFO] Item SCMPL0019030 distribution: 1
[2025-09-19 17:45:18] [INFO] Starting bill generation with volume limits
[2025-09-19 17:45:18] [INFO] Getting category limits for company 1
[2025-09-19 17:45:18] [INFO] Category limits: {"IMFL":"1000.00","BEER":"4000.00","CL":"0.00"}
[2025-09-19 17:45:18] [INFO] Category Limits - IMFL: 1000.00, BEER: 4000.00, CL: 0.00
[2025-09-19 17:45:18] [INFO] Getting next bill number
[2025-09-19 17:45:18] [INFO] Next bill number: 8
[2025-09-19 17:45:18] [INFO] Processing date: 2025-09-19 (index: 0)
[2025-09-19 17:45:18] [INFO] Determining category for item SCMPL0019028, mode: F
[2025-09-19 17:45:18] [INFO] Item SCMPL0019028 - DETAILS2: 90 ML-(96)
[2025-09-19 17:45:18] [INFO] Item SCMPL0019028 categorized as IMFL (Foreign Liquor with ML size)
[2025-09-19 17:45:18] [INFO] Getting size for item SCMPL0019028, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019028 - Size from DETAILS2: 90ml
[2025-09-19 17:45:19] [INFO] Date 2025-09-19 - Item SCMPL0019028: Qty=1, Size=90ml, Volume=90ml, Category=IMFL
[2025-09-19 17:45:19] [INFO] Determining category for item SCMPL0019031, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019031 - DETAILS2: 1000 ML
[2025-09-19 17:45:19] [INFO] Item SCMPL0019031 categorized as IMFL (Foreign Liquor with ML size)
[2025-09-19 17:45:19] [INFO] Getting size for item SCMPL0019031, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019031 - Size from DETAILS2: 1000ml
[2025-09-19 17:45:19] [INFO] Date 2025-09-19 - Item SCMPL0019031: Qty=1, Size=1000ml, Volume=1000ml, Category=IMFL
[2025-09-19 17:45:19] [INFO] Determining category for item SCMPL0019029, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019029 - DETAILS2: 180 ML
[2025-09-19 17:45:19] [INFO] Item SCMPL0019029 categorized as IMFL (Foreign Liquor with ML size)
[2025-09-19 17:45:19] [INFO] Getting size for item SCMPL0019029, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019029 - Size from DETAILS2: 180ml
[2025-09-19 17:45:19] [INFO] Date 2025-09-19 - Item SCMPL0019029: Qty=1, Size=180ml, Volume=180ml, Category=IMFL
[2025-09-19 17:45:19] [INFO] Determining category for item SCMPL0019030, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019030 - DETAILS2: 750 ML
[2025-09-19 17:45:19] [INFO] Item SCMPL0019030 categorized as IMFL (Foreign Liquor with ML size)
[2025-09-19 17:45:19] [INFO] Getting size for item SCMPL0019030, mode: F
[2025-09-19 17:45:19] [INFO] Item SCMPL0019030 - Size from DETAILS2: 750ml
[2025-09-19 17:45:19] [INFO] Date 2025-09-19 - Item SCMPL0019030: Qty=1, Size=750ml, Volume=750ml, Category=IMFL
[2025-09-19 17:45:19] [INFO] Date 2025-09-19 - Categories with items: IMFL
[2025-09-19 17:45:19] [INFO] Processing category: IMFL with limit: 1000.00ml
[2025-09-19 17:45:19] [INFO] Items in category: 4
[2025-09-19 17:45:19] [INFO] Sorted items by volume (descending) for category IMFL:
[2025-09-19 17:45:19] [INFO]   - SCMPL0019031: 1000ml
[2025-09-19 17:45:19] [INFO]   - SCMPL0019030: 750ml
[2025-09-19 17:45:19] [INFO]   - SCMPL0019029: 180ml
[2025-09-19 17:45:19] [INFO]   - SCMPL0019028: 90ml
[2025-09-19 17:45:19] [INFO] Added SCMPL0019031 (1000ml) to bill. Current volume: 1000ml
[2025-09-19 17:45:19] [INFO] Category IMFL - Bill 1: Volume=1000ml, Items=1
[2025-09-19 17:45:19] [INFO] Added SCMPL0019030 (750ml) to bill. Current volume: 750ml
[2025-09-19 17:45:19] [INFO] Added SCMPL0019029 (180ml) to bill. Current volume: 930ml
[2025-09-19 17:45:19] [INFO] Category IMFL - Bill 2: Volume=930ml, Items=2
[2025-09-19 17:45:19] [INFO] Added SCMPL0019028 (90ml) to bill. Current volume: 90ml
[2025-09-19 17:45:19] [INFO] Category IMFL - Final bill 3: Volume=90ml, Items=1
[2025-09-19 17:45:19] [INFO] Created 3 bills for category IMFL
[2025-09-19 17:45:19] [INFO] Created bill BL8 for date 2025-09-19 with 1 items, total amount: 100
[2025-09-19 17:45:19] [INFO] Created bill BL9 for date 2025-09-19 with 2 items, total amount: 1130
[2025-09-19 17:45:19] [INFO] Created bill BL10 for date 2025-09-19 with 1 items, total amount: 110
[2025-09-19 17:45:19] [INFO] Total bills created: 3
[2025-09-19 17:45:19] [INFO] Generated 3 bills with volume limits
[2025-09-19 17:45:19] [INFO] Saved 3 bills for later posting. Date range: 2025-09-19 to 2025-09-19. Total Amount: â‚¹1,340.00
