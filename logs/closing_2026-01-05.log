[2026-01-05 06:34:30] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767591270.1091
Memory: 2 MB
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 06:34:30] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 06:34:30] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767591270.111
Memory: 2 MB
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1_11_25'
num_rows: 1

[2026-01-05 06:34:30] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: YES

[2026-01-05 06:34:30] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767591270.1205
Memory: 2 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_01_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 06:34:30] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767591270.131
Memory: 2 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_01_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 23
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 4
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 06:34:30] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 06:34:30] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767591270.1909
Memory: 2 MB
date_range: 2025-11-01 to 2025-11-01
days_count: 1
total_items_checked: 50
fully_available: 50
partially_available: 0
not_available: 0
sample_availability: {
    "SCMPL0010696": {
        "2025-11-01": true
    },
    "SCMPL0010694": {
        "2025-11-01": true
    },
    "SCMPL0009668": {
        "2025-11-01": true
    }
}

[2026-01-05 06:34:30] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2025-11-01 to 2025-11-01
days_count: 1
fully_available: 50
partially_available: 0
not_available: 0

[2026-01-05 06:34:30] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767591270.2004
Memory: 2 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_01_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]

[2026-01-05 06:34:30] [DEBUG] === DEBUG [PAGE_LOAD_SUMMARY] ===
Time: 1767591270.2008
Memory: 2 MB
total_items: 108
current_page: 1
total_pages: 3
session_quantities_count: 0
post_quantities_count: 0
date_range: 2025-11-01 to 2025-11-01
days_count: 1
user_id: 1
comp_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
availability_summary: {
    "fully_available": 50,
    "partially_available": 0,
    "not_available": 0,
    "total_items": 50
}

[2026-01-05 06:34:30] [INFO] Sales by Closing Balance Page Load Debug Info:
Array
(
    [total_items] => 108
    [current_page] => 1
    [total_pages] => 3
    [session_quantities_count] => 0
    [post_quantities_count] => 0
    [date_range] => 2025-11-01 to 2025-11-01
    [days_count] => 1
    [user_id] => 1
    [comp_id] => 1
    [license_type] => FL-II
    [allowed_classes] => Array
        (
            [0] => W
            [1] => V
            [2] => G
            [3] => F
            [4] => D
            [5] => K
            [6] => R
            [7] => L
            [8] => M
            [9] => I
            [10] => Q
        )

    [end_day_column] => DAY_01_CLOSING
    [daily_stock_table] => tbldailystock_1_11_25
    [table_exists] => 1
    [availability_summary] => Array
        (
            [fully_available] => 50
            [partially_available] => 0
            [not_available] => 0
            [total_items] => 50
        )

)

[2026-01-05 06:34:38] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767591278.8949
Memory: 2 MB
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 06:34:38] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767591278.8965
Memory: 2 MB
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1_11_25'
num_rows: 1

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: YES

[2026-01-05 06:34:38] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767591278.9061
Memory: 2 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_01_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767591278.9149
Memory: 2 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_01_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 23
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 4
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 06:34:38] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767591278.9665
Memory: 2 MB
date_range: 2025-11-01 to 2025-11-01
days_count: 1
total_items_checked: 50
fully_available: 50
partially_available: 0
not_available: 0
sample_availability: {
    "SCMPL0010696": {
        "2025-11-01": true
    },
    "SCMPL0010694": {
        "2025-11-01": true
    },
    "SCMPL0009668": {
        "2025-11-01": true
    }
}

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2025-11-01 to 2025-11-01
days_count: 1
fully_available: 50
partially_available: 0
not_available: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [FORM_SUBMISSION] ===
Time: 1767591278.9674
Memory: 2 MB
post_keys: [
    "start_date",
    "end_date",
    "update_sales",
    "closing_balance"
]
closing_balance_count: 50
has_update_sales: YES
session_items_before: 1

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: FORM_SUBMISSION_RECEIVED ===
post_data_count: 50
action: update_sales

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9683
Memory: 2 MB
item_code: SCMPL0010696
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010696
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9693
Memory: 2 MB
item_code: SCMPL0010694
closing_balance: 20
current_stock: 23
sale_qty: 3
previous_qty: 3

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010694
closing_balance: 20
current_stock: 23
sale_qty: 3

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.972
Memory: 2 MB
item_code: SCMPL0009668
closing_balance: 4
current_stock: 4
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009668
closing_balance: 4
current_stock: 4
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9731
Memory: 2 MB
item_code: SCMPL0031945
closing_balance: 3
current_stock: 3
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0031945
closing_balance: 3
current_stock: 3
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9748
Memory: 2 MB
item_code: SCMPL0017866
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0017866
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9768
Memory: 2 MB
item_code: SCMPL0009678
closing_balance: 38
current_stock: 38
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009678
closing_balance: 38
current_stock: 38
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9782
Memory: 2 MB
item_code: SCMKS0018283
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMKS0018283
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9791
Memory: 2 MB
item_code: SCMIT0020167
closing_balance: 2
current_stock: 2
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMIT0020167
closing_balance: 2
current_stock: 2
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9797
Memory: 2 MB
item_code: SCMPL0010621
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010621
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9809
Memory: 2 MB
item_code: SCMPL0010619
closing_balance: 3
current_stock: 3
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010619
closing_balance: 3
current_stock: 3
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9814
Memory: 2 MB
item_code: SCMPL0009700
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009700
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.982
Memory: 2 MB
item_code: SCMPL0009698
closing_balance: 15
current_stock: 15
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009698
closing_balance: 15
current_stock: 15
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9825
Memory: 2 MB
item_code: SCMPL0009693
closing_balance: 4
current_stock: 4
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009693
closing_balance: 4
current_stock: 4
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9831
Memory: 2 MB
item_code: SCMPL0009695
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009695
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9836
Memory: 2 MB
item_code: SCMLS0018484
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0018484
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9842
Memory: 2 MB
item_code: SCMKB0031390
closing_balance: 62
current_stock: 62
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMKB0031390
closing_balance: 62
current_stock: 62
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9847
Memory: 2 MB
item_code: SCMKB0031389
closing_balance: 35
current_stock: 35
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMKB0031389
closing_balance: 35
current_stock: 35
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9852
Memory: 2 MB
item_code: SCMKB0031388
closing_balance: 53
current_stock: 53
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMKB0031388
closing_balance: 53
current_stock: 53
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9856
Memory: 2 MB
item_code: SCMBR0018132
closing_balance: 56
current_stock: 56
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018132
closing_balance: 56
current_stock: 56
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9868
Memory: 2 MB
item_code: SCMBR0009735
closing_balance: 38
current_stock: 38
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0009735
closing_balance: 38
current_stock: 38
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9886
Memory: 2 MB
item_code: SCMBR0018159
closing_balance: 64
current_stock: 64
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018159
closing_balance: 64
current_stock: 64
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9894
Memory: 2 MB
item_code: SCMBR0018158
closing_balance: 60
current_stock: 60
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018158
closing_balance: 60
current_stock: 60
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.99
Memory: 2 MB
item_code: SCMBR0018160
closing_balance: 79
current_stock: 79
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018160
closing_balance: 79
current_stock: 79
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9907
Memory: 2 MB
item_code: SCMBR0018963
closing_balance: 28
current_stock: 28
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018963
closing_balance: 28
current_stock: 28
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9915
Memory: 2 MB
item_code: SCMIT0019057
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMIT0019057
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9922
Memory: 2 MB
item_code: SCMPL0010445
closing_balance: 90
current_stock: 90
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010445
closing_balance: 90
current_stock: 90
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9927
Memory: 2 MB
item_code: SCMPL0035921
closing_balance: 66
current_stock: 66
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0035921
closing_balance: 66
current_stock: 66
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9931
Memory: 2 MB
item_code: SCMPL0009770
closing_balance: 42
current_stock: 42
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0009770
closing_balance: 42
current_stock: 42
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9936
Memory: 2 MB
item_code: SCMPL0010312
closing_balance: 48
current_stock: 48
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0010312
closing_balance: 48
current_stock: 48
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9941
Memory: 2 MB
item_code: SCMLS0027532
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0027532
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9946
Memory: 2 MB
item_code: SCMPL0019014
closing_balance: 4
current_stock: 4
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0019014
closing_balance: 4
current_stock: 4
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9952
Memory: 2 MB
item_code: SCMWN0020367
closing_balance: 34
current_stock: 34
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMWN0020367
closing_balance: 34
current_stock: 34
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9959
Memory: 2 MB
item_code: SCMWN0020361
closing_balance: 52
current_stock: 52
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMWN0020361
closing_balance: 52
current_stock: 52
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9964
Memory: 2 MB
item_code: SCMLS0023009
closing_balance: 2
current_stock: 2
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0023009
closing_balance: 2
current_stock: 2
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.997
Memory: 2 MB
item_code: SCMBR0010034
closing_balance: 2
current_stock: 2
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0010034
closing_balance: 2
current_stock: 2
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9976
Memory: 2 MB
item_code: SCMPL0033890
closing_balance: 15
current_stock: 15
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0033890
closing_balance: 15
current_stock: 15
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9982
Memory: 2 MB
item_code: SCMPL0034978
closing_balance: 3
current_stock: 3
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMPL0034978
closing_balance: 3
current_stock: 3
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9989
Memory: 2 MB
item_code: SCMLS0029952
closing_balance: 6
current_stock: 6
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0029952
closing_balance: 6
current_stock: 6
sale_qty: 0

[2026-01-05 06:34:38] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591278.9994
Memory: 2 MB
item_code: SCMLW0019523
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:38] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLW0019523
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0001
Memory: 2 MB
item_code: SCMIT0019512
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMIT0019512
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0008
Memory: 2 MB
item_code: SCMLS0036768
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0036768
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0015
Memory: 2 MB
item_code: SCMLS0037959
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0037959
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0025
Memory: 2 MB
item_code: SCMLS0018800
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0018800
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0051
Memory: 2 MB
item_code: SCMLS0018798
closing_balance: 9
current_stock: 9
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMLS0018798
closing_balance: 9
current_stock: 9
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0066
Memory: 2 MB
item_code: SCMIT0019050
closing_balance: 1
current_stock: 1
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMIT0019050
closing_balance: 1
current_stock: 1
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0072
Memory: 2 MB
item_code: SCMBR0018149
closing_balance: 10
current_stock: 10
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018149
closing_balance: 10
current_stock: 10
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0079
Memory: 2 MB
item_code: SCMBR0009846
closing_balance: 132
current_stock: 132
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0009846
closing_balance: 132
current_stock: 132
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0088
Memory: 2 MB
item_code: SCMBR0018627
closing_balance: 106
current_stock: 106
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018627
closing_balance: 106
current_stock: 106
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0096
Memory: 2 MB
item_code: SCMBR0009847
closing_balance: 64
current_stock: 64
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0009847
closing_balance: 64
current_stock: 64
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_CALCULATION] ===
Time: 1767591279.0101
Memory: 2 MB
item_code: SCMBR0018619
closing_balance: 22
current_stock: 22
sale_qty: 0
previous_qty: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_QUANTITY_CALCULATION ===
item_code: SCMBR0018619
closing_balance: 22
current_stock: 22
sale_qty: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [SESSION_UPDATE] ===
Time: 1767591279.0107
Memory: 2 MB
session_items_count: 1
items_with_positive_qty: 1
total_qty_sum: 3
first_5_items: [
    "SCMPL0010694: 3"
]

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: SESSION_UPDATE ===
session_items_count: 1
items_with_positive_qty: YES

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767591279.0183
Memory: 2 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_01_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: POST_REQUEST_RECEIVED ===
post_keys: ["start_date","end_date","update_sales","closing_balance"]
has_update_sales: YES
has_closing_balance: 50

[2026-01-05 06:34:39] [DEBUG] === DEBUG [POST_REQUEST_DETAILS] ===
Time: 1767591279.0192
Memory: 2 MB
request_method: POST
post_data_count: 4
update_sales: YES
closing_balance_count: 50
start_date: 2025-11-01
end_date: 2025-11-01

[2026-01-05 06:34:39] [DEBUG] === DEBUG [BILL_GENERATION_START] ===
Time: 1767591279.0204
Memory: 2 MB
user_id: 1
comp_id: 1
fin_year_id: 1
start_date: 2025-11-01
end_date: 2025-11-01
session_items_count: 1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: BILL_GENERATION_STARTED ===
user_id: 1
comp_id: 1
start_date: 2025-11-01
end_date: 2025-11-01

[2026-01-05 06:34:39] [DEBUG] === DEBUG [PROCESSING_PARAMETERS] ===
Time: 1767591279.0224
Memory: 2 MB
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
user_id: 1
fin_year_id: 1
session_items_count: 1
bulk_operation: NO

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: PROCESSING_PARAMETERS ===
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
user_id: 1
fin_year_id: 1
session_items_count: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [STOCK_TABLE_INFO_DETAILED] ===
Time: 1767591279.0232
Memory: 2 MB
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_function: getDailyStockTableName

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: STOCK_TABLE_INFO ===
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ALL_ITEMS_QUERY_DETAILS] ===
Time: 1767591279.0317
Memory: 2 MB
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, im.LIQ_FLAG,
                                       COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
                                FROM tblitemmaster im
                                LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                                WHERE dst.STK_MONTH = ?
                                AND dst.DAY_01_CLOSING > 0
stk_month_param: 2025-11
items_count: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
table: tbldailystock_1_11_25

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ALL_ITEMS_LOADED ===
items_count: 108
sample_items: ["SCMBR0009735","SCMBR0009846","SCMBR0009847","SCMBR0010034","SCMBR0018132"]

[2026-01-05 06:34:39] [DEBUG] === DEBUG [AVAILABILITY_CHECK_DETAILS] ===
Time: 1767591279.1468
Memory: 2 MB
items_checked: 108
availability_errors_count: 0
sample_errors: []
session_items_with_no_availability: []

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK_COMPLETE ===
items_checked: 108
availability_errors_count: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_STOCK_VALIDATION_DETAILED] ===
Time: 1767591279.1478
Memory: 2 MB
item_code: SCMPL0010694
current_stock: 23
requested_qty: 3
closing_balance: 20
item_name: AFTER DARK FINE GRAIN WHISKY .
validation_result: PASS

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_STOCK_VALIDATION ===
item_code: SCMPL0010694
current_stock: 23
requested_qty: 3
closing_balance: 20

[2026-01-05 06:34:39] [DEBUG] === DEBUG [STOCK_VALIDATION_SUMMARY] ===
Time: 1767591279.1489
Memory: 2 MB
total_items_validated: 1
stock_errors_count: 0
sample_stock_errors: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [TRANSACTION_STARTED_DETAILED] ===
Time: 1767591279.1496
Memory: 2 MB
transaction_id: TRX_1767591279_1
items_to_process: 1
session_items_with_qty: {
    "SCMPL0010694": 3
}
mysql_thread_id: 118

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: TRANSACTION_STARTED ===
transaction_id: TRX_1767591279_1
items_to_process: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_DATA_PREPARATION_START] ===
Time: 1767591279.1504
Memory: 2 MB
session_items_count: 1
date_array_count: 1
start_date: 2025-11-01
end_date: 2025-11-01

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: PREPARING_ITEM_DATA ===
session_items_count: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_PROCESSING_DETAILED] ===
Time: 1767591279.152
Memory: 2 MB
item_number: 1
total_items: 1
item_code: SCMPL0010694
quantity: 3
item_name: AFTER DARK FINE GRAIN WHISKY .
batch: 1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: PROCESSING_ITEM ===
item_number: 1
total_items: 1
item_code: SCMPL0010694
quantity: 3

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ITEM_DISTRIBUTION_CREATED_DETAILED] ===
Time: 1767591279.1533
Memory: 2 MB
item_code: SCMPL0010694
total_qty: 3
available_dates: 1
total_dates: 1
daily_sales_summary: 3
distribution_sample: {
    "2025-11-01": 3
}
item_mode: F

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ITEM_DISTRIBUTION_CREATED ===
item_code: SCMPL0010694
total_qty: 3
daily_sales: {"2025-11-01":3}
available_dates: 1
item_mode: F

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ALL_ITEMS_PROCESSED_SUMMARY] ===
Time: 1767591279.1557
Memory: 2 MB
total_processed: 1
items_with_data: 1
daily_sales_items: 1
total_qty_all_items: 3
items_data_sample: {
    "SCMPL0010694": {
        "name": "AFTER DARK FINE GRAIN WHISKY .",
        "rate": "1000.000",
        "total_qty": 3,
        "mode": "F"
    }
}

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ALL_ITEMS_PROCESSED ===
total_processed: 1
items_with_data: 1
daily_sales_items: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [DATE_WISE_STOCK_VALIDATION_START_DETAILED] ===
Time: 1767591279.1569
Memory: 2 MB
items_to_validate: 1
total_dates: 1
sample_daily_sales: {
    "SCMPL0010694": {
        "2025-11-01": 3
    }
}

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: DATE_WISE_STOCK_VALIDATION_START ===
items_to_validate: 1

[2026-01-05 06:34:39] [WARNING] Stock table 'tbldailystock_1_01_70' not found for date 
[2026-01-05 06:34:39] [DEBUG] === DEBUG [DATE_WISE_STOCK_VALIDATION_PASSED_DETAILED] ===
Time: 1767591279.1599
Memory: 2 MB
validated_items: 1
total_date_qty_combinations: 1
status: ALL_VALIDATIONS_PASSED

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: DATE_WISE_STOCK_VALIDATION_PASSED ===
validated_items: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [BILL_GENERATION_START_DETAILED] ===
Time: 1767591279.1608
Memory: 2 MB
total_items: 1
total_quantity: 3
date_range: 2025-11-01 to 2025-11-01
days_count: 1
transaction_id: TRX_1767591279_1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: BILL_GENERATION_START ===
total_items: 1
total_quantity: 3

[2026-01-05 06:34:39] [DEBUG] === DEBUG [CALLING_GENERATE_BILLS_FUNCTION_DETAILED] ===
Time: 1767591279.1617
Memory: 2 MB
function: generateBillsWithLimits
items_count: 1
date_array_count: 1
mode: F
comp_id: 1
user_id: 1
fin_year_id: 1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: CALLING_GENERATE_BILLS_FUNCTION ===
function: generateBillsWithLimits
items_count: 1
date_array_count: 1
mode: F

[2026-01-05 06:34:39] [DEBUG] === DEBUG [BILLS_GENERATED_DETAILED] ===
Time: 1767591279.1631
Memory: 2 MB
bills_count: 0
total_amount_all_bills: 0
total_items_all_bills: 0
sample_bill_dates: []
bills_by_mode: []
first_3_bills: []

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: BILLS_GENERATED ===
bills_count: 0
sample_bills: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [GET_NEXT_BILL_NUMBER_START] ===
Time: 1767591279.1637
Memory: 2 MB
comp_id: 1
action: Using transaction for atomic operation

[2026-01-05 06:34:39] [INFO] Getting next bill number for CompID: 1
[2026-01-05 06:34:39] [DEBUG] === DEBUG [INITIAL_BILL_NUMBER] ===
Time: 1767591279.1649
Memory: 2 MB
max_bill_found: NULL
next_bill: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [BILL_NUMBER_CHECK] ===
Time: 1767591279.1656
Memory: 2 MB
bill_no_to_check: BL0001
exists: NO

[2026-01-05 06:34:39] [DEBUG] === DEBUG [GET_NEXT_BILL_NUMBER_COMPLETE] ===
Time: 1767591279.1661
Memory: 2 MB
next_bill: 1
final_bill_no: BL0001
status: SUCCESS

[2026-01-05 06:34:39] [INFO] Next bill number for CompID 1: 1
[2026-01-05 06:34:39] [DEBUG] === DEBUG [NEXT_BILL_NUMBER_DETAILED] ===
Time: 1767591279.1668
Memory: 2 MB
next_bill_number: 1
comp_id: 1
current_stock_column: Current_Stock1
opening_stock_column: Opening_Stock1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: NEXT_BILL_NUMBER ===
next_bill_number: 1
comp_id: 1

[2026-01-05 06:34:39] [DEBUG] === DEBUG [BILLS_SORTED] ===
Time: 1767591279.1676
Memory: 2 MB
total_bills: 0
first_bill_date: N/A
last_bill_date: N/A
sorted_dates: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [ALL_BILLS_PROCESSED_SUMMARY] ===
Time: 1767591279.168
Memory: 2 MB
total_bills: 0
total_amount: 0
bill_numbers: []
transaction_id: TRX_1767591279_1
cascading_updates_completed: YES
daily_stock_tables_updated: []

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: ALL_BILLS_PROCESSED ===
total_bills: 0
total_amount: 0
bill_numbers: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [TRANSACTION_COMMITTED_DETAILED] ===
Time: 1767591279.1694
Memory: 2 MB
transaction_success: YES
total_amount: 0
bills_created: 0
bill_numbers: []
transaction_id: TRX_1767591279_1
commit_time: 1767591279.1694

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: TRANSACTION_COMMITTED ===
transaction_success: YES
total_amount: 0
bills_created: 0

[2026-01-05 06:34:39] [INFO] Session quantities cleared
[2026-01-05 06:34:39] [DEBUG] === DEBUG [SUCCESS_MESSAGE_DETAILED] ===
Time: 1767591279.172
Memory: 2 MB
message: Sales distributed successfully! Generated 0 bills. Total Amount: ₹0.00
bills_count: 0
total_amount: 0
items_processed: 1
total_qty_processed: 3
cascading_updates: COMPLETED

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: SUCCESS_MESSAGE ===
message: Sales distributed successfully! Generated 0 bills. Total Amount: ₹0.00
bills_count: 0
total_amount: 0

[2026-01-05 06:34:39] [DEBUG] === DEBUG [CASH_MEMO_GENERATION_START_DETAILED] ===
Time: 1767591279.1731
Memory: 2 MB
bill_count: 0
bill_numbers: []
comp_id: 1
user_id: 1

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: CASH_MEMO_GENERATION_START ===
bill_count: 0
bill_numbers: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [CASH_MEMO_GENERATION_COMPLETE_DETAILED] ===
Time: 1767591279.174
Memory: 2 MB
successful: 0
failed: 0
failed_bills: []
success_rate: 0/0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: CASH_MEMO_GENERATION_COMPLETE ===
successful: 0
failed: 0
failed_bills: []

[2026-01-05 06:34:39] [DEBUG] === DEBUG [REDIRECTING_TO_RETAIL_SALE_DETAILED] ===
Time: 1767591279.175
Memory: 2 MB
redirect_url: retail_sale.php
success_message: Sales distributed successfully! Generated 0 bills. Total Amount: ₹0.00
session_cleared: YES
final_bill_count: 0

[2026-01-05 06:34:39] [INFO] === BILL GENERATION STEP: REDIRECTING_TO_RETAIL_SALE ===
redirect_url: retail_sale.php
success_message: Sales distributed successfully! Generated 0 bills. Total Amount: ₹0.00

[2026-01-05 07:33:58] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767594838.2131
Memory: 8 MB
start_date: 2026-01-05
end_date: 2026-01-05
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 07:33:58] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2026-01-05
end_date: 2026-01-05
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 07:33:58] [DEBUG] Table selection: Date=2026-01-05, CurrentMonth=2026-01, DateMonth=2026-01, CompID=1
[2026-01-05 07:33:58] [DEBUG] Selected table: tbldailystock_1 for date 2026-01-05
[2026-01-05 07:33:58] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767594838.2178
Memory: 8 MB
end_date: 2026-01-05
end_day: 05
end_day_column: DAY_05_CLOSING
daily_stock_table: tbldailystock_1
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1'
num_rows: 1

[2026-01-05 07:33:58] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2026-01-05
end_day: 05
end_day_column: DAY_05_CLOSING
daily_stock_table: tbldailystock_1
table_exists: YES

[2026-01-05 07:33:58] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767594838.245
Memory: 8 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_05_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2026-01"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 07:33:58] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767594838.266
Memory: 8 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_05_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_05_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2026-01",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 20
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 2
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 07:33:58] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010696 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010694 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009668 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0031945 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0017866 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009678 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMKS0018283 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMIT0020167 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010621 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010619 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009700 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009698 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009693 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009695 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0018484 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMKB0031390 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMKB0031389 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMKB0031388 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018132 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0009735 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018159 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018158 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018160 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018963 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMIT0019057 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010445 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0035921 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0009770 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0010312 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0027532 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0019014 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMWN0020367 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMWN0020361 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0023009 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0010034 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0033890 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMPL0034978 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0029952 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLW0019523 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMIT0019512 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0036768 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0037959 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0018800 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMLS0018798 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMIT0019050 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018149 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0009846 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018627 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0009847 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] Item SCMBR0018619 availability: 1/1 dates available
[2026-01-05 07:33:58] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767594838.3846
Memory: 8 MB
date_range: 2026-01-05 to 2026-01-05
days_count: 1
total_items_checked: 50
fully_available: 50
partially_available: 0
not_available: 0
sample_availability: {
    "SCMPL0010696": {
        "2026-01-05": true
    },
    "SCMPL0010694": {
        "2026-01-05": true
    },
    "SCMPL0009668": {
        "2026-01-05": true
    }
}

[2026-01-05 07:33:58] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2026-01-05 to 2026-01-05
days_count: 1
fully_available: 50
partially_available: 0
not_available: 0

[2026-01-05 07:33:58] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767594838.413
Memory: 8 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_05_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_05_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2026-01"
]

[2026-01-05 07:33:58] [DEBUG] === DEBUG [PAGE_LOAD_SUMMARY] ===
Time: 1767594838.4139
Memory: 8 MB
total_items: 108
current_page: 1
total_pages: 3
session_quantities_count: 1
post_quantities_count: 0
date_range: 2026-01-05 to 2026-01-05
days_count: 1
user_id: 1
comp_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]
end_day_column: DAY_05_CLOSING
daily_stock_table: tbldailystock_1
table_exists: 1
availability_summary: {
    "fully_available": 50,
    "partially_available": 0,
    "not_available": 0,
    "total_items": 50
}

[2026-01-05 07:33:58] [INFO] Sales by Closing Balance Page Load Debug Info:
Array
(
    [total_items] => 108
    [current_page] => 1
    [total_pages] => 3
    [session_quantities_count] => 1
    [post_quantities_count] => 0
    [date_range] => 2026-01-05 to 2026-01-05
    [days_count] => 1
    [user_id] => 1
    [comp_id] => 1
    [license_type] => FL-II
    [allowed_classes] => Array
        (
            [0] => W
            [1] => V
            [2] => G
            [3] => F
            [4] => D
            [5] => K
            [6] => R
            [7] => L
            [8] => M
            [9] => I
            [10] => Q
        )

    [end_day_column] => DAY_05_CLOSING
    [daily_stock_table] => tbldailystock_1
    [table_exists] => 1
    [availability_summary] => Array
        (
            [fully_available] => 50
            [partially_available] => 0
            [not_available] => 0
            [total_items] => 50
        )

)

[2026-01-05 07:34:11] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767594851.8613
Memory: 6 MB
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 07:34:11] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 07:34:11] [DEBUG] Table selection: Date=2025-11-01, CurrentMonth=2026-01, DateMonth=2025-11, CompID=1
[2026-01-05 07:34:11] [DEBUG] Selected table: tbldailystock_1_11_25 for date 2025-11-01
[2026-01-05 07:34:11] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767594851.8668
Memory: 6 MB
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1_11_25'
num_rows: 1

[2026-01-05 07:34:11] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: YES

[2026-01-05 07:34:12] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767594852.0143
Memory: 6 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_01_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 07:34:12] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767594852.0458
Memory: 6 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_01_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 20
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 2
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010696 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010694 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009668: Date 2025-11-01 blocked - after latest sale date 2025-11-01
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009668 availability: 0/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0031945 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0017866 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009678 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKS0018283 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0020167 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010621 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010619 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009700 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009698 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009693 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009695 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018484 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031390 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031389 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031388 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018132 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009735 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018159 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018158 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018160 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018963 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019057 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010445 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0035921 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009770 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010312 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0027532 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0019014 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMWN0020367 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMWN0020361 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0023009 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0010034 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0033890 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0034978 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0029952 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLW0019523 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019512 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0036768 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0037959 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018800 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018798 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019050 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018149 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009846 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018627 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009847 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018619 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767594852.271
Memory: 6 MB
date_range: 2025-11-01 to 2025-11-01
days_count: 1
total_items_checked: 50
fully_available: 49
partially_available: 0
not_available: 1
sample_availability: {
    "SCMPL0010696": {
        "2025-11-01": true
    },
    "SCMPL0010694": {
        "2025-11-01": true
    },
    "SCMPL0009668": {
        "2025-11-01": false
    }
}

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2025-11-01 to 2025-11-01
days_count: 1
fully_available: 49
partially_available: 0
not_available: 1

[2026-01-05 07:34:12] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767594852.3149
Memory: 6 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_01_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]

[2026-01-05 07:34:12] [DEBUG] === DEBUG [PAGE_LOAD_SUMMARY] ===
Time: 1767594852.3161
Memory: 6 MB
total_items: 108
current_page: 1
total_pages: 3
session_quantities_count: 1
post_quantities_count: 0
date_range: 2025-11-01 to 2025-11-01
days_count: 1
user_id: 1
comp_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
availability_summary: {
    "fully_available": 49,
    "partially_available": 0,
    "not_available": 1,
    "total_items": 50
}

[2026-01-05 07:34:12] [INFO] Sales by Closing Balance Page Load Debug Info:
Array
(
    [total_items] => 108
    [current_page] => 1
    [total_pages] => 3
    [session_quantities_count] => 1
    [post_quantities_count] => 0
    [date_range] => 2025-11-01 to 2025-11-01
    [days_count] => 1
    [user_id] => 1
    [comp_id] => 1
    [license_type] => FL-II
    [allowed_classes] => Array
        (
            [0] => W
            [1] => V
            [2] => G
            [3] => F
            [4] => D
            [5] => K
            [6] => R
            [7] => L
            [8] => M
            [9] => I
            [10] => Q
        )

    [end_day_column] => DAY_01_CLOSING
    [daily_stock_table] => tbldailystock_1_11_25
    [table_exists] => 1
    [availability_summary] => Array
        (
            [fully_available] => 49
            [partially_available] => 0
            [not_available] => 1
            [total_items] => 50
        )

)

[2026-01-05 07:34:12] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767594852.3652
Memory: 4 MB
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2025-11-01
end_date: 2025-11-01
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 07:34:12] [DEBUG] Table selection: Date=2025-11-01, CurrentMonth=2026-01, DateMonth=2025-11, CompID=1
[2026-01-05 07:34:12] [DEBUG] Selected table: tbldailystock_1_11_25 for date 2025-11-01
[2026-01-05 07:34:12] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767594852.3738
Memory: 4 MB
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1_11_25'
num_rows: 1

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2025-11-01
end_day: 01
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: YES

[2026-01-05 07:34:12] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767594852.4127
Memory: 4 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_01_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 07:34:12] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767594852.4637
Memory: 4 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_01_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 20
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 2
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010696 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010694 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009668: Date 2025-11-01 blocked - after latest sale date 2025-11-01
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009668 availability: 0/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0031945 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0017866 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009678 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKS0018283 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0020167 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010621 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010619 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009700 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009698 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009693 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009695 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018484 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031390 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031389 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMKB0031388 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018132 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009735 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018159 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018158 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018160 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018963 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019057 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010445 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0035921 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0009770 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0010312 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0027532 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0019014 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMWN0020367 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMWN0020361 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0023009 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0010034 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0033890 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMPL0034978 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0029952 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLW0019523 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019512 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0036768 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0037959 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018800 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMLS0018798 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMIT0019050 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018149 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009846 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018627 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0009847 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] Item SCMBR0018619 availability: 1/1 dates available
[2026-01-05 07:34:12] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767594852.7051
Memory: 4 MB
date_range: 2025-11-01 to 2025-11-01
days_count: 1
total_items_checked: 50
fully_available: 49
partially_available: 0
not_available: 1
sample_availability: {
    "SCMPL0010696": {
        "2025-11-01": true
    },
    "SCMPL0010694": {
        "2025-11-01": true
    },
    "SCMPL0009668": {
        "2025-11-01": false
    }
}

[2026-01-05 07:34:12] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2025-11-01 to 2025-11-01
days_count: 1
fully_available: 49
partially_available: 0
not_available: 1

[2026-01-05 07:34:12] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767594852.7522
Memory: 4 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_01_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_01_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]

[2026-01-05 07:34:12] [DEBUG] === DEBUG [PAGE_LOAD_SUMMARY] ===
Time: 1767594852.754
Memory: 4 MB
total_items: 108
current_page: 1
total_pages: 3
session_quantities_count: 1
post_quantities_count: 0
date_range: 2025-11-01 to 2025-11-01
days_count: 1
user_id: 1
comp_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]
end_day_column: DAY_01_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
availability_summary: {
    "fully_available": 49,
    "partially_available": 0,
    "not_available": 1,
    "total_items": 50
}

[2026-01-05 07:34:12] [INFO] Sales by Closing Balance Page Load Debug Info:
Array
(
    [total_items] => 108
    [current_page] => 1
    [total_pages] => 3
    [session_quantities_count] => 1
    [post_quantities_count] => 0
    [date_range] => 2025-11-01 to 2025-11-01
    [days_count] => 1
    [user_id] => 1
    [comp_id] => 1
    [license_type] => FL-II
    [allowed_classes] => Array
        (
            [0] => W
            [1] => V
            [2] => G
            [3] => F
            [4] => D
            [5] => K
            [6] => R
            [7] => L
            [8] => M
            [9] => I
            [10] => Q
        )

    [end_day_column] => DAY_01_CLOSING
    [daily_stock_table] => tbldailystock_1_11_25
    [table_exists] => 1
    [availability_summary] => Array
        (
            [fully_available] => 49
            [partially_available] => 0
            [not_available] => 1
            [total_items] => 50
        )

)

[2026-01-05 07:34:38] [DEBUG] === DEBUG [DATE_SELECTION] ===
Time: 1767594878.0637
Memory: 8 MB
start_date: 2025-11-02
end_date: 2025-11-02
comp_id: 1
mode: F
sequence_type: user_defined
search: 
user_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]

[2026-01-05 07:34:38] [INFO] === BILL GENERATION STEP: DATE_SELECTION ===
start_date: 2025-11-02
end_date: 2025-11-02
comp_id: 1
mode: F
sequence_type: user_defined
search: 

[2026-01-05 07:34:38] [DEBUG] Table selection: Date=2025-11-02, CurrentMonth=2026-01, DateMonth=2025-11, CompID=1
[2026-01-05 07:34:38] [DEBUG] Selected table: tbldailystock_1_11_25 for date 2025-11-02
[2026-01-05 07:34:38] [DEBUG] === DEBUG [TABLE_SELECTION] ===
Time: 1767594878.0685
Memory: 8 MB
end_date: 2025-11-02
end_day: 02
end_day_column: DAY_02_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
check_query: SHOW TABLES LIKE 'tbldailystock_1_11_25'
num_rows: 1

[2026-01-05 07:34:38] [INFO] === BILL GENERATION STEP: TABLE_SELECTION ===
end_date: 2025-11-02
end_day: 02
end_day_column: DAY_02_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: YES

[2026-01-05 07:34:38] [DEBUG] === DEBUG [COUNT_QUERY] ===
Time: 1767594878.087
Memory: 8 MB
query: SELECT COUNT(DISTINCT im.CODE) as total 
                    FROM tblitemmaster im 
                    LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                    WHERE im.LIQ_FLAG = ? 
                    AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                    AND dst.STK_MONTH = ?
                    AND dst.DAY_02_CLOSING > 0
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]
types: sssssssssssss
total_items: 108
search_term: 
table_exists: 1

[2026-01-05 07:34:38] [DEBUG] === DEBUG [ITEMS_LOADED] ===
Time: 1767594878.1137
Memory: 8 MB
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.RPRICE, im.CLASS, 
                     COALESCE(dst.DAY_02_CLOSING, 0) as CURRENT_STOCK
              FROM tblitemmaster im
              LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
              WHERE im.LIQ_FLAG = ? 
              AND im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
              AND dst.STK_MONTH = ?
              AND dst.DAY_02_CLOSING > 0 ORDER BY im.DETAILS ASC LIMIT ? OFFSET ?
params: [
    "F",
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11",
    50,
    0
]
first_5_items: [
    {
        "CODE": "SCMPL0010696",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "750 ML",
        "RPRICE": "110.000",
        "CLASS": "W",
        "CURRENT_STOCK": 1
    },
    {
        "CODE": "SCMPL0010694",
        "DETAILS": "AFTER DARK FINE GRAIN WHISKY .",
        "DETAILS2": "180 ML",
        "RPRICE": "1000.000",
        "CLASS": "W",
        "CURRENT_STOCK": 23
    },
    {
        "CODE": "SCMPL0009668",
        "DETAILS": "Antiquity Blue Whisky .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "W",
        "CURRENT_STOCK": 4
    },
    {
        "CODE": "SCMPL0031945",
        "DETAILS": "BACARDI + CRANBERRY FLAVOURED .",
        "DETAILS2": "275 ML(24)",
        "RPRICE": "110.000",
        "CLASS": "R",
        "CURRENT_STOCK": 3
    },
    {
        "CODE": "SCMPL0017866",
        "DETAILS": "BACARDI BLACK DELUXE RUM .",
        "DETAILS2": "180 ML",
        "RPRICE": "100.000",
        "CLASS": "R",
        "CURRENT_STOCK": 1
    }
]

[2026-01-05 07:34:38] [INFO] === BILL GENERATION STEP: ITEMS_LOADED ===
total_items: 108
items_on_page: 50
current_page: 1
items_per_page: 50

[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010696 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010694 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009668 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0031945 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0017866 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009678 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMKS0018283 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMIT0020167 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010621 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010619 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009700 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009698 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009693 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009695 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0018484 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMKB0031390 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMKB0031389 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMKB0031388 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018132 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0009735 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018159 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018158 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018160 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018963 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMIT0019057 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010445 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0035921 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0009770 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0010312 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0027532 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0019014 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMWN0020367 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMWN0020361 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0023009 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0010034 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0033890 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMPL0034978 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0029952 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLW0019523 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMIT0019512 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0036768 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0037959 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0018800 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMLS0018798 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMIT0019050 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018149 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0009846 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018627 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0009847 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] Item SCMBR0018619 availability: 1/1 dates available
[2026-01-05 07:34:38] [DEBUG] === DEBUG [AVAILABILITY_CHECK] ===
Time: 1767594878.2527
Memory: 8 MB
date_range: 2025-11-02 to 2025-11-02
days_count: 1
total_items_checked: 50
fully_available: 50
partially_available: 0
not_available: 0
sample_availability: {
    "SCMPL0010696": {
        "2025-11-02": true
    },
    "SCMPL0010694": {
        "2025-11-02": true
    },
    "SCMPL0009668": {
        "2025-11-02": true
    }
}

[2026-01-05 07:34:38] [INFO] === BILL GENERATION STEP: AVAILABILITY_CHECK ===
date_range: 2025-11-02 to 2025-11-02
days_count: 1
fully_available: 50
partially_available: 0
not_available: 0

[2026-01-05 07:34:38] [DEBUG] === DEBUG [ALL_ITEMS_DATA] ===
Time: 1767594878.2689
Memory: 8 MB
total_items_all_modes: 108
sample_items: [
    "SCMBR0009735",
    "SCMBR0009846",
    "SCMBR0009847",
    "SCMBR0010034",
    "SCMBR0018132"
]
query: SELECT im.CODE, im.DETAILS, im.DETAILS2, im.CLASS, im.LIQ_FLAG, im.RPRICE,
                               COALESCE(dst.DAY_02_CLOSING, 0) as CURRENT_STOCK
                        FROM tblitemmaster im
                        LEFT JOIN tbldailystock_1_11_25 dst ON im.CODE = dst.ITEM_CODE 
                        WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?)
                        AND dst.STK_MONTH = ?
                        AND dst.DAY_02_CLOSING > 0
params: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q",
    "2025-11"
]

[2026-01-05 07:34:38] [DEBUG] === DEBUG [PAGE_LOAD_SUMMARY] ===
Time: 1767594878.2699
Memory: 8 MB
total_items: 108
current_page: 1
total_pages: 3
session_quantities_count: 1
post_quantities_count: 0
date_range: 2025-11-02 to 2025-11-02
days_count: 1
user_id: 1
comp_id: 1
license_type: FL-II
allowed_classes: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "L",
    "M",
    "I",
    "Q"
]
end_day_column: DAY_02_CLOSING
daily_stock_table: tbldailystock_1_11_25
table_exists: 1
availability_summary: {
    "fully_available": 50,
    "partially_available": 0,
    "not_available": 0,
    "total_items": 50
}

[2026-01-05 07:34:38] [INFO] Sales by Closing Balance Page Load Debug Info:
Array
(
    [total_items] => 108
    [current_page] => 1
    [total_pages] => 3
    [session_quantities_count] => 1
    [post_quantities_count] => 0
    [date_range] => 2025-11-02 to 2025-11-02
    [days_count] => 1
    [user_id] => 1
    [comp_id] => 1
    [license_type] => FL-II
    [allowed_classes] => Array
        (
            [0] => W
            [1] => V
            [2] => G
            [3] => F
            [4] => D
            [5] => K
            [6] => R
            [7] => L
            [8] => M
            [9] => I
            [10] => Q
        )

    [end_day_column] => DAY_02_CLOSING
    [daily_stock_table] => tbldailystock_1_11_25
    [table_exists] => 1
    [availability_summary] => Array
        (
            [fully_available] => 50
            [partially_available] => 0
            [not_available] => 0
            [total_items] => 50
        )

)

[2026-01-05 08:07:46] [INFO] === BILL GENERATION STEP: TRANSACTION_STARTED ===
transaction_id: TRX_1767596866_1
items_to_process: 1

[2026-01-05 08:07:46] [INFO] === BILL GENERATION STEP: BILL_GENERATION_START ===
total_items: 1
total_quantity: 3

[2026-01-05 08:07:46] [INFO] generateSimpleBills called with 1 items
[2026-01-05 08:07:46] [INFO] generateSimpleBills generated 0 bills
[2026-01-05 08:07:46] [INFO] Getting next bill number for CompID: 1
[2026-01-05 08:07:46] [INFO] Next bill number for CompID 1: 1
[2026-01-05 08:07:46] [INFO] Session quantities cleared
[2026-01-05 08:08:11] [INFO] === BILL GENERATION STEP: TRANSACTION_STARTED ===
transaction_id: TRX_1767596891_1
items_to_process: 1

[2026-01-05 08:08:11] [INFO] === BILL GENERATION STEP: BILL_GENERATION_START ===
total_items: 1
total_quantity: 2

[2026-01-05 08:08:11] [INFO] generateSimpleBills called with 1 items
[2026-01-05 08:08:11] [INFO] generateSimpleBills generated 0 bills
[2026-01-05 08:08:11] [INFO] Getting next bill number for CompID: 1
[2026-01-05 08:08:11] [INFO] Next bill number for CompID 1: 1
[2026-01-05 08:08:11] [INFO] Session quantities cleared
