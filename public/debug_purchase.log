[2025-10-15 05:19:15] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:19:15] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 05:19:15] POST data: {
    "mode": "F",
    "voc_no": "9",
    "date": "2025-08-31",
    "auto_tp_no": "FL173-310825\/7587",
    "tp_no": "7585",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "BHARAT WINES",
    "supplier_code": "BHAR",
    "items": [
        {
            "code": "SCMPL0034977",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "171",
            "auto_batch": "BTP14-250725\/168",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "460"
        },
        {
            "code": "SCMPL0034978",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "206",
            "auto_batch": "BTP14-130825\/203",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "230"
        },
        {
            "code": "SCMPL0038199",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "2000 ML Pet (6)",
            "bottles_per_case": "6",
            "batch_no": "202",
            "auto_batch": "BTP14-090825\/199",
            "mfg_month": "Aug-2025",
            "bl": "12",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "2300"
        },
        {
            "code": "SCMWN0041743",
            "name": "SAMSON XXX PREMIUM QUALITY FORTIFIED WINE .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "SM02",
            "auto_batch": "BTWN44-170825\/11",
            "mfg_month": "Aug-2025",
            "bl": "38.88",
            "vv": "24",
            "tot_bott": "216",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "4",
            "bottles": "24",
            "case_rate": "800.000",
            "mrp": "58"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "24900.00",
    "tamt": "24900.00"
}
[2025-10-15 05:19:15] GET data: []
[2025-10-15 05:19:15] Company ID from session: 1
[2025-10-15 05:19:15] Database connection included
[2025-10-15 05:19:15] License functions included
[2025-10-15 05:19:15] License type: FL-II
[2025-10-15 05:19:15] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:19:15] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:19:15] Purchase mode: F
[2025-10-15 05:19:15] Next voucher number: 9
[2025-10-15 05:19:15] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:19:15] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:19:16] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:19:16] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:19:16] === FORM SUBMISSION STARTED ===
[2025-10-15 05:19:16] Form data extracted: {
    "date": "2025-08-31",
    "voc_no": "9",
    "auto_tp_no": "FL173-310825\/7587",
    "tp_no": "7585",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "BHAR",
    "supplier_name": "BHARAT WINES",
    "basic_amt": "24900.00",
    "total_amt": "24900.00"
}
[2025-10-15 05:19:16] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-08-31",
        "BHAR",
        "FL173-310825\/7587",
        "9",
        "",
        "",
        "24900.00",
        "7585",
        "2025-08-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-15 05:40:50] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:40:50] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 05:40:50] POST data: []
[2025-10-15 05:40:50] GET data: []
[2025-10-15 05:40:50] Company ID from session: 1
[2025-10-15 05:40:50] Database connection included
[2025-10-15 05:40:50] License functions included
[2025-10-15 05:40:50] License type: FL-II
[2025-10-15 05:40:50] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:40:50] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:40:50] Purchase mode: F
[2025-10-15 05:40:50] Next voucher number: 9
[2025-10-15 05:40:50] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:40:50] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:40:50] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:40:50] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:43:02] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:43:02] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:43:02] POST data: []
[2025-10-15 05:43:02] GET data: []
[2025-10-15 05:43:02] Company ID from session: 1
[2025-10-15 05:43:02] Database connection included
[2025-10-15 05:43:02] License functions included
[2025-10-15 05:43:02] License type: FL-II
[2025-10-15 05:43:02] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:43:02] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:43:02] Purchase mode: F
[2025-10-15 05:43:02] Next voucher number: 9
[2025-10-15 05:43:02] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:43:02] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:43:02] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:43:02] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:43:02] Database connection closed
[2025-10-15 05:43:02] === PURCHASE SESSION ENDED ===
[2025-10-15 05:45:13] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:45:13] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:45:13] POST data: []
[2025-10-15 05:45:13] GET data: []
[2025-10-15 05:45:13] Company ID from session: 1
[2025-10-15 05:45:13] Database connection included
[2025-10-15 05:45:13] License functions included
[2025-10-15 05:45:13] License type: FL-II
[2025-10-15 05:45:13] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:45:13] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:45:13] Purchase mode: F
[2025-10-15 05:45:13] Next voucher number: 9
[2025-10-15 05:45:13] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:45:13] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:45:13] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:45:13] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:45:14] Database connection closed
[2025-10-15 05:45:14] === PURCHASE SESSION ENDED ===
[2025-10-15 05:47:15] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:47:15] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:47:15] POST data: []
[2025-10-15 05:47:15] GET data: []
[2025-10-15 05:47:15] Company ID from session: 1
[2025-10-15 05:47:15] Database connection included
[2025-10-15 05:47:15] License functions included
[2025-10-15 05:47:15] License type: FL-II
[2025-10-15 05:47:15] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:47:15] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:47:15] Purchase mode: F
[2025-10-15 05:47:15] Next voucher number: 9
[2025-10-15 05:47:15] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:47:15] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:47:15] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:47:15] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:47:15] Database connection closed
[2025-10-15 05:47:15] === PURCHASE SESSION ENDED ===
[2025-10-15 05:47:38] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:47:38] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:47:38] POST data: {
    "mode": "F",
    "voc_no": "9",
    "date": "2025-07-01",
    "auto_tp_no": "CL2296-300625\/1197",
    "tp_no": "1197",
    "tp_date": "2025-06-30",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "RAJ MARKETING & CO.",
    "supplier_code": "RAJ",
    "items": [
        {
            "code": "SCMCL0012761",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "149",
            "auto_batch": "BTC27-280625\/149",
            "mfg_month": "Jun-2025",
            "bl": "180",
            "vv": "42.8",
            "tot_bott": "2000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "20",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "40"
        },
        {
            "code": "SCMCL0013629",
            "name": "ICAP SANTRA .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "87",
            "auto_batch": "BTC32-300625\/87",
            "mfg_month": "Jun-2025",
            "bl": "90",
            "vv": "35.7",
            "tot_bott": "1000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "10",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "25"
        },
        {
            "code": "SCMCL0013677",
            "name": "THREE X-Sangali .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "84",
            "auto_batch": "BTC32-280625\/84",
            "mfg_month": "Jun-2025",
            "bl": "180",
            "vv": "42.8",
            "tot_bott": "2000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "20",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "40"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "6000.00",
    "tamt": "6000.00"
}
[2025-10-15 05:47:38] GET data: []
[2025-10-15 05:47:38] Company ID from session: 1
[2025-10-15 05:47:38] Database connection included
[2025-10-15 05:47:38] License functions included
[2025-10-15 05:47:38] License type: FL-II
[2025-10-15 05:47:38] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:47:38] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:47:38] Purchase mode: F
[2025-10-15 05:47:38] Next voucher number: 9
[2025-10-15 05:47:38] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:47:38] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:47:38] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:47:38] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:47:38] === FORM SUBMISSION STARTED ===
[2025-10-15 05:47:38] Form data extracted: {
    "date": "2025-07-01",
    "voc_no": "9",
    "auto_tp_no": "CL2296-300625\/1197",
    "tp_no": "1197",
    "tp_date": "2025-06-30",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "RAJ",
    "supplier_name": "RAJ MARKETING & CO.",
    "basic_amt": "6000.00",
    "total_amt": "6000.00"
}
[2025-10-15 05:47:38] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-07-01",
        "RAJ",
        "CL2296-300625\/1197",
        "9",
        "",
        "",
        "6000.00",
        "1197",
        "2025-06-30",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-15 05:47:38] Purchase header inserted successfully: {
    "purchase_id": 10,
    "affected_rows": 1
}
[2025-10-15 05:47:38] Starting to process purchase items: {
    "item_count": 3
}
[2025-10-15 05:47:38] Processing item 0: {
    "item_code": "SCMCL0012761",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 20,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 2400,
    "tot_bott": 2000,
    "bl": 180
}
[2025-10-15 05:47:38] Item 0 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0012761"
}
[2025-10-15 05:47:38] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:38] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Processing item 1: {
    "item_code": "SCMCL0013629",
    "item_name": "ICAP SANTRA .",
    "cases": 10,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 1200,
    "tot_bott": 1000,
    "bl": 90
}
[2025-10-15 05:47:39] Item 1 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0013629"
}
[2025-10-15 05:47:39] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:39] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Processing item 2: {
    "item_code": "SCMCL0013677",
    "item_name": "THREE X-Sangali .",
    "cases": 20,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 2400,
    "tot_bott": 2000,
    "bl": 180
}
[2025-10-15 05:47:39] Item 2 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0013677"
}
[2025-10-15 05:47:39] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:39] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Purchase items processing completed: {
    "successful_items": 3,
    "total_items": 3
}
[2025-10-15 05:47:39] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
