[2025-10-15 05:19:15] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:19:15] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 05:19:15] POST data: {
    "mode": "F",
    "voc_no": "9",
    "date": "2025-08-31",
    "auto_tp_no": "FL173-310825\/7587",
    "tp_no": "7585",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "BHARAT WINES",
    "supplier_code": "BHAR",
    "items": [
        {
            "code": "SCMPL0034977",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "171",
            "auto_batch": "BTP14-250725\/168",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "460"
        },
        {
            "code": "SCMPL0034978",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "206",
            "auto_batch": "BTP14-130825\/203",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "230"
        },
        {
            "code": "SCMPL0038199",
            "name": "ICONIQ WHITE FINEST INTERNATIONAL GRAIN WHISKY .",
            "size": "2000 ML Pet (6)",
            "bottles_per_case": "6",
            "batch_no": "202",
            "auto_batch": "BTP14-090825\/199",
            "mfg_month": "Aug-2025",
            "bl": "12",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "2300"
        },
        {
            "code": "SCMWN0041743",
            "name": "SAMSON XXX PREMIUM QUALITY FORTIFIED WINE .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "SM02",
            "auto_batch": "BTWN44-170825\/11",
            "mfg_month": "Aug-2025",
            "bl": "38.88",
            "vv": "24",
            "tot_bott": "216",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "4",
            "bottles": "24",
            "case_rate": "800.000",
            "mrp": "58"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "24900.00",
    "tamt": "24900.00"
}
[2025-10-15 05:19:15] GET data: []
[2025-10-15 05:19:15] Company ID from session: 1
[2025-10-15 05:19:15] Database connection included
[2025-10-15 05:19:15] License functions included
[2025-10-15 05:19:15] License type: FL-II
[2025-10-15 05:19:15] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:19:15] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:19:15] Purchase mode: F
[2025-10-15 05:19:15] Next voucher number: 9
[2025-10-15 05:19:15] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:19:15] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:19:16] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:19:16] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:19:16] === FORM SUBMISSION STARTED ===
[2025-10-15 05:19:16] Form data extracted: {
    "date": "2025-08-31",
    "voc_no": "9",
    "auto_tp_no": "FL173-310825\/7587",
    "tp_no": "7585",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "BHAR",
    "supplier_name": "BHARAT WINES",
    "basic_amt": "24900.00",
    "total_amt": "24900.00"
}
[2025-10-15 05:19:16] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-08-31",
        "BHAR",
        "FL173-310825\/7587",
        "9",
        "",
        "",
        "24900.00",
        "7585",
        "2025-08-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-15 05:40:50] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:40:50] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 05:40:50] POST data: []
[2025-10-15 05:40:50] GET data: []
[2025-10-15 05:40:50] Company ID from session: 1
[2025-10-15 05:40:50] Database connection included
[2025-10-15 05:40:50] License functions included
[2025-10-15 05:40:50] License type: FL-II
[2025-10-15 05:40:50] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:40:50] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:40:50] Purchase mode: F
[2025-10-15 05:40:50] Next voucher number: 9
[2025-10-15 05:40:50] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:40:50] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:40:50] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:40:50] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:43:02] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:43:02] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:43:02] POST data: []
[2025-10-15 05:43:02] GET data: []
[2025-10-15 05:43:02] Company ID from session: 1
[2025-10-15 05:43:02] Database connection included
[2025-10-15 05:43:02] License functions included
[2025-10-15 05:43:02] License type: FL-II
[2025-10-15 05:43:02] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:43:02] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:43:02] Purchase mode: F
[2025-10-15 05:43:02] Next voucher number: 9
[2025-10-15 05:43:02] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:43:02] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:43:02] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:43:02] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:43:02] Database connection closed
[2025-10-15 05:43:02] === PURCHASE SESSION ENDED ===
[2025-10-15 05:45:13] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:45:13] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:45:13] POST data: []
[2025-10-15 05:45:13] GET data: []
[2025-10-15 05:45:13] Company ID from session: 1
[2025-10-15 05:45:13] Database connection included
[2025-10-15 05:45:13] License functions included
[2025-10-15 05:45:13] License type: FL-II
[2025-10-15 05:45:13] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:45:13] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:45:13] Purchase mode: F
[2025-10-15 05:45:13] Next voucher number: 9
[2025-10-15 05:45:13] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:45:13] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:45:13] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:45:13] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:45:14] Database connection closed
[2025-10-15 05:45:14] === PURCHASE SESSION ENDED ===
[2025-10-15 05:47:15] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:47:15] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:47:15] POST data: []
[2025-10-15 05:47:15] GET data: []
[2025-10-15 05:47:15] Company ID from session: 1
[2025-10-15 05:47:15] Database connection included
[2025-10-15 05:47:15] License functions included
[2025-10-15 05:47:15] License type: FL-II
[2025-10-15 05:47:15] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:47:15] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:47:15] Purchase mode: F
[2025-10-15 05:47:15] Next voucher number: 9
[2025-10-15 05:47:15] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:47:15] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:47:15] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:47:15] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:47:15] Database connection closed
[2025-10-15 05:47:15] === PURCHASE SESSION ENDED ===
[2025-10-15 05:47:38] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 05:47:38] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "success_message": "Supplier updated successfully!"
}
[2025-10-15 05:47:38] POST data: {
    "mode": "F",
    "voc_no": "9",
    "date": "2025-07-01",
    "auto_tp_no": "CL2296-300625\/1197",
    "tp_no": "1197",
    "tp_date": "2025-06-30",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "RAJ MARKETING & CO.",
    "supplier_code": "RAJ",
    "items": [
        {
            "code": "SCMCL0012761",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "149",
            "auto_batch": "BTC27-280625\/149",
            "mfg_month": "Jun-2025",
            "bl": "180",
            "vv": "42.8",
            "tot_bott": "2000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "20",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "40"
        },
        {
            "code": "SCMCL0013629",
            "name": "ICAP SANTRA .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "87",
            "auto_batch": "BTC32-300625\/87",
            "mfg_month": "Jun-2025",
            "bl": "90",
            "vv": "35.7",
            "tot_bott": "1000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "10",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "25"
        },
        {
            "code": "SCMCL0013677",
            "name": "THREE X-Sangali .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "84",
            "auto_batch": "BTC32-280625\/84",
            "mfg_month": "Jun-2025",
            "bl": "180",
            "vv": "42.8",
            "tot_bott": "2000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "20",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "40"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "6000.00",
    "tamt": "6000.00"
}
[2025-10-15 05:47:38] GET data: []
[2025-10-15 05:47:38] Company ID from session: 1
[2025-10-15 05:47:38] Database connection included
[2025-10-15 05:47:38] License functions included
[2025-10-15 05:47:38] License type: FL-II
[2025-10-15 05:47:38] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 05:47:38] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 05:47:38] Purchase mode: F
[2025-10-15 05:47:38] Next voucher number: 9
[2025-10-15 05:47:38] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 05:47:38] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 05:47:38] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 05:47:38] Suppliers fetched: {
    "count": 36
}
[2025-10-15 05:47:38] === FORM SUBMISSION STARTED ===
[2025-10-15 05:47:38] Form data extracted: {
    "date": "2025-07-01",
    "voc_no": "9",
    "auto_tp_no": "CL2296-300625\/1197",
    "tp_no": "1197",
    "tp_date": "2025-06-30",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "RAJ",
    "supplier_name": "RAJ MARKETING & CO.",
    "basic_amt": "6000.00",
    "total_amt": "6000.00"
}
[2025-10-15 05:47:38] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-07-01",
        "RAJ",
        "CL2296-300625\/1197",
        "9",
        "",
        "",
        "6000.00",
        "1197",
        "2025-06-30",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-15 05:47:38] Purchase header inserted successfully: {
    "purchase_id": 10,
    "affected_rows": 1
}
[2025-10-15 05:47:38] Starting to process purchase items: {
    "item_count": 3
}
[2025-10-15 05:47:38] Processing item 0: {
    "item_code": "SCMCL0012761",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 20,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 2400,
    "tot_bott": 2000,
    "bl": 180
}
[2025-10-15 05:47:38] Item 0 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0012761"
}
[2025-10-15 05:47:38] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:38] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Processing item 1: {
    "item_code": "SCMCL0013629",
    "item_name": "ICAP SANTRA .",
    "cases": 10,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 1200,
    "tot_bott": 1000,
    "bl": 90
}
[2025-10-15 05:47:39] Item 1 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0013629"
}
[2025-10-15 05:47:39] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:39] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Processing item 2: {
    "item_code": "SCMCL0013677",
    "item_name": "THREE X-Sangali .",
    "cases": 20,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 2400,
    "tot_bott": 2000,
    "bl": 180
}
[2025-10-15 05:47:39] Item 2 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0013677"
}
[2025-10-15 05:47:39] Checking if month is archived: {
    "company_id": 1,
    "month": "7",
    "year": "2025",
    "archive_table": "tbldailystock_1_07_25"
}
[2025-10-15 05:47:39] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_07_25'"
}
[2025-10-15 05:47:39] Purchase items processing completed: {
    "successful_items": 3,
    "total_items": 3
}
[2025-10-15 05:47:39] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-15 16:29:35] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 16:29:35] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 16:29:35] POST data: []
[2025-10-15 16:29:35] GET data: {
    "mode": "F"
}
[2025-10-15 16:29:35] Company ID from session: 1
[2025-10-15 16:29:35] Database connection included
[2025-10-15 16:29:35] License functions included
[2025-10-15 16:29:35] License type: FL-II
[2025-10-15 16:29:35] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 16:29:35] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 16:29:35] Purchase mode: F
[2025-10-15 16:29:35] Next voucher number: 10
[2025-10-15 16:29:35] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 16:29:35] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 16:29:35] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 16:29:35] Suppliers fetched: {
    "count": 36
}
[2025-10-15 16:29:35] Database connection closed
[2025-10-15 16:29:35] === PURCHASE SESSION ENDED ===
[2025-10-15 16:30:36] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 16:30:36] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 16:30:36] POST data: []
[2025-10-15 16:30:36] GET data: {
    "mode": "F"
}
[2025-10-15 16:30:36] Company ID from session: 1
[2025-10-15 16:30:36] Database connection included
[2025-10-15 16:30:36] License functions included
[2025-10-15 16:30:36] License type: FL-II
[2025-10-15 16:30:36] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 16:30:36] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 16:30:36] Purchase mode: F
[2025-10-15 16:30:36] Next voucher number: 10
[2025-10-15 16:30:36] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 16:30:36] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 16:30:36] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 16:30:36] Suppliers fetched: {
    "count": 36
}
[2025-10-15 16:30:36] Database connection closed
[2025-10-15 16:30:36] === PURCHASE SESSION ENDED ===
[2025-10-15 16:42:39] === NEW PURCHASE SESSION STARTED ===
[2025-10-15 16:42:39] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-15 16:42:39] POST data: []
[2025-10-15 16:42:39] GET data: {
    "mode": "F"
}
[2025-10-15 16:42:39] Company ID from session: 1
[2025-10-15 16:42:39] Database connection included
[2025-10-15 16:42:39] License functions included
[2025-10-15 16:42:39] License type: FL-II
[2025-10-15 16:42:39] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-15 16:42:39] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-15 16:42:39] Purchase mode: F
[2025-10-15 16:42:39] Next voucher number: 10
[2025-10-15 16:42:39] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-15 16:42:39] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-15 16:42:39] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-15 16:42:39] Suppliers fetched: {
    "count": 36
}
[2025-10-15 16:42:40] Database connection closed
[2025-10-15 16:42:40] === PURCHASE SESSION ENDED ===
[2025-10-16 05:06:35] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 05:06:35] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 05:06:35] POST data: []
[2025-10-16 05:06:35] GET data: []
[2025-10-16 05:06:35] Company ID from session: 1
[2025-10-16 05:06:35] Database connection included
[2025-10-16 05:06:35] License functions included
[2025-10-16 05:06:35] License type: FL-II
[2025-10-16 05:06:35] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 05:06:35] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 05:06:35] Purchase mode: F
[2025-10-16 05:06:35] Next voucher number: 10
[2025-10-16 05:06:35] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 05:06:35] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 05:06:35] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 05:06:35] Suppliers fetched: {
    "count": 36
}
[2025-10-16 05:06:35] Database connection closed
[2025-10-16 05:06:35] === PURCHASE SESSION ENDED ===
[2025-10-16 06:25:56] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 06:25:56] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 06:25:56] POST data: []
[2025-10-16 06:25:56] GET data: []
[2025-10-16 06:25:56] Company ID from session: 1
[2025-10-16 06:25:56] Database connection included
[2025-10-16 06:25:56] License functions included
[2025-10-16 06:25:56] License type: FL-II
[2025-10-16 06:25:56] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 06:25:56] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 06:25:56] Purchase mode: F
[2025-10-16 06:25:56] Next voucher number: 10
[2025-10-16 06:25:56] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 06:25:56] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 06:25:56] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 06:25:56] Suppliers fetched: {
    "count": 36
}
[2025-10-16 06:25:56] Database connection closed
[2025-10-16 06:25:56] === PURCHASE SESSION ENDED ===
[2025-10-16 06:26:33] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 06:26:33] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 06:26:33] POST data: []
[2025-10-16 06:26:33] GET data: []
[2025-10-16 06:26:33] Company ID from session: 1
[2025-10-16 06:26:33] Database connection included
[2025-10-16 06:26:33] License functions included
[2025-10-16 06:26:33] License type: FL-II
[2025-10-16 06:26:33] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 06:26:33] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 06:26:33] Purchase mode: F
[2025-10-16 06:26:33] Next voucher number: 10
[2025-10-16 06:26:33] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 06:26:33] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 06:26:33] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 06:26:33] Suppliers fetched: {
    "count": 36
}
[2025-10-16 06:26:33] Database connection closed
[2025-10-16 06:26:33] === PURCHASE SESSION ENDED ===
[2025-10-16 06:26:57] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 06:26:57] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 06:26:57] POST data: {
    "mode": "F",
    "voc_no": "10",
    "date": "2025-05-15",
    "auto_tp_no": "CL2296-150525\/574",
    "tp_no": "574",
    "tp_date": "2025-05-15",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "RAJ MARKETING & CO.",
    "supplier_code": "RAJ",
    "items": [
        {
            "code": "SCMCL0012761",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "45",
            "auto_batch": "BTC27-050525\/45",
            "mfg_month": "May-2025",
            "bl": "180",
            "vv": "42.8",
            "tot_bott": "2000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "20",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0012763",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "45",
            "auto_batch": "BTC27-050525\/45",
            "mfg_month": "May-2025",
            "bl": "43.2",
            "vv": "42.8",
            "tot_bott": "240",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "70"
        },
        {
            "code": "SCMCL0012765",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "750 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "6",
            "auto_batch": "BTC27-050425\/6",
            "mfg_month": "Apr-2025",
            "bl": "18",
            "vv": "42.8",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "290"
        },
        {
            "code": "SCMCL0013629",
            "name": "ICAP SANTRA .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "17",
            "auto_batch": "BTC32-170425\/17",
            "mfg_month": "Apr-2025",
            "bl": "45",
            "vv": "35.7",
            "tot_bott": "500",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "25"
        },
        {
            "code": "SCMCL0013677",
            "name": "THREE X-Sangali .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "28",
            "auto_batch": "BTC32-300425\/28",
            "mfg_month": "May-2025",
            "bl": "225",
            "vv": "42.8",
            "tot_bott": "2500",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "25",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0013679",
            "name": "THREE X-Sangali .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "20",
            "auto_batch": "BTC32-210425\/20",
            "mfg_month": "Apr-2025",
            "bl": "43.2",
            "vv": "42.8",
            "tot_bott": "240",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "70"
        },
        {
            "code": "SCMCL0013681",
            "name": "THREE X-Sangali .",
            "size": "750 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "250",
            "auto_batch": "BTC32-310325\/250",
            "mfg_month": "Mar-2025",
            "bl": "18",
            "vv": "42.8",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "290"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "7680.00",
    "tamt": "7680.00"
}
[2025-10-16 06:26:57] GET data: []
[2025-10-16 06:26:57] Company ID from session: 1
[2025-10-16 06:26:57] Database connection included
[2025-10-16 06:26:57] License functions included
[2025-10-16 06:26:57] License type: FL-II
[2025-10-16 06:26:57] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 06:26:57] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 06:26:57] Purchase mode: F
[2025-10-16 06:26:57] Next voucher number: 10
[2025-10-16 06:26:57] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 06:26:57] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 06:26:57] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 06:26:57] Suppliers fetched: {
    "count": 36
}
[2025-10-16 06:26:57] === FORM SUBMISSION STARTED ===
[2025-10-16 06:26:57] Form data extracted: {
    "date": "2025-05-15",
    "voc_no": "10",
    "auto_tp_no": "CL2296-150525\/574",
    "tp_no": "574",
    "tp_date": "2025-05-15",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "RAJ",
    "supplier_name": "RAJ MARKETING & CO.",
    "basic_amt": "7680.00",
    "total_amt": "7680.00"
}
[2025-10-16 06:26:57] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-05-15",
        "RAJ",
        "CL2296-150525\/574",
        "10",
        "",
        "",
        "7680.00",
        "574",
        "2025-05-15",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-16 06:26:57] Purchase header inserted successfully: {
    "purchase_id": 11,
    "affected_rows": 1
}
[2025-10-16 06:26:57] Starting to process purchase items: {
    "item_count": 7
}
[2025-10-16 06:26:57] Processing item 0: {
    "item_code": "SCMCL0012761",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 20,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 2400,
    "tot_bott": 2000,
    "bl": 180
}
[2025-10-16 06:26:57] Item 0 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0012761"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 1: {
    "item_code": "SCMCL0012763",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 240,
    "bl": 43.2
}
[2025-10-16 06:26:57] Item 1 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0012763"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 2: {
    "item_code": "SCMCL0012765",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 240,
    "tot_bott": 24,
    "bl": 18
}
[2025-10-16 06:26:57] Item 2 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0012765"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 3: {
    "item_code": "SCMCL0013629",
    "item_name": "ICAP SANTRA .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 500,
    "bl": 45
}
[2025-10-16 06:26:57] Item 3 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0013629"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 4: {
    "item_code": "SCMCL0013677",
    "item_name": "THREE X-Sangali .",
    "cases": 25,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 3000,
    "tot_bott": 2500,
    "bl": 225
}
[2025-10-16 06:26:57] Item 4 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0013677"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 5: {
    "item_code": "SCMCL0013679",
    "item_name": "THREE X-Sangali .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 240,
    "bl": 43.2
}
[2025-10-16 06:26:57] Item 5 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0013679"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Processing item 6: {
    "item_code": "SCMCL0013681",
    "item_name": "THREE X-Sangali .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 240,
    "tot_bott": 24,
    "bl": 18
}
[2025-10-16 06:26:57] Item 6 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMCL0013681"
}
[2025-10-16 06:26:57] Checking if month is archived: {
    "company_id": 1,
    "month": "5",
    "year": "2025",
    "archive_table": "tbldailystock_1_05_25"
}
[2025-10-16 06:26:57] Month archive check result: {
    "table_exists": true,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_05_25'"
}
[2025-10-16 06:26:57] Purchase items processing completed: {
    "successful_items": 7,
    "total_items": 7
}
[2025-10-16 06:26:57] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-16 06:42:46] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 06:42:46] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 06:42:46] POST data: []
[2025-10-16 06:42:46] GET data: []
[2025-10-16 06:42:46] Company ID from session: 1
[2025-10-16 06:42:46] Database connection included
[2025-10-16 06:42:46] License functions included
[2025-10-16 06:42:46] License type: FL-II
[2025-10-16 06:42:46] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 06:42:46] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 06:42:46] Purchase mode: F
[2025-10-16 06:42:46] Next voucher number: 11
[2025-10-16 06:42:46] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 06:42:46] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 06:42:46] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 06:42:46] Suppliers fetched: {
    "count": 36
}
[2025-10-16 06:42:46] Database connection closed
[2025-10-16 06:42:46] === PURCHASE SESSION ENDED ===
[2025-10-16 07:04:33] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 07:04:33] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 07:04:33] POST data: []
[2025-10-16 07:04:33] GET data: []
[2025-10-16 07:04:33] Company ID from session: 1
[2025-10-16 07:04:33] Database connection included
[2025-10-16 07:04:33] License functions included
[2025-10-16 07:04:33] License type: FL-II
[2025-10-16 07:04:33] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 07:04:33] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 07:04:33] Purchase mode: F
[2025-10-16 07:04:33] Next voucher number: 11
[2025-10-16 07:04:33] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 07:04:33] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 07:04:33] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 07:04:33] Suppliers fetched: {
    "count": 36
}
[2025-10-16 07:04:33] Database connection closed
[2025-10-16 07:04:33] === PURCHASE SESSION ENDED ===
[2025-10-16 07:05:23] === NEW PURCHASE SESSION STARTED ===
[2025-10-16 07:05:23] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-16 07:05:23] POST data: []
[2025-10-16 07:05:23] GET data: []
[2025-10-16 07:05:23] Company ID from session: 1
[2025-10-16 07:05:23] Database connection included
[2025-10-16 07:05:23] License functions included
[2025-10-16 07:05:23] License type: FL-II
[2025-10-16 07:05:23] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-16 07:05:23] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-16 07:05:23] Purchase mode: F
[2025-10-16 07:05:23] Next voucher number: 11
[2025-10-16 07:05:23] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-16 07:05:23] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-16 07:05:23] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-16 07:05:23] Suppliers fetched: {
    "count": 36
}
[2025-10-17 06:15:45] === NEW PURCHASE SESSION STARTED ===
[2025-10-17 06:15:45] Session data: {
    "user_id": "2",
    "username": "Digvijay",
    "CompID": 2,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Digvijay"
}
[2025-10-17 06:15:45] POST data: []
[2025-10-17 06:15:45] GET data: []
[2025-10-17 06:15:45] Company ID from session: 2
[2025-10-17 06:15:45] Database connection included
[2025-10-17 06:15:45] License functions included
[2025-10-17 06:15:45] License type: FLBR-II
[2025-10-17 06:15:45] Available classes: [
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-17 06:15:45] Allowed class SGROUP values: [
    "V",
    "F",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-17 06:15:45] Purchase mode: F
[2025-10-17 06:15:45] Next voucher number: 1
[2025-10-17 06:15:45] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-17 06:15:45] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "V",
        "F",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssss"
}
[2025-10-17 06:15:45] Items fetched from database: {
    "count": 821,
    "license_filter_applied": true
}
[2025-10-17 06:15:45] Suppliers fetched: {
    "count": 36
}
[2025-10-17 06:15:45] Database connection closed
[2025-10-17 06:15:45] === PURCHASE SESSION ENDED ===
[2025-10-20 09:36:22] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 09:36:22] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760944709
}
[2025-10-20 09:36:22] POST data: []
[2025-10-20 09:36:22] GET data: {
    "mode": "F"
}
[2025-10-20 09:36:22] Company ID from session: 1
[2025-10-20 09:36:22] Database connection included
[2025-10-20 09:36:22] License functions included
[2025-10-20 09:36:22] License type: FL-II
[2025-10-20 09:36:22] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 09:36:22] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 09:36:22] Purchase mode: F
[2025-10-20 09:36:22] Next voucher number: 11
[2025-10-20 09:36:22] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 09:36:22] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 09:36:22] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 09:36:22] Suppliers fetched: {
    "count": 36
}
[2025-10-20 09:36:22] Database connection closed
[2025-10-20 09:36:22] === PURCHASE SESSION ENDED ===
[2025-10-20 09:38:18] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 09:38:18] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760944709
}
[2025-10-20 09:38:18] POST data: {
    "mode": "F",
    "voc_no": "11",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "EMPIRE SPIRT INDIA",
    "supplier_code": "",
    "items": [
        {
            "code": "SCMIT0020165",
            "name": "ABSOLUTE VODKA .",
            "size": "200 ML (24)",
            "bottles_per_case": "24",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "4.80",
            "vv": "0",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "100.00",
    "tamt": "100.00"
}
[2025-10-20 09:38:18] GET data: {
    "mode": "F"
}
[2025-10-20 09:38:18] Company ID from session: 1
[2025-10-20 09:38:18] Database connection included
[2025-10-20 09:38:18] License functions included
[2025-10-20 09:38:18] License type: FL-II
[2025-10-20 09:38:18] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 09:38:18] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 09:38:18] Purchase mode: F
[2025-10-20 09:38:18] Next voucher number: 11
[2025-10-20 09:38:18] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 09:38:18] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 09:38:18] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 09:38:18] Suppliers fetched: {
    "count": 36
}
[2025-10-20 09:38:18] === FORM SUBMISSION STARTED ===
[2025-10-20 09:38:18] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "11",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "",
    "supplier_name": "EMPIRE SPIRT INDIA",
    "basic_amt": "100.00",
    "total_amt": "100.00"
}
[2025-10-20 09:38:18] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "",
        "FL1305-310825\/7654",
        "11",
        "",
        "",
        "100.00",
        "7654",
        "",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 09:38:18] Purchase header inserted successfully: {
    "purchase_id": 12,
    "affected_rows": 1
}
[2025-10-20 09:38:18] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 09:38:18] Processing item 0: {
    "item_code": "SCMIT0020165",
    "item_name": "ABSOLUTE VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 4.8
}
[2025-10-20 09:38:18] Item 0 inserted successfully: {
    "purchase_id": 12,
    "item_code": "SCMIT0020165"
}
[2025-10-20 09:38:18] Checking if month is archived: {
    "company_id": 1,
    "month": "10",
    "year": "2025",
    "archive_table": "tbldailystock_1_10_25"
}
[2025-10-20 09:38:18] Month archive check result: {
    "table_exists": false,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_10_25'"
}
[2025-10-20 09:38:18] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 09:38:18] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 09:38:26] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 09:38:26] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760944709
}
[2025-10-20 09:38:26] POST data: []
[2025-10-20 09:38:26] GET data: {
    "mode": "F"
}
[2025-10-20 09:38:26] Company ID from session: 1
[2025-10-20 09:38:26] Database connection included
[2025-10-20 09:38:26] License functions included
[2025-10-20 09:38:26] License type: FL-II
[2025-10-20 09:38:26] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 09:38:26] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 09:38:26] Purchase mode: F
[2025-10-20 09:38:26] Next voucher number: 12
[2025-10-20 09:38:26] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 09:38:26] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 09:38:26] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 09:38:26] Suppliers fetched: {
    "count": 36
}
[2025-10-20 09:38:26] Database connection closed
[2025-10-20 09:38:26] === PURCHASE SESSION ENDED ===
[2025-10-20 09:51:11] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 09:51:11] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760946332,
    "sale_quantities": []
}
[2025-10-20 09:51:11] POST data: []
[2025-10-20 09:51:11] GET data: []
[2025-10-20 09:51:11] Company ID from session: 1
[2025-10-20 09:51:11] Database connection included
[2025-10-20 09:51:11] License functions included
[2025-10-20 09:51:11] License type: FL-II
[2025-10-20 09:51:11] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 09:51:11] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 09:51:11] Purchase mode: F
[2025-10-20 09:51:11] Next voucher number: 12
[2025-10-20 09:51:11] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 09:51:11] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 09:51:11] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 09:51:11] Suppliers fetched: {
    "count": 36
}
[2025-10-20 09:51:11] Database connection closed
[2025-10-20 09:51:11] === PURCHASE SESSION ENDED ===
[2025-10-20 09:53:55] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 09:53:55] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760946332,
    "sale_quantities": []
}
[2025-10-20 09:53:55] POST data: {
    "mode": "F",
    "voc_no": "12",
    "date": "2025-10-17",
    "auto_tp_no": "FL170-280825\/15670",
    "tp_no": "15670",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": {
        "4": {
            "code": "SCMLS0030593",
            "name": "ABSOLUT VODKA RASPBERRI .",
            "size": "200 ML (24)",
            "bottles_per_case": "24",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "4.80",
            "vv": "0",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "0"
        }
    },
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "120.00",
    "tamt": "120.00"
}
[2025-10-20 09:53:55] GET data: []
[2025-10-20 09:53:55] Company ID from session: 1
[2025-10-20 09:53:55] Database connection included
[2025-10-20 09:53:55] License functions included
[2025-10-20 09:53:55] License type: FL-II
[2025-10-20 09:53:55] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 09:53:55] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 09:53:55] Purchase mode: F
[2025-10-20 09:53:55] Next voucher number: 12
[2025-10-20 09:53:55] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 09:53:55] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 09:53:55] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 09:53:55] Suppliers fetched: {
    "count": 36
}
[2025-10-20 09:53:55] === FORM SUBMISSION STARTED ===
[2025-10-20 09:53:55] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "12",
    "auto_tp_no": "FL170-280825\/15670",
    "tp_no": "15670",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "120.00",
    "total_amt": "120.00"
}
[2025-10-20 09:53:55] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "AMAR",
        "FL170-280825\/15670",
        "12",
        "",
        "",
        "120.00",
        "15670",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 09:53:55] Purchase header inserted successfully: {
    "purchase_id": 13,
    "affected_rows": 1
}
[2025-10-20 09:53:55] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 09:53:55] Processing item 4: {
    "item_code": "SCMLS0030593",
    "item_name": "ABSOLUT VODKA RASPBERRI .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 4.8
}
[2025-10-20 09:53:55] Item 4 inserted successfully: {
    "purchase_id": 13,
    "item_code": "SCMLS0030593"
}
[2025-10-20 09:53:55] Checking if month is archived: {
    "company_id": 1,
    "month": "10",
    "year": "2025",
    "archive_table": "tbldailystock_1_10_25"
}
[2025-10-20 09:53:55] Month archive check result: {
    "table_exists": false,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_10_25'"
}
[2025-10-20 09:53:55] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 09:53:55] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 10:08:09] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 10:08:09] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760947607
}
[2025-10-20 10:08:09] POST data: []
[2025-10-20 10:08:09] GET data: []
[2025-10-20 10:08:09] Company ID from session: 1
[2025-10-20 10:08:09] Database connection included
[2025-10-20 10:08:09] License functions included
[2025-10-20 10:08:09] License type: FL-II
[2025-10-20 10:08:09] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 10:08:09] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 10:08:09] Purchase mode: F
[2025-10-20 10:08:09] Next voucher number: 13
[2025-10-20 10:08:09] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 10:08:09] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 10:08:09] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 10:08:09] Suppliers fetched: {
    "count": 36
}
[2025-10-20 10:08:09] Database connection closed
[2025-10-20 10:08:09] === PURCHASE SESSION ENDED ===
[2025-10-20 10:10:00] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 10:10:00] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760947607
}
[2025-10-20 10:10:00] POST data: {
    "mode": "F",
    "voc_no": "13",
    "date": "2025-10-18",
    "auto_tp_no": "FL1305-180725\/5746",
    "tp_no": "5746",
    "tp_date": "2025-10-18",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "MILLENINUM SPIRITS",
    "supplier_code": "MILL",
    "items": [
        {
            "code": "SCMPL0009679",
            "name": "Bacardi Black Rum .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "9.00",
            "vv": "0",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "100.00",
    "tamt": "100.00"
}
[2025-10-20 10:10:00] GET data: []
[2025-10-20 10:10:00] Company ID from session: 1
[2025-10-20 10:10:00] Database connection included
[2025-10-20 10:10:00] License functions included
[2025-10-20 10:10:00] License type: FL-II
[2025-10-20 10:10:00] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 10:10:00] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 10:10:00] Purchase mode: F
[2025-10-20 10:10:00] Next voucher number: 13
[2025-10-20 10:10:00] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 10:10:00] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 10:10:00] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 10:10:00] Suppliers fetched: {
    "count": 36
}
[2025-10-20 10:10:00] === FORM SUBMISSION STARTED ===
[2025-10-20 10:10:00] Form data extracted: {
    "date": "2025-10-18",
    "voc_no": "13",
    "auto_tp_no": "FL1305-180725\/5746",
    "tp_no": "5746",
    "tp_date": "2025-10-18",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "MILL",
    "supplier_name": "MILLENINUM SPIRITS",
    "basic_amt": "100.00",
    "total_amt": "100.00"
}
[2025-10-20 10:10:00] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-18",
        "MILL",
        "FL1305-180725\/5746",
        "13",
        "",
        "",
        "100.00",
        "5746",
        "2025-10-18",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 10:10:00] Purchase header inserted successfully: {
    "purchase_id": 14,
    "affected_rows": 1
}
[2025-10-20 10:10:00] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 10:10:00] Processing item 0: {
    "item_code": "SCMPL0009679",
    "item_name": "Bacardi Black Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-20 10:10:00] Item 0 inserted successfully: {
    "purchase_id": 14,
    "item_code": "SCMPL0009679"
}
[2025-10-20 10:10:00] Checking if month is archived: {
    "company_id": 1,
    "month": "10",
    "year": "2025",
    "archive_table": "tbldailystock_1_10_25"
}
[2025-10-20 10:10:00] Month archive check result: {
    "table_exists": false,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_10_25'"
}
[2025-10-20 10:10:00] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 10:10:00] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 10:42:04] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 10:42:04] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 10:42:04] POST data: []
[2025-10-20 10:42:04] GET data: []
[2025-10-20 10:42:04] Company ID from session: 1
[2025-10-20 10:42:04] Database connection included
[2025-10-20 10:42:04] License functions included
[2025-10-20 10:42:04] License type: FL-II
[2025-10-20 10:42:04] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 10:42:04] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 10:42:04] Purchase mode: F
[2025-10-20 10:42:04] Next voucher number: 1
[2025-10-20 10:42:04] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 10:42:04] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 10:42:04] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 10:42:04] Suppliers fetched: {
    "count": 36
}
[2025-10-20 10:42:04] Database connection closed
[2025-10-20 10:42:04] === PURCHASE SESSION ENDED ===
[2025-10-20 10:56:59] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 10:56:59] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 10:56:59] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019030",
            "name": "20-20 Fine Whisky .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "7.50",
            "vv": "0",
            "tot_bott": "10",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "10",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "8000.00",
    "tamt": "8000.00"
}
[2025-10-20 10:56:59] GET data: []
[2025-10-20 10:56:59] Company ID from session: 1
[2025-10-20 10:56:59] Database connection included
[2025-10-20 10:56:59] License functions included
[2025-10-20 10:57:00] License type: FL-II
[2025-10-20 10:57:00] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 10:57:00] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 10:57:00] Purchase mode: F
[2025-10-20 10:57:00] Next voucher number: 1
[2025-10-20 10:57:00] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 10:57:00] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 10:57:00] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 10:57:00] Suppliers fetched: {
    "count": 36
}
[2025-10-20 10:57:00] === FORM SUBMISSION STARTED ===
[2025-10-20 10:57:00] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ABHI",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "basic_amt": "8000.00",
    "total_amt": "8000.00"
}
[2025-10-20 10:57:00] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ABHI",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "8000.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 10:57:00] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-20 10:57:00] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 10:57:00] Processing item 0: {
    "item_code": "SCMPL0019030",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 10,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 8000,
    "tot_bott": 10,
    "bl": 7.5
}
[2025-10-20 10:57:00] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0019030"
}
[2025-10-20 10:57:00] Checking if month is archived: {
    "company_id": 1,
    "month": "10",
    "year": "2025",
    "archive_table": "tbldailystock_1_10_25"
}
[2025-10-20 10:57:00] Month archive check result: {
    "table_exists": false,
    "query": "SELECT COUNT(*) as count FROM information_schema.tables \n                           WHERE table_schema = DATABASE() \n                           AND table_name = 'tbldailystock_1_10_25'"
}
[2025-10-20 10:57:00] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 10:57:00] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 11:16:32] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 11:16:32] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 11:16:32] POST data: []
[2025-10-20 11:16:32] GET data: {
    "mode": "F"
}
[2025-10-20 11:16:32] Company ID from session: 1
[2025-10-20 11:16:32] Database connection included
[2025-10-20 11:16:32] License functions included
[2025-10-20 11:16:32] License type: FL-II
[2025-10-20 11:16:32] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 11:16:32] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 11:16:32] Purchase mode: F
[2025-10-20 11:16:32] Next voucher number: 1
[2025-10-20 11:16:32] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 11:16:32] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 11:16:32] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 11:16:32] Suppliers fetched: {
    "count": 36
}
[2025-10-20 11:16:32] Database connection closed
[2025-10-20 11:16:32] === PURCHASE SESSION ENDED ===
[2025-10-20 11:35:46] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 11:35:46] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 11:35:46] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019030",
            "name": "20-20 Fine Whisky .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "7.50",
            "vv": "0",
            "tot_bott": "10",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "",
            "bottles": "10",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "8000.00",
    "tamt": "8000.00"
}
[2025-10-20 11:35:46] GET data: {
    "mode": "F"
}
[2025-10-20 11:35:46] Company ID from session: 1
[2025-10-20 11:35:46] Database connection included
[2025-10-20 11:35:46] License functions included
[2025-10-20 11:35:46] License type: FL-II
[2025-10-20 11:35:46] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 11:35:46] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 11:35:46] Purchase mode: F
[2025-10-20 11:35:46] Next voucher number: 1
[2025-10-20 11:35:46] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 11:35:46] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 11:35:46] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 11:35:46] Suppliers fetched: {
    "count": 36
}
[2025-10-20 11:35:46] === FORM SUBMISSION STARTED ===
[2025-10-20 11:35:46] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ABHI",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "basic_amt": "8000.00",
    "total_amt": "8000.00"
}
[2025-10-20 11:35:46] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ABHI",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "8000.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 11:35:46] Purchase header inserted successfully: {
    "purchase_id": 2,
    "affected_rows": 1
}
[2025-10-20 11:35:46] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 11:35:46] Processing item 0: {
    "item_code": "SCMPL0019030",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 10,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 8000,
    "tot_bott": 10,
    "bl": 7.5
}
[2025-10-20 11:35:46] Item 0 inserted successfully: {
    "purchase_id": 2,
    "item_code": "SCMPL0019030"
}
[2025-10-20 13:30:28] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:30:28] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:30:28] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019030",
            "name": "20-20 Fine Whisky .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "7.50",
            "vv": "0",
            "tot_bott": "10",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "",
            "bottles": "10",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "8000.00",
    "tamt": "8000.00"
}
[2025-10-20 13:30:28] GET data: {
    "mode": "F"
}
[2025-10-20 13:30:28] Company ID from session: 1
[2025-10-20 13:30:52] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:30:52] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:30:52] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019030",
            "name": "20-20 Fine Whisky .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "7.50",
            "vv": "0",
            "tot_bott": "10",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "",
            "bottles": "10",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "8000.00",
    "tamt": "8000.00"
}
[2025-10-20 13:30:52] GET data: {
    "mode": "F"
}
[2025-10-20 13:30:52] Company ID from session: 1
[2025-10-20 13:30:52] Database connection included
[2025-10-20 13:30:52] License functions included
[2025-10-20 13:30:52] License type: FL-II
[2025-10-20 13:30:52] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 13:30:52] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 13:30:52] Purchase mode: F
[2025-10-20 13:30:52] Next voucher number: 2
[2025-10-20 13:30:52] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 13:30:52] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 13:30:52] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 13:30:52] Suppliers fetched: {
    "count": 36
}
[2025-10-20 13:30:52] === FORM SUBMISSION STARTED ===
[2025-10-20 13:30:52] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ABHI",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "basic_amt": "8000.00",
    "total_amt": "8000.00"
}
[2025-10-20 13:30:52] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ABHI",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "8000.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 13:30:52] Purchase header inserted successfully: {
    "purchase_id": 3,
    "affected_rows": 1
}
[2025-10-20 13:30:52] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 13:30:52] Processing item 0: {
    "item_code": "SCMPL0019030",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 10,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 8000,
    "tot_bott": 10,
    "bl": 7.5
}
[2025-10-20 13:30:52] Item 0 inserted successfully: {
    "purchase_id": 3,
    "item_code": "SCMPL0019030"
}
[2025-10-20 13:30:53] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 13:30:53] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 13:45:20] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:45:20] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:45:20] POST data: []
[2025-10-20 13:45:20] GET data: {
    "mode": "F"
}
[2025-10-20 13:45:20] Company ID from session: 1
[2025-10-20 13:45:20] Database connection included
[2025-10-20 13:45:20] License functions included
[2025-10-20 13:45:20] License type: FL-II
[2025-10-20 13:45:20] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 13:45:20] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 13:45:20] Purchase mode: F
[2025-10-20 13:45:20] Next voucher number: 1
[2025-10-20 13:45:20] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 13:45:20] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 13:45:20] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 13:45:20] Suppliers fetched: {
    "count": 36
}
[2025-10-20 13:45:20] Database connection closed
[2025-10-20 13:45:20] === PURCHASE SESSION ENDED ===
[2025-10-20 13:45:59] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:45:59] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:45:59] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ASIAN TRADERS",
    "supplier_code": "ASIA",
    "items": [
        {
            "code": "SCMPL0019030",
            "name": "20-20 Fine Whisky .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "0.75",
            "vv": "0",
            "tot_bott": "1",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "800.00",
    "tamt": "800.00"
}
[2025-10-20 13:45:59] GET data: {
    "mode": "F"
}
[2025-10-20 13:45:59] Company ID from session: 1
[2025-10-20 13:45:59] Database connection included
[2025-10-20 13:45:59] License functions included
[2025-10-20 13:45:59] License type: FL-II
[2025-10-20 13:45:59] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 13:45:59] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 13:45:59] Purchase mode: F
[2025-10-20 13:45:59] Next voucher number: 1
[2025-10-20 13:45:59] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 13:45:59] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 13:45:59] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 13:45:59] Suppliers fetched: {
    "count": 36
}
[2025-10-20 13:45:59] === FORM SUBMISSION STARTED ===
[2025-10-20 13:45:59] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ASIA",
    "supplier_name": "ASIAN TRADERS",
    "basic_amt": "800.00",
    "total_amt": "800.00"
}
[2025-10-20 13:45:59] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ASIA",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "800.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 13:45:59] Purchase header inserted successfully: {
    "purchase_id": 4,
    "affected_rows": 1
}
[2025-10-20 13:45:59] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 13:45:59] Processing item 0: {
    "item_code": "SCMPL0019030",
    "item_name": "20-20 Fine Whisky .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 1,
    "bl": 0.75
}
[2025-10-20 13:45:59] Item 0 inserted successfully: {
    "purchase_id": 4,
    "item_code": "SCMPL0019030"
}
[2025-10-20 13:45:59] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 13:45:59] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 13:47:45] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:47:45] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:47:45] POST data: []
[2025-10-20 13:47:45] GET data: {
    "mode": "F"
}
[2025-10-20 13:47:45] Company ID from session: 1
[2025-10-20 13:47:45] Database connection included
[2025-10-20 13:47:45] License functions included
[2025-10-20 13:47:45] License type: FL-II
[2025-10-20 13:47:45] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 13:47:45] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 13:47:45] Purchase mode: F
[2025-10-20 13:47:45] Next voucher number: 1
[2025-10-20 13:47:45] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 13:47:45] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 13:47:45] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 13:47:45] Suppliers fetched: {
    "count": 36
}
[2025-10-20 13:47:45] Database connection closed
[2025-10-20 13:47:45] === PURCHASE SESSION ENDED ===
[2025-10-20 13:48:41] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 13:48:41] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 13:48:41] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ANKUSH TRADERS",
    "supplier_code": "ANKU",
    "items": [
        {
            "code": "SCMPL0019029",
            "name": "20-20 Fine Whisky .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "0.90",
            "vv": "0",
            "tot_bott": "5",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "5",
            "case_rate": "120.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "600.00",
    "tamt": "600.00"
}
[2025-10-20 13:48:41] GET data: {
    "mode": "F"
}
[2025-10-20 13:48:41] Company ID from session: 1
[2025-10-20 13:48:41] Database connection included
[2025-10-20 13:48:41] License functions included
[2025-10-20 13:48:41] License type: FL-II
[2025-10-20 13:48:41] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 13:48:41] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 13:48:41] Purchase mode: F
[2025-10-20 13:48:41] Next voucher number: 1
[2025-10-20 13:48:41] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 13:48:41] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 13:48:42] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 13:48:42] Suppliers fetched: {
    "count": 36
}
[2025-10-20 13:48:42] === FORM SUBMISSION STARTED ===
[2025-10-20 13:48:42] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ANKU",
    "supplier_name": "ANKUSH TRADERS",
    "basic_amt": "600.00",
    "total_amt": "600.00"
}
[2025-10-20 13:48:42] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ANKU",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "600.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 13:48:42] Purchase header inserted successfully: {
    "purchase_id": 5,
    "affected_rows": 1
}
[2025-10-20 13:48:42] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 13:48:42] Processing item 0: {
    "item_code": "SCMPL0019029",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 5,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 5,
    "bl": 0.9
}
[2025-10-20 13:48:42] Item 0 inserted successfully: {
    "purchase_id": 5,
    "item_code": "SCMPL0019029"
}
[2025-10-20 13:48:42] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 13:48:42] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 14:07:15] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:07:15] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760961153
}
[2025-10-20 14:07:15] POST data: []
[2025-10-20 14:07:15] GET data: []
[2025-10-20 14:07:15] Company ID from session: 1
[2025-10-20 14:07:15] Database connection included
[2025-10-20 14:07:15] License functions included
[2025-10-20 14:07:15] License type: FL-II
[2025-10-20 14:07:15] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:07:15] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:07:15] Purchase mode: F
[2025-10-20 14:07:15] Next voucher number: 2
[2025-10-20 14:07:15] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:07:15] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:07:15] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:07:15] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:07:15] Database connection closed
[2025-10-20 14:07:15] === PURCHASE SESSION ENDED ===
[2025-10-20 14:08:38] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:08:38] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760961153
}
[2025-10-20 14:08:38] POST data: []
[2025-10-20 14:08:38] GET data: []
[2025-10-20 14:08:38] Company ID from session: 1
[2025-10-20 14:08:38] Database connection included
[2025-10-20 14:08:38] License functions included
[2025-10-20 14:08:38] License type: FL-II
[2025-10-20 14:08:38] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:08:38] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:08:38] Purchase mode: F
[2025-10-20 14:08:38] Next voucher number: 1
[2025-10-20 14:08:38] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:08:38] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:08:38] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:08:38] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:08:38] Database connection closed
[2025-10-20 14:08:38] === PURCHASE SESSION ENDED ===
[2025-10-20 14:09:18] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:09:18] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760961153
}
[2025-10-20 14:09:18] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ANKUSH TRADERS",
    "supplier_code": "ANKU",
    "items": [
        {
            "code": "SCMPL0019029",
            "name": "20-20 Fine Whisky .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "0.90",
            "vv": "0",
            "tot_bott": "5",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "600.00",
    "tamt": "600.00"
}
[2025-10-20 14:09:18] GET data: []
[2025-10-20 14:09:18] Company ID from session: 1
[2025-10-20 14:09:18] Database connection included
[2025-10-20 14:09:18] License functions included
[2025-10-20 14:09:18] License type: FL-II
[2025-10-20 14:09:18] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:09:18] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:09:18] Purchase mode: F
[2025-10-20 14:09:18] Next voucher number: 1
[2025-10-20 14:09:18] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:09:18] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:09:18] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:09:18] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:09:18] === FORM SUBMISSION STARTED ===
[2025-10-20 14:09:18] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ANKU",
    "supplier_name": "ANKUSH TRADERS",
    "basic_amt": "600.00",
    "total_amt": "600.00"
}
[2025-10-20 14:09:18] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "ANKU",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "600.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 14:09:18] Purchase header inserted successfully: {
    "purchase_id": 6,
    "affected_rows": 1
}
[2025-10-20 14:09:18] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 14:09:18] Processing item 0: {
    "item_code": "SCMPL0019029",
    "item_name": "20-20 Fine Whisky .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 5,
    "bl": 0.9
}
[2025-10-20 14:09:18] Item 0 inserted successfully: {
    "purchase_id": 6,
    "item_code": "SCMPL0019029"
}
[2025-10-20 14:09:18] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 14:09:18] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 14:12:04] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:12:04] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760961153
}
[2025-10-20 14:12:04] POST data: []
[2025-10-20 14:12:04] GET data: {
    "mode": "F"
}
[2025-10-20 14:12:04] Company ID from session: 1
[2025-10-20 14:12:04] Database connection included
[2025-10-20 14:12:04] License functions included
[2025-10-20 14:12:04] License type: FL-II
[2025-10-20 14:12:04] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:12:04] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:12:04] Purchase mode: F
[2025-10-20 14:12:04] Next voucher number: 1
[2025-10-20 14:12:04] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:12:04] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:12:04] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:12:04] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:12:04] Database connection closed
[2025-10-20 14:12:04] === PURCHASE SESSION ENDED ===
[2025-10-20 14:13:07] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:13:07] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760961153
}
[2025-10-20 14:13:07] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "HARESH TRADERS",
    "supplier_code": "HARE",
    "items": {
        "1": {
            "code": "SCMPL0019029",
            "name": "20-20 Fine Whisky .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "0.90",
            "vv": "0",
            "tot_bott": "5",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "5",
            "case_rate": "120.000",
            "mrp": "0"
        }
    },
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "600.00",
    "tamt": "600.00"
}
[2025-10-20 14:13:07] GET data: {
    "mode": "F"
}
[2025-10-20 14:13:07] Company ID from session: 1
[2025-10-20 14:13:07] Database connection included
[2025-10-20 14:13:07] License functions included
[2025-10-20 14:13:07] License type: FL-II
[2025-10-20 14:13:07] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:13:07] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:13:07] Purchase mode: F
[2025-10-20 14:13:07] Next voucher number: 1
[2025-10-20 14:13:07] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:13:07] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:13:07] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:13:07] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:13:07] === FORM SUBMISSION STARTED ===
[2025-10-20 14:13:07] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "HARE",
    "supplier_name": "HARESH TRADERS",
    "basic_amt": "600.00",
    "total_amt": "600.00"
}
[2025-10-20 14:13:07] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "HARE",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "600.00",
        "7654",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 14:13:07] Purchase header inserted successfully: {
    "purchase_id": 7,
    "affected_rows": 1
}
[2025-10-20 14:13:07] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 14:13:07] Processing item 1: {
    "item_code": "SCMPL0019029",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 5,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 5,
    "bl": 0.9
}
[2025-10-20 14:13:07] Item 1 inserted successfully: {
    "purchase_id": 7,
    "item_code": "SCMPL0019029"
}
[2025-10-20 14:13:07] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 14:13:07] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 14:16:05] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:16:05] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760962458
}
[2025-10-20 14:16:05] POST data: []
[2025-10-20 14:16:05] GET data: {
    "mode": "F"
}
[2025-10-20 14:16:05] Company ID from session: 1
[2025-10-20 14:16:05] Database connection included
[2025-10-20 14:16:05] License functions included
[2025-10-20 14:16:05] License type: FL-II
[2025-10-20 14:16:05] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:16:05] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:16:05] Purchase mode: F
[2025-10-20 14:16:05] Next voucher number: 1
[2025-10-20 14:16:05] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:16:05] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:16:05] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:16:05] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:16:05] Database connection closed
[2025-10-20 14:16:05] === PURCHASE SESSION ENDED ===
[2025-10-20 14:16:55] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 14:16:55] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "stock_columns_checked": true,
    "last_submission": 1760962458
}
[2025-10-20 14:16:55] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-18",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-18",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "",
    "items": [
        {
            "code": "SCMPL0019029",
            "name": "20-20 Fine Whisky .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "0.90",
            "vv": "0",
            "tot_bott": "5",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "05",
            "case_rate": "120.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "600.00",
    "tamt": "600.00"
}
[2025-10-20 14:16:55] GET data: {
    "mode": "F"
}
[2025-10-20 14:16:55] Company ID from session: 1
[2025-10-20 14:16:55] Database connection included
[2025-10-20 14:16:55] License functions included
[2025-10-20 14:16:55] License type: FL-II
[2025-10-20 14:16:55] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 14:16:55] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 14:16:55] Purchase mode: F
[2025-10-20 14:16:55] Next voucher number: 1
[2025-10-20 14:16:55] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 14:16:55] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 14:16:55] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 14:16:55] Suppliers fetched: {
    "count": 36
}
[2025-10-20 14:16:55] === FORM SUBMISSION STARTED ===
[2025-10-20 14:16:55] Form data extracted: {
    "date": "2025-10-18",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-18",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "600.00",
    "total_amt": "600.00"
}
[2025-10-20 14:16:55] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-18",
        "",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "600.00",
        "7654",
        "2025-10-18",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 14:16:55] Purchase header inserted successfully: {
    "purchase_id": 8,
    "affected_rows": 1
}
[2025-10-20 14:16:55] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-20 14:16:55] Processing item 0: {
    "item_code": "SCMPL0019029",
    "item_name": "20-20 Fine Whisky .",
    "cases": 0,
    "bottles": 5,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 600,
    "tot_bott": 5,
    "bl": 0.9
}
[2025-10-20 14:16:55] Item 0 inserted successfully: {
    "purchase_id": 8,
    "item_code": "SCMPL0019029"
}
[2025-10-20 14:16:55] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-20 14:16:55] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 15:45:23] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 15:45:23] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 15:45:23] POST data: []
[2025-10-20 15:45:23] GET data: {
    "mode": "F"
}
[2025-10-20 15:45:23] Company ID from session: 1
[2025-10-20 15:45:23] Database connection included
[2025-10-20 15:45:23] License functions included
[2025-10-20 15:45:23] License type: FL-II
[2025-10-20 15:45:23] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 15:45:23] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 15:45:23] Purchase mode: F
[2025-10-20 15:45:23] Next voucher number: 1
[2025-10-20 15:45:23] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 15:45:23] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 15:45:23] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 15:45:23] Suppliers fetched: {
    "count": 36
}
[2025-10-20 15:45:23] Database connection closed
[2025-10-20 15:45:23] === PURCHASE SESSION ENDED ===
[2025-10-20 15:45:59] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 15:45:59] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 15:45:59] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-17",
    "auto_tp_no": "CL2296-140625\/1003",
    "tp_no": "1003",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "RAJ MARKETING & CO.",
    "supplier_code": "RAJ",
    "items": [
        {
            "code": "SCMCL0012761",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "312",
            "auto_batch": "BTC27-150924\/312",
            "mfg_month": "Sep-2024",
            "bl": "36",
            "vv": "42.8",
            "tot_bott": "400",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "4",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0013629",
            "name": "ICAP SANTRA .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "46",
            "auto_batch": "BTC32-210525\/46",
            "mfg_month": "May-2025",
            "bl": "36",
            "vv": "35.7",
            "tot_bott": "400",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "4",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "25"
        },
        {
            "code": "SCMCL0013629",
            "name": "ICAP SANTRA .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "62",
            "auto_batch": "BTC32-120625\/62",
            "mfg_month": "Jun-2025",
            "bl": "18",
            "vv": "42.8",
            "tot_bott": "200",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0013677",
            "name": "THREE X-Sangali .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "59",
            "auto_batch": "BTC32-070625\/59",
            "mfg_month": "Jun-2025",
            "bl": "270",
            "vv": "42.8",
            "tot_bott": "3000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "30",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0013681",
            "name": "THREE X-Sangali .",
            "size": "750 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "12",
            "auto_batch": "BTC32-110425\/12",
            "mfg_month": "Apr-2025",
            "bl": "18",
            "vv": "42.8",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "290"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "5040.00",
    "tamt": "5040.00"
}
[2025-10-20 15:45:59] GET data: {
    "mode": "F"
}
[2025-10-20 15:45:59] Company ID from session: 1
[2025-10-20 15:45:59] Database connection included
[2025-10-20 15:45:59] License functions included
[2025-10-20 15:45:59] License type: FL-II
[2025-10-20 15:45:59] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 15:45:59] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 15:45:59] Purchase mode: F
[2025-10-20 15:45:59] Next voucher number: 1
[2025-10-20 15:45:59] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 15:45:59] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 15:45:59] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 15:45:59] Suppliers fetched: {
    "count": 36
}
[2025-10-20 15:45:59] === FORM SUBMISSION STARTED ===
[2025-10-20 15:45:59] Form data extracted: {
    "date": "2025-10-17",
    "voc_no": "1",
    "auto_tp_no": "CL2296-140625\/1003",
    "tp_no": "1003",
    "tp_date": "2025-10-17",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "RAJ",
    "supplier_name": "RAJ MARKETING & CO.",
    "basic_amt": "5040.00",
    "total_amt": "5040.00"
}
[2025-10-20 15:45:59] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-17",
        "RAJ",
        "CL2296-140625\/1003",
        "1",
        "",
        "",
        "5040.00",
        "1003",
        "2025-10-17",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 15:45:59] Purchase header inserted successfully: {
    "purchase_id": 9,
    "affected_rows": 1
}
[2025-10-20 15:45:59] Starting to process purchase items: {
    "item_count": 5
}
[2025-10-20 15:45:59] Processing item 0: {
    "item_code": "SCMCL0012761",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 4,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 480,
    "tot_bott": 400,
    "bl": 36
}
[2025-10-20 15:45:59] Item 0 inserted successfully: {
    "purchase_id": 9,
    "item_code": "SCMCL0012761"
}
[2025-10-20 15:46:00] Processing item 1: {
    "item_code": "SCMCL0013629",
    "item_name": "ICAP SANTRA .",
    "cases": 4,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 480,
    "tot_bott": 400,
    "bl": 36
}
[2025-10-20 15:46:00] Item 1 inserted successfully: {
    "purchase_id": 9,
    "item_code": "SCMCL0013629"
}
[2025-10-20 15:46:00] Processing item 2: {
    "item_code": "SCMCL0013629",
    "item_name": "ICAP SANTRA .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 240,
    "tot_bott": 200,
    "bl": 18
}
[2025-10-20 15:46:00] Item 2 inserted successfully: {
    "purchase_id": 9,
    "item_code": "SCMCL0013629"
}
[2025-10-20 15:46:00] Processing item 3: {
    "item_code": "SCMCL0013677",
    "item_name": "THREE X-Sangali .",
    "cases": 30,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 3600,
    "tot_bott": 3000,
    "bl": 270
}
[2025-10-20 15:46:00] Item 3 inserted successfully: {
    "purchase_id": 9,
    "item_code": "SCMCL0013677"
}
[2025-10-20 15:46:00] Processing item 4: {
    "item_code": "SCMCL0013681",
    "item_name": "THREE X-Sangali .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 240,
    "tot_bott": 24,
    "bl": 18
}
[2025-10-20 15:46:00] Item 4 inserted successfully: {
    "purchase_id": 9,
    "item_code": "SCMCL0013681"
}
[2025-10-20 15:46:00] Purchase items processing completed: {
    "successful_items": 5,
    "total_items": 5
}
[2025-10-20 15:46:00] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-20 15:47:03] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 15:47:03] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 15:47:03] POST data: []
[2025-10-20 15:47:03] GET data: {
    "mode": "F"
}
[2025-10-20 15:47:03] Company ID from session: 1
[2025-10-20 15:47:04] Database connection included
[2025-10-20 15:47:04] License functions included
[2025-10-20 15:47:04] License type: FL-II
[2025-10-20 15:47:04] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 15:47:04] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 15:47:04] Purchase mode: F
[2025-10-20 15:47:04] Next voucher number: 2
[2025-10-20 15:47:04] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 15:47:04] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 15:47:04] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 15:47:04] Suppliers fetched: {
    "count": 36
}
[2025-10-20 15:47:04] Database connection closed
[2025-10-20 15:47:04] === PURCHASE SESSION ENDED ===
[2025-10-20 15:47:20] === NEW PURCHASE SESSION STARTED ===
[2025-10-20 15:47:20] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-20 15:47:20] POST data: {
    "mode": "F",
    "voc_no": "2",
    "date": "2025-05-31",
    "auto_tp_no": "CL2296-310525\/777",
    "tp_no": "777",
    "tp_date": "2025-05-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "RAJ MARKETING & CO.",
    "supplier_code": "RAJ",
    "items": [
        {
            "code": "SCMCL0012761",
            "name": "DESHI DARU TANGO PUNCH-NV .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "85",
            "auto_batch": "BTC27-270525\/85",
            "mfg_month": "May-2025",
            "bl": "135",
            "vv": "42.8",
            "tot_bott": "1500",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "15",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        },
        {
            "code": "SCMCL0013677",
            "name": "THREE X-Sangali .",
            "size": "90 ML (Pet)-100",
            "bottles_per_case": "12",
            "batch_no": "40",
            "auto_batch": "BTC32-140525\/40",
            "mfg_month": "May-2025",
            "bl": "270",
            "vv": "42.8",
            "tot_bott": "3000",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "30",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "35"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "5400.00",
    "tamt": "5400.00"
}
[2025-10-20 15:47:20] GET data: {
    "mode": "F"
}
[2025-10-20 15:47:20] Company ID from session: 1
[2025-10-20 15:47:20] Database connection included
[2025-10-20 15:47:20] License functions included
[2025-10-20 15:47:20] License type: FL-II
[2025-10-20 15:47:20] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-20 15:47:20] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-20 15:47:20] Purchase mode: F
[2025-10-20 15:47:20] Next voucher number: 2
[2025-10-20 15:47:20] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-20 15:47:20] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-20 15:47:20] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-20 15:47:20] Suppliers fetched: {
    "count": 36
}
[2025-10-20 15:47:20] === FORM SUBMISSION STARTED ===
[2025-10-20 15:47:20] Form data extracted: {
    "date": "2025-05-31",
    "voc_no": "2",
    "auto_tp_no": "CL2296-310525\/777",
    "tp_no": "777",
    "tp_date": "2025-05-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "RAJ",
    "supplier_name": "RAJ MARKETING & CO.",
    "basic_amt": "5400.00",
    "total_amt": "5400.00"
}
[2025-10-20 15:47:20] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-05-31",
        "RAJ",
        "CL2296-310525\/777",
        "2",
        "",
        "",
        "5400.00",
        "777",
        "2025-05-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-20 15:47:20] Purchase header inserted successfully: {
    "purchase_id": 10,
    "affected_rows": 1
}
[2025-10-20 15:47:20] Starting to process purchase items: {
    "item_count": 2
}
[2025-10-20 15:47:20] Processing item 0: {
    "item_code": "SCMCL0012761",
    "item_name": "DESHI DARU TANGO PUNCH-NV .",
    "cases": 15,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 1800,
    "tot_bott": 1500,
    "bl": 135
}
[2025-10-20 15:47:20] Item 0 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0012761"
}
[2025-10-20 15:47:20] Processing item 1: {
    "item_code": "SCMCL0013677",
    "item_name": "THREE X-Sangali .",
    "cases": 30,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 3600,
    "tot_bott": 3000,
    "bl": 270
}
[2025-10-20 15:47:20] Item 1 inserted successfully: {
    "purchase_id": 10,
    "item_code": "SCMCL0013677"
}
[2025-10-20 15:47:21] Purchase items processing completed: {
    "successful_items": 2,
    "total_items": 2
}
[2025-10-20 15:47:21] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 06:50:56] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 06:50:56] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 06:50:56] POST data: []
[2025-10-28 06:50:56] GET data: {
    "mode": "F"
}
[2025-10-28 06:50:56] Company ID from session: 1
[2025-10-28 06:50:56] Database connection included
[2025-10-28 06:50:56] License functions included
[2025-10-28 06:50:56] License type: FL-II
[2025-10-28 06:50:56] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 06:50:56] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 06:50:56] Purchase mode: F
[2025-10-28 06:50:56] Next voucher number: 2
[2025-10-28 06:50:57] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 06:50:57] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 06:50:57] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 06:50:57] Suppliers fetched: {
    "count": 36
}
[2025-10-28 06:50:57] Database connection closed
[2025-10-28 06:50:57] === PURCHASE SESSION ENDED ===
[2025-10-28 06:51:52] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 06:51:52] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 06:51:52] POST data: {
    "mode": "F",
    "voc_no": "2",
    "date": "2025-08-31",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": [
        {
            "code": "SCMPL0010664",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "438",
            "auto_batch": "BTP16-060825\/438",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0010665",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "447",
            "auto_batch": "BTP16-080825\/447",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0036420",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "90 ML (Pet)-96",
            "bottles_per_case": "96",
            "batch_no": "381",
            "auto_batch": "BTP16-220725\/381",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "145"
        },
        {
            "code": "SCMPL0040014",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "421",
            "auto_batch": "BTP16-310725\/421",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0024580",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "200",
            "auto_batch": "BTP67-190825\/200",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "135"
        },
        {
            "code": "SCMPL0024581",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "202",
            "auto_batch": "BTP67-200825\/202",
            "mfg_month": "Aug-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "250"
        },
        {
            "code": "SCMPL0024582",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "141",
            "auto_batch": "BTP67-140725\/141",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "515"
        },
        {
            "code": "SCMPL0030963",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "177",
            "auto_batch": "BTP67-290725\/177",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "80.000",
            "mrp": "440"
        },
        {
            "code": "SCMPL0030964",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "031",
            "auto_batch": "BTP67-240425\/31",
            "mfg_month": "Apr-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "205"
        },
        {
            "code": "SCMPL0034626",
            "name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "213",
            "auto_batch": "BTP67-290923\/213",
            "mfg_month": "Oct-2023",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "120.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038457",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "413",
            "auto_batch": "BTP16-280725\/413",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038458",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "343",
            "auto_batch": "BTP16-120725\/343",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0038469",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038470",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0040016",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "368",
            "auto_batch": "BTP16-190725\/368",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0038510",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "469",
            "auto_batch": "BTP67-280225\/469",
            "mfg_month": "Mar-2025",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "100.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038512",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "096",
            "auto_batch": "BTP67-060625\/96",
            "mfg_month": "Jun-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "410"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "7180.00",
    "tamt": "7180.00"
}
[2025-10-28 06:51:52] GET data: {
    "mode": "F"
}
[2025-10-28 06:51:52] Company ID from session: 1
[2025-10-28 06:51:52] Database connection included
[2025-10-28 06:51:52] License functions included
[2025-10-28 06:51:52] License type: FL-II
[2025-10-28 06:51:52] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 06:51:52] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 06:51:52] Purchase mode: F
[2025-10-28 06:51:52] Next voucher number: 2
[2025-10-28 06:51:52] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 06:51:52] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 06:51:52] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 06:51:52] Suppliers fetched: {
    "count": 36
}
[2025-10-28 06:51:52] === FORM SUBMISSION STARTED ===
[2025-10-28 06:51:52] Form data extracted: {
    "date": "2025-08-31",
    "voc_no": "2",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "7180.00",
    "total_amt": "7180.00"
}
[2025-10-28 06:51:52] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-08-31",
        "AMAR",
        "FL1305-310825\/7649",
        "2",
        "",
        "",
        "7180.00",
        "7649",
        "2025-08-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 06:51:52] Purchase header inserted successfully: {
    "purchase_id": 11,
    "affected_rows": 1
}
[2025-10-28 06:51:52] Starting to process purchase items: {
    "item_count": 17
}
[2025-10-28 06:51:52] Processing item 0: {
    "item_code": "SCMPL0010664",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:51:52] Item 0 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0010664"
}
[2025-10-28 06:51:52] Processing item 1: {
    "item_code": "SCMPL0010665",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:51:52] Item 1 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0010665"
}
[2025-10-28 06:51:52] Processing item 2: {
    "item_code": "SCMPL0036420",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 96,
    "bl": 8.64
}
[2025-10-28 06:51:52] Item 2 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0036420"
}
[2025-10-28 06:51:52] Processing item 3: {
    "item_code": "SCMPL0040014",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 200,
    "tot_bott": 96,
    "bl": 17.28
}
[2025-10-28 06:51:52] Item 3 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0040014"
}
[2025-10-28 06:51:52] Processing item 4: {
    "item_code": "SCMPL0024580",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 06:51:52] Item 4 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0024580"
}
[2025-10-28 06:51:52] Processing item 5: {
    "item_code": "SCMPL0024581",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:51:52] Item 5 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0024581"
}
[2025-10-28 06:51:52] Processing item 6: {
    "item_code": "SCMPL0024582",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:51:52] Item 6 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0024582"
}
[2025-10-28 06:51:52] Processing item 7: {
    "item_code": "SCMPL0030963",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 80,
    "amount": 80,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:51:52] Item 7 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0030963"
}
[2025-10-28 06:51:52] Processing item 8: {
    "item_code": "SCMPL0030964",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 06:51:52] Item 8 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0030964"
}
[2025-10-28 06:51:52] Processing item 9: {
    "item_code": "SCMPL0034626",
    "item_name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 720,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 06:51:52] Item 9 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0034626"
}
[2025-10-28 06:51:52] Processing item 10: {
    "item_code": "SCMPL0038457",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:51:52] Item 10 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038457"
}
[2025-10-28 06:51:52] Processing item 11: {
    "item_code": "SCMPL0038458",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:51:52] Item 11 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038458"
}
[2025-10-28 06:51:52] Processing item 12: {
    "item_code": "SCMPL0038469",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:51:52] Item 12 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038469"
}
[2025-10-28 06:51:52] Processing item 13: {
    "item_code": "SCMPL0038470",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:51:52] Item 13 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038470"
}
[2025-10-28 06:51:52] Processing item 14: {
    "item_code": "SCMPL0040016",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:51:52] Item 14 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0040016"
}
[2025-10-28 06:51:52] Processing item 15: {
    "item_code": "SCMPL0038510",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 600,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 06:51:52] Item 15 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038510"
}
[2025-10-28 06:51:52] Processing item 16: {
    "item_code": "SCMPL0038512",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:51:52] Item 16 inserted successfully: {
    "purchase_id": 11,
    "item_code": "SCMPL0038512"
}
[2025-10-28 06:51:52] Purchase items processing completed: {
    "successful_items": 17,
    "total_items": 17
}
[2025-10-28 06:51:52] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 06:54:16] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 06:54:16] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 06:54:16] POST data: []
[2025-10-28 06:54:16] GET data: {
    "mode": "F"
}
[2025-10-28 06:54:16] Company ID from session: 1
[2025-10-28 06:54:16] Database connection included
[2025-10-28 06:54:16] License functions included
[2025-10-28 06:54:16] License type: FL-II
[2025-10-28 06:54:16] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 06:54:16] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 06:54:16] Purchase mode: F
[2025-10-28 06:54:16] Next voucher number: 3
[2025-10-28 06:54:16] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 06:54:16] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 06:54:17] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 06:54:17] Suppliers fetched: {
    "count": 36
}
[2025-10-28 06:54:17] Database connection closed
[2025-10-28 06:54:17] === PURCHASE SESSION ENDED ===
[2025-10-28 06:59:41] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 06:59:41] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 06:59:41] POST data: []
[2025-10-28 06:59:41] GET data: []
[2025-10-28 06:59:41] Company ID from session: 1
[2025-10-28 06:59:41] Database connection included
[2025-10-28 06:59:41] License functions included
[2025-10-28 06:59:41] License type: FL-II
[2025-10-28 06:59:41] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 06:59:41] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 06:59:41] Purchase mode: F
[2025-10-28 06:59:41] Next voucher number: 1
[2025-10-28 06:59:41] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 06:59:41] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 06:59:41] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 06:59:41] Suppliers fetched: {
    "count": 36
}
[2025-10-28 06:59:41] Database connection closed
[2025-10-28 06:59:41] === PURCHASE SESSION ENDED ===
[2025-10-28 06:59:56] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 06:59:56] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 06:59:56] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-08-31",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": [
        {
            "code": "SCMPL0010664",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "438",
            "auto_batch": "BTP16-060825\/438",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0010665",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "447",
            "auto_batch": "BTP16-080825\/447",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0036420",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "90 ML (Pet)-96",
            "bottles_per_case": "96",
            "batch_no": "381",
            "auto_batch": "BTP16-220725\/381",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "145"
        },
        {
            "code": "SCMPL0040014",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "421",
            "auto_batch": "BTP16-310725\/421",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0024580",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "200",
            "auto_batch": "BTP67-190825\/200",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "135"
        },
        {
            "code": "SCMPL0024581",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "202",
            "auto_batch": "BTP67-200825\/202",
            "mfg_month": "Aug-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "250"
        },
        {
            "code": "SCMPL0024582",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "141",
            "auto_batch": "BTP67-140725\/141",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "515"
        },
        {
            "code": "SCMPL0030963",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "177",
            "auto_batch": "BTP67-290725\/177",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "80.000",
            "mrp": "440"
        },
        {
            "code": "SCMPL0030964",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "031",
            "auto_batch": "BTP67-240425\/31",
            "mfg_month": "Apr-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "205"
        },
        {
            "code": "SCMPL0034626",
            "name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "213",
            "auto_batch": "BTP67-290923\/213",
            "mfg_month": "Oct-2023",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "120.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038457",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "413",
            "auto_batch": "BTP16-280725\/413",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038458",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "343",
            "auto_batch": "BTP16-120725\/343",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0038469",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038470",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0040016",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "368",
            "auto_batch": "BTP16-190725\/368",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0038510",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "469",
            "auto_batch": "BTP67-280225\/469",
            "mfg_month": "Mar-2025",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "100.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038512",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "096",
            "auto_batch": "BTP67-060625\/96",
            "mfg_month": "Jun-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "410"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "7180.00",
    "tamt": "7180.00"
}
[2025-10-28 06:59:56] GET data: []
[2025-10-28 06:59:56] Company ID from session: 1
[2025-10-28 06:59:56] Database connection included
[2025-10-28 06:59:56] License functions included
[2025-10-28 06:59:56] License type: FL-II
[2025-10-28 06:59:56] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 06:59:56] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 06:59:56] Purchase mode: F
[2025-10-28 06:59:56] Next voucher number: 1
[2025-10-28 06:59:56] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 06:59:56] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 06:59:56] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 06:59:56] Suppliers fetched: {
    "count": 36
}
[2025-10-28 06:59:56] === FORM SUBMISSION STARTED ===
[2025-10-28 06:59:56] Form data extracted: {
    "date": "2025-08-31",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "7180.00",
    "total_amt": "7180.00"
}
[2025-10-28 06:59:56] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-08-31",
        "AMAR",
        "FL1305-310825\/7649",
        "1",
        "",
        "",
        "7180.00",
        "7649",
        "2025-08-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 06:59:56] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-28 06:59:56] Starting to process purchase items: {
    "item_count": 17
}
[2025-10-28 06:59:56] Processing item 0: {
    "item_code": "SCMPL0010664",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:59:56] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010664"
}
[2025-10-28 06:59:56] Processing item 1: {
    "item_code": "SCMPL0010665",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:59:56] Item 1 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010665"
}
[2025-10-28 06:59:56] Processing item 2: {
    "item_code": "SCMPL0036420",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 96,
    "bl": 8.64
}
[2025-10-28 06:59:56] Item 2 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0036420"
}
[2025-10-28 06:59:56] Processing item 3: {
    "item_code": "SCMPL0040014",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 200,
    "tot_bott": 96,
    "bl": 17.28
}
[2025-10-28 06:59:56] Item 3 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040014"
}
[2025-10-28 06:59:56] Processing item 4: {
    "item_code": "SCMPL0024580",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 06:59:56] Item 4 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024580"
}
[2025-10-28 06:59:56] Processing item 5: {
    "item_code": "SCMPL0024581",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:59:56] Item 5 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024581"
}
[2025-10-28 06:59:56] Processing item 6: {
    "item_code": "SCMPL0024582",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:59:56] Item 6 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024582"
}
[2025-10-28 06:59:57] Processing item 7: {
    "item_code": "SCMPL0030963",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 80,
    "amount": 80,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:59:57] Item 7 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030963"
}
[2025-10-28 06:59:57] Processing item 8: {
    "item_code": "SCMPL0030964",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 06:59:57] Item 8 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030964"
}
[2025-10-28 06:59:57] Processing item 9: {
    "item_code": "SCMPL0034626",
    "item_name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 720,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 06:59:57] Item 9 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0034626"
}
[2025-10-28 06:59:57] Processing item 10: {
    "item_code": "SCMPL0038457",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:59:57] Item 10 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038457"
}
[2025-10-28 06:59:57] Processing item 11: {
    "item_code": "SCMPL0038458",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:59:57] Item 11 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038458"
}
[2025-10-28 06:59:57] Processing item 12: {
    "item_code": "SCMPL0038469",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 06:59:57] Item 12 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038469"
}
[2025-10-28 06:59:57] Processing item 13: {
    "item_code": "SCMPL0038470",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 06:59:57] Item 13 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038470"
}
[2025-10-28 06:59:57] Processing item 14: {
    "item_code": "SCMPL0040016",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:59:57] Item 14 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040016"
}
[2025-10-28 06:59:57] Processing item 15: {
    "item_code": "SCMPL0038510",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 600,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 06:59:57] Item 15 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038510"
}
[2025-10-28 06:59:57] Processing item 16: {
    "item_code": "SCMPL0038512",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 06:59:57] Item 16 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038512"
}
[2025-10-28 06:59:57] Purchase items processing completed: {
    "successful_items": 17,
    "total_items": 17
}
[2025-10-28 06:59:57] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 07:00:09] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:00:09] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:00:09] POST data: []
[2025-10-28 07:00:09] GET data: {
    "mode": "F"
}
[2025-10-28 07:00:09] Company ID from session: 1
[2025-10-28 07:00:09] Database connection included
[2025-10-28 07:00:09] License functions included
[2025-10-28 07:00:09] License type: FL-II
[2025-10-28 07:00:09] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:00:09] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:00:09] Purchase mode: F
[2025-10-28 07:00:09] Next voucher number: 2
[2025-10-28 07:00:09] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:00:09] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:00:09] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:00:09] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:00:09] Database connection closed
[2025-10-28 07:00:09] === PURCHASE SESSION ENDED ===
[2025-10-28 07:01:35] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:01:35] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:01:35] POST data: []
[2025-10-28 07:01:35] GET data: []
[2025-10-28 07:01:35] Company ID from session: 1
[2025-10-28 07:01:35] Database connection included
[2025-10-28 07:01:35] License functions included
[2025-10-28 07:01:35] License type: FL-II
[2025-10-28 07:01:35] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:01:35] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:01:35] Purchase mode: F
[2025-10-28 07:01:35] Next voucher number: 2
[2025-10-28 07:01:35] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:01:35] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:01:36] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:01:36] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:01:36] Database connection closed
[2025-10-28 07:01:36] === PURCHASE SESSION ENDED ===
[2025-10-28 07:32:03] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:32:03] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:32:03] POST data: []
[2025-10-28 07:32:03] GET data: []
[2025-10-28 07:32:03] Company ID from session: 1
[2025-10-28 07:32:03] Database connection included
[2025-10-28 07:32:03] License functions included
[2025-10-28 07:32:03] License type: FL-II
[2025-10-28 07:32:03] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:32:03] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:32:03] Purchase mode: F
[2025-10-28 07:32:03] Next voucher number: 1
[2025-10-28 07:32:03] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:32:03] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:32:03] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:32:03] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:32:03] Database connection closed
[2025-10-28 07:32:03] === PURCHASE SESSION ENDED ===
[2025-10-28 07:34:32] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:34:32] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:34:32] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-28",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-10-28",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": [
        {
            "code": "SCMPL0010664",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "438",
            "auto_batch": "BTP16-060825\/438",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0010665",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "447",
            "auto_batch": "BTP16-080825\/447",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0036420",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "90 ML (Pet)-96",
            "bottles_per_case": "96",
            "batch_no": "381",
            "auto_batch": "BTP16-220725\/381",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "145"
        },
        {
            "code": "SCMPL0040014",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "421",
            "auto_batch": "BTP16-310725\/421",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0024580",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "200",
            "auto_batch": "BTP67-190825\/200",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "135"
        },
        {
            "code": "SCMPL0024581",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "202",
            "auto_batch": "BTP67-200825\/202",
            "mfg_month": "Aug-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "250"
        },
        {
            "code": "SCMPL0024582",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "141",
            "auto_batch": "BTP67-140725\/141",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "515"
        },
        {
            "code": "SCMPL0030963",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "177",
            "auto_batch": "BTP67-290725\/177",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "80.000",
            "mrp": "440"
        },
        {
            "code": "SCMPL0030964",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "031",
            "auto_batch": "BTP67-240425\/31",
            "mfg_month": "Apr-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "205"
        },
        {
            "code": "SCMPL0034626",
            "name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "213",
            "auto_batch": "BTP67-290923\/213",
            "mfg_month": "Oct-2023",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "120.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038457",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "413",
            "auto_batch": "BTP16-280725\/413",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038458",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "343",
            "auto_batch": "BTP16-120725\/343",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0038469",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038470",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0040016",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "368",
            "auto_batch": "BTP16-190725\/368",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0038510",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "469",
            "auto_batch": "BTP67-280225\/469",
            "mfg_month": "Mar-2025",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "100.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038512",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "096",
            "auto_batch": "BTP67-060625\/96",
            "mfg_month": "Jun-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "410"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "7180.00",
    "tamt": "7180.00"
}
[2025-10-28 07:34:32] GET data: []
[2025-10-28 07:34:32] Company ID from session: 1
[2025-10-28 07:34:32] Database connection included
[2025-10-28 07:34:32] License functions included
[2025-10-28 07:34:32] License type: FL-II
[2025-10-28 07:34:32] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:34:32] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:34:32] Purchase mode: F
[2025-10-28 07:34:32] Next voucher number: 1
[2025-10-28 07:34:32] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:34:32] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:34:32] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:34:32] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:34:32] === FORM SUBMISSION STARTED ===
[2025-10-28 07:34:32] Form data extracted: {
    "date": "2025-10-28",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-10-28",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "7180.00",
    "total_amt": "7180.00"
}
[2025-10-28 07:34:32] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-28",
        "AMAR",
        "FL1305-310825\/7649",
        "1",
        "",
        "",
        "7180.00",
        "7649",
        "2025-10-28",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 07:34:32] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-28 07:34:32] Starting to process purchase items: {
    "item_count": 17
}
[2025-10-28 07:34:32] Processing item 0: {
    "item_code": "SCMPL0010664",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:34:32] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010664"
}
[2025-10-28 07:34:32] Processing item 1: {
    "item_code": "SCMPL0010665",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:34:32] Item 1 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010665"
}
[2025-10-28 07:34:32] Processing item 2: {
    "item_code": "SCMPL0036420",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 96,
    "bl": 8.64
}
[2025-10-28 07:34:32] Item 2 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0036420"
}
[2025-10-28 07:34:32] Processing item 3: {
    "item_code": "SCMPL0040014",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 200,
    "tot_bott": 96,
    "bl": 17.28
}
[2025-10-28 07:34:32] Item 3 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040014"
}
[2025-10-28 07:34:33] Processing item 4: {
    "item_code": "SCMPL0024580",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 07:34:33] Item 4 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024580"
}
[2025-10-28 07:34:33] Processing item 5: {
    "item_code": "SCMPL0024581",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:34:33] Item 5 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024581"
}
[2025-10-28 07:34:33] Processing item 6: {
    "item_code": "SCMPL0024582",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:34:33] Item 6 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024582"
}
[2025-10-28 07:34:33] Processing item 7: {
    "item_code": "SCMPL0030963",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 80,
    "amount": 80,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:34:33] Item 7 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030963"
}
[2025-10-28 07:34:33] Processing item 8: {
    "item_code": "SCMPL0030964",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 07:34:33] Item 8 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030964"
}
[2025-10-28 07:34:33] Processing item 9: {
    "item_code": "SCMPL0034626",
    "item_name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 720,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 07:34:33] Item 9 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0034626"
}
[2025-10-28 07:34:33] Processing item 10: {
    "item_code": "SCMPL0038457",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:34:33] Item 10 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038457"
}
[2025-10-28 07:34:33] Processing item 11: {
    "item_code": "SCMPL0038458",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:34:33] Item 11 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038458"
}
[2025-10-28 07:34:33] Processing item 12: {
    "item_code": "SCMPL0038469",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:34:33] Item 12 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038469"
}
[2025-10-28 07:34:33] Processing item 13: {
    "item_code": "SCMPL0038470",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:34:33] Item 13 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038470"
}
[2025-10-28 07:34:33] Processing item 14: {
    "item_code": "SCMPL0040016",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:34:33] Item 14 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040016"
}
[2025-10-28 07:34:33] Processing item 15: {
    "item_code": "SCMPL0038510",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 600,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 07:34:33] Item 15 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038510"
}
[2025-10-28 07:34:33] Processing item 16: {
    "item_code": "SCMPL0038512",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:34:33] Item 16 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038512"
}
[2025-10-28 07:34:33] Purchase items processing completed: {
    "successful_items": 17,
    "total_items": 17
}
[2025-10-28 07:34:33] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 07:39:50] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:39:50] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:39:50] POST data: []
[2025-10-28 07:39:50] GET data: {
    "mode": "F"
}
[2025-10-28 07:39:50] Company ID from session: 1
[2025-10-28 07:39:50] Database connection included
[2025-10-28 07:39:50] License functions included
[2025-10-28 07:39:50] License type: FL-II
[2025-10-28 07:39:50] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:39:50] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:39:50] Purchase mode: F
[2025-10-28 07:39:50] Next voucher number: 1
[2025-10-28 07:39:50] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:39:50] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:39:50] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:39:50] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:39:50] Database connection closed
[2025-10-28 07:39:50] === PURCHASE SESSION ENDED ===
[2025-10-28 07:40:05] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 07:40:05] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop",
    "auto_transition_2025-10_2025-10-26": true,
    "auto_transition_2025-10_2025-10-28": true
}
[2025-10-28 07:40:05] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-08-31",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": [
        {
            "code": "SCMPL0010664",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "438",
            "auto_batch": "BTP16-060825\/438",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0010665",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "447",
            "auto_batch": "BTP16-080825\/447",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0036420",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "90 ML (Pet)-96",
            "bottles_per_case": "96",
            "batch_no": "381",
            "auto_batch": "BTP16-220725\/381",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "145"
        },
        {
            "code": "SCMPL0040014",
            "name": "MAGIC MOMENTS PURE GRAIN VODKA .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "421",
            "auto_batch": "BTP16-310725\/421",
            "mfg_month": "Aug-2025",
            "bl": "17.28",
            "vv": "25",
            "tot_bott": "96",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "2",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0024580",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "200",
            "auto_batch": "BTP67-190825\/200",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "135"
        },
        {
            "code": "SCMPL0024581",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "202",
            "auto_batch": "BTP67-200825\/202",
            "mfg_month": "Aug-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "250"
        },
        {
            "code": "SCMPL0024582",
            "name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "141",
            "auto_batch": "BTP67-140725\/141",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "515"
        },
        {
            "code": "SCMPL0030963",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "177",
            "auto_batch": "BTP67-290725\/177",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "80.000",
            "mrp": "440"
        },
        {
            "code": "SCMPL0030964",
            "name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
            "size": "90 ML(100)",
            "bottles_per_case": "100",
            "batch_no": "031",
            "auto_batch": "BTP67-240425\/31",
            "mfg_month": "Apr-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "100",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "205"
        },
        {
            "code": "SCMPL0034626",
            "name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "213",
            "auto_batch": "BTP67-290923\/213",
            "mfg_month": "Oct-2023",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "120.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038457",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "413",
            "auto_batch": "BTP16-280725\/413",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038458",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "343",
            "auto_batch": "BTP16-120725\/343",
            "mfg_month": "Jul-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0038469",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "1120"
        },
        {
            "code": "SCMPL0038470",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "417",
            "auto_batch": "BTP16-300725\/417",
            "mfg_month": "Aug-2025",
            "bl": "9",
            "vv": "25",
            "tot_bott": "24",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "560"
        },
        {
            "code": "SCMPL0040016",
            "name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
            "size": "180 ML (Pet)",
            "bottles_per_case": "1",
            "batch_no": "368",
            "auto_batch": "BTP16-190725\/368",
            "mfg_month": "Jul-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "270"
        },
        {
            "code": "SCMPL0038510",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "750 ML",
            "bottles_per_case": "1",
            "batch_no": "469",
            "auto_batch": "BTP67-280225\/469",
            "mfg_month": "Mar-2025",
            "bl": "4.5",
            "vv": "25",
            "tot_bott": "6",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "0",
            "bottles": "6",
            "case_rate": "100.000",
            "mrp": "1660"
        },
        {
            "code": "SCMPL0038512",
            "name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
            "size": "180 ML",
            "bottles_per_case": "1",
            "batch_no": "096",
            "auto_batch": "BTP67-060625\/96",
            "mfg_month": "Jun-2025",
            "bl": "8.64",
            "vv": "25",
            "tot_bott": "48",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "410"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "7180.00",
    "tamt": "7180.00"
}
[2025-10-28 07:40:05] GET data: {
    "mode": "F"
}
[2025-10-28 07:40:05] Company ID from session: 1
[2025-10-28 07:40:05] Database connection included
[2025-10-28 07:40:05] License functions included
[2025-10-28 07:40:05] License type: FL-II
[2025-10-28 07:40:05] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 07:40:05] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 07:40:05] Purchase mode: F
[2025-10-28 07:40:05] Next voucher number: 1
[2025-10-28 07:40:05] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 07:40:05] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 07:40:05] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 07:40:05] Suppliers fetched: {
    "count": 36
}
[2025-10-28 07:40:05] === FORM SUBMISSION STARTED ===
[2025-10-28 07:40:05] Form data extracted: {
    "date": "2025-08-31",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7649",
    "tp_no": "7649",
    "tp_date": "2025-08-31",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "7180.00",
    "total_amt": "7180.00"
}
[2025-10-28 07:40:05] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-08-31",
        "AMAR",
        "FL1305-310825\/7649",
        "1",
        "",
        "",
        "7180.00",
        "7649",
        "2025-08-31",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 07:40:05] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-28 07:40:05] Starting to process purchase items: {
    "item_count": 17
}
[2025-10-28 07:40:05] Processing item 0: {
    "item_code": "SCMPL0010664",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:40:05] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010664"
}
[2025-10-28 07:40:05] Processing item 1: {
    "item_code": "SCMPL0010665",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:40:05] Item 1 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0010665"
}
[2025-10-28 07:40:05] Processing item 2: {
    "item_code": "SCMPL0036420",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 96,
    "bl": 8.64
}
[2025-10-28 07:40:05] Item 2 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0036420"
}
[2025-10-28 07:40:05] Processing item 3: {
    "item_code": "SCMPL0040014",
    "item_name": "MAGIC MOMENTS PURE GRAIN VODKA .",
    "cases": 2,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 200,
    "tot_bott": 96,
    "bl": 17.28
}
[2025-10-28 07:40:05] Item 3 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040014"
}
[2025-10-28 07:40:05] Processing item 4: {
    "item_code": "SCMPL0024580",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 07:40:05] Item 4 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024580"
}
[2025-10-28 07:40:05] Processing item 5: {
    "item_code": "SCMPL0024581",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:40:05] Item 5 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024581"
}
[2025-10-28 07:40:05] Processing item 6: {
    "item_code": "SCMPL0024582",
    "item_name": "Black by Bacardi Ultra Deluxe Original Premium Cra",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:40:05] Item 6 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0024582"
}
[2025-10-28 07:40:05] Processing item 7: {
    "item_code": "SCMPL0030963",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 80,
    "amount": 80,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:40:05] Item 7 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030963"
}
[2025-10-28 07:40:05] Processing item 8: {
    "item_code": "SCMPL0030964",
    "item_name": "Bacardi Limon Ultra Deluxe Original citrus Rum .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 100,
    "bl": 9
}
[2025-10-28 07:40:05] Item 8 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0030964"
}
[2025-10-28 07:40:05] Processing item 9: {
    "item_code": "SCMPL0034626",
    "item_name": "BACARDI GINGER ULTRA DELUXE ORIGINAL GINGER RUM .",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 720,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 07:40:05] Item 9 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0034626"
}
[2025-10-28 07:40:05] Processing item 10: {
    "item_code": "SCMPL0038457",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:40:05] Item 10 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038457"
}
[2025-10-28 07:40:05] Processing item 11: {
    "item_code": "SCMPL0038458",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA GREE",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:40:05] Item 11 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038458"
}
[2025-10-28 07:40:05] Processing item 12: {
    "item_code": "SCMPL0038469",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 12,
    "bl": 9
}
[2025-10-28 07:40:05] Item 12 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038469"
}
[2025-10-28 07:40:05] Processing item 13: {
    "item_code": "SCMPL0038470",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 24,
    "bl": 9
}
[2025-10-28 07:40:05] Item 13 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038470"
}
[2025-10-28 07:40:05] Processing item 14: {
    "item_code": "SCMPL0040016",
    "item_name": "M2 MAGIC MOMENTS REMIX SMOOTH FLAVOURED VODKA ORAN",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 100,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:40:05] Item 14 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0040016"
}
[2025-10-28 07:40:05] Processing item 15: {
    "item_code": "SCMPL0038510",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 0,
    "bottles": 6,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 600,
    "tot_bott": 6,
    "bl": 4.5
}
[2025-10-28 07:40:05] Item 15 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038510"
}
[2025-10-28 07:40:05] Processing item 16: {
    "item_code": "SCMPL0038512",
    "item_name": "BACARDI MANGO CHILLI ULTRA DELUXE ORIGINAL MANGO C",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 800,
    "tot_bott": 48,
    "bl": 8.64
}
[2025-10-28 07:40:05] Item 16 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0038512"
}
[2025-10-28 07:40:05] Purchase items processing completed: {
    "successful_items": 17,
    "total_items": 17
}
[2025-10-28 07:40:05] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 12:50:47] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 12:50:47] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-28 12:50:47] POST data: []
[2025-10-28 12:50:47] GET data: []
[2025-10-28 12:50:47] Company ID from session: 1
[2025-10-28 12:50:48] Database connection included
[2025-10-28 12:50:48] License functions included
[2025-10-28 12:50:48] License type: FL-II
[2025-10-28 12:50:48] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 12:50:48] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 12:50:48] Purchase mode: F
[2025-10-28 12:50:48] Next voucher number: 1
[2025-10-28 12:50:48] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 12:50:48] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 12:50:48] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 12:50:48] Suppliers fetched: {
    "count": 36
}
[2025-10-28 12:50:48] Database connection closed
[2025-10-28 12:50:48] === PURCHASE SESSION ENDED ===
[2025-10-28 12:52:23] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 12:52:23] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-28 12:52:23] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-28",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-01",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019028",
            "name": "20-20 Fine Whisky .",
            "size": "90 ML-(96)",
            "bottles_per_case": "96",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "43.20",
            "vv": "0",
            "tot_bott": "480",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "0"
        },
        {
            "code": "SCMPL0026919",
            "name": "6 Bullet Permium Whisky .",
            "size": "375 ML",
            "bottles_per_case": "24",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "90.00",
            "vv": "0",
            "tot_bott": "240",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "10",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "0"
        },
        {
            "code": "SCMKS0027100",
            "name": "6 Bullet Whisky .",
            "size": "90 ML-(96)",
            "bottles_per_case": "96",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "60.48",
            "vv": "0",
            "tot_bott": "672",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "7",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "2340.00",
    "tamt": "2340.00"
}
[2025-10-28 12:52:23] GET data: []
[2025-10-28 12:52:23] Company ID from session: 1
[2025-10-28 12:52:23] Database connection included
[2025-10-28 12:52:23] License functions included
[2025-10-28 12:52:23] License type: FL-II
[2025-10-28 12:52:23] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 12:52:23] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 12:52:23] Purchase mode: F
[2025-10-28 12:52:23] Next voucher number: 1
[2025-10-28 12:52:23] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 12:52:23] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 12:52:23] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 12:52:23] Suppliers fetched: {
    "count": 36
}
[2025-10-28 12:52:23] === FORM SUBMISSION STARTED ===
[2025-10-28 12:52:23] Form data extracted: {
    "date": "2025-10-28",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-01",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ABHI",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "basic_amt": "2340.00",
    "total_amt": "2340.00"
}
[2025-10-28 12:52:23] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-28",
        "ABHI",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "2340.00",
        "7654",
        "2025-10-01",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 12:52:23] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-28 12:52:23] Starting to process purchase items: {
    "item_count": 3
}
[2025-10-28 12:52:23] Processing item 0: {
    "item_code": "SCMPL0019028",
    "item_name": "20-20 Fine Whisky .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 500,
    "tot_bott": 480,
    "bl": 43.2
}
[2025-10-28 12:52:23] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0019028"
}
[2025-10-28 12:52:23] Processing item 1: {
    "item_code": "SCMPL0026919",
    "item_name": "6 Bullet Permium Whisky .",
    "cases": 10,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 1000,
    "tot_bott": 240,
    "bl": 90
}
[2025-10-28 12:52:23] Item 1 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0026919"
}
[2025-10-28 12:52:23] Processing item 2: {
    "item_code": "SCMKS0027100",
    "item_name": "6 Bullet Whisky .",
    "cases": 7,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 840,
    "tot_bott": 672,
    "bl": 60.48
}
[2025-10-28 12:52:23] Item 2 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMKS0027100"
}
[2025-10-28 12:52:23] Purchase items processing completed: {
    "successful_items": 3,
    "total_items": 3
}
[2025-10-28 12:52:23] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-28 13:16:54] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 13:16:54] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-28 13:16:54] POST data: []
[2025-10-28 13:16:54] GET data: []
[2025-10-28 13:16:54] Company ID from session: 1
[2025-10-28 13:16:54] Database connection included
[2025-10-28 13:16:54] License functions included
[2025-10-28 13:16:54] License type: FL-II
[2025-10-28 13:16:54] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 13:16:54] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 13:16:54] Purchase mode: F
[2025-10-28 13:16:54] Next voucher number: 1
[2025-10-28 13:16:54] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 13:16:54] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 13:16:54] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 13:16:54] Suppliers fetched: {
    "count": 36
}
[2025-10-28 13:16:54] Database connection closed
[2025-10-28 13:16:54] === PURCHASE SESSION ENDED ===
[2025-10-28 13:18:09] === NEW PURCHASE SESSION STARTED ===
[2025-10-28 13:18:09] Session data: {
    "user_id": "1",
    "username": "admin",
    "CompID": 1,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Diamond Wine Shop"
}
[2025-10-28 13:18:09] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-28",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-28",
    "inv_no": "",
    "inv_date": "",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "supplier_code": "ABHI",
    "items": [
        {
            "code": "SCMPL0019028",
            "name": "20-20 Fine Whisky .",
            "size": "90 ML-(96)",
            "bottles_per_case": "96",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "43.20",
            "vv": "0",
            "tot_bott": "480",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "5",
            "bottles": "0",
            "case_rate": "100.000",
            "mrp": "0"
        },
        {
            "code": "SCMKS0031549",
            "name": "6 Bullet Whisky .",
            "size": "90 ML (Pet)-96",
            "bottles_per_case": "96",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "86.40",
            "vv": "0",
            "tot_bott": "960",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "10",
            "bottles": "0",
            "case_rate": "800.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "8500.00",
    "tamt": "8500.00"
}
[2025-10-28 13:18:09] GET data: []
[2025-10-28 13:18:09] Company ID from session: 1
[2025-10-28 13:18:09] Database connection included
[2025-10-28 13:18:09] License functions included
[2025-10-28 13:18:09] License type: FL-II
[2025-10-28 13:18:09] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    }
]
[2025-10-28 13:18:09] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M"
]
[2025-10-28 13:18:09] Purchase mode: F
[2025-10-28 13:18:09] Next voucher number: 1
[2025-10-28 13:18:09] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-28 13:18:09] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M"
    ],
    "types": "ssssssssssssss"
}
[2025-10-28 13:18:09] Items fetched from database: {
    "count": 3757,
    "license_filter_applied": true
}
[2025-10-28 13:18:09] Suppliers fetched: {
    "count": 36
}
[2025-10-28 13:18:09] === FORM SUBMISSION STARTED ===
[2025-10-28 13:18:09] Form data extracted: {
    "date": "2025-10-28",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-28",
    "inv_no": "",
    "inv_date": "",
    "supplier_code": "ABHI",
    "supplier_name": "ABHIJIT WINE INDUSTRIES",
    "basic_amt": "8500.00",
    "total_amt": "8500.00"
}
[2025-10-28 13:18:09] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-28",
        "ABHI",
        "FL1305-310825\/7654",
        "1",
        "",
        "",
        "8500.00",
        "7654",
        "2025-10-28",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        1
    ]
}
[2025-10-28 13:18:09] Purchase header inserted successfully: {
    "purchase_id": 1,
    "affected_rows": 1
}
[2025-10-28 13:18:09] Starting to process purchase items: {
    "item_count": 2
}
[2025-10-28 13:18:09] Processing item 0: {
    "item_code": "SCMPL0019028",
    "item_name": "20-20 Fine Whisky .",
    "cases": 5,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 100,
    "amount": 500,
    "tot_bott": 480,
    "bl": 43.2
}
[2025-10-28 13:18:09] Item 0 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMPL0019028"
}
[2025-10-28 13:18:09] Processing item 1: {
    "item_code": "SCMKS0031549",
    "item_name": "6 Bullet Whisky .",
    "cases": 10,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 800,
    "amount": 8000,
    "tot_bott": 960,
    "bl": 86.4
}
[2025-10-28 13:18:09] Item 1 inserted successfully: {
    "purchase_id": 1,
    "item_code": "SCMKS0031549"
}
[2025-10-28 13:18:09] Purchase items processing completed: {
    "successful_items": 2,
    "total_items": 2
}
[2025-10-28 13:18:09] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
[2025-10-30 10:40:29] === NEW PURCHASE SESSION STARTED ===
[2025-10-30 10:40:29] Session data: {
    "user_id": "3",
    "username": "deccan",
    "CompID": 3,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Deccan Wine Shop"
}
[2025-10-30 10:40:29] POST data: []
[2025-10-30 10:40:29] GET data: {
    "mode": "F"
}
[2025-10-30 10:40:29] Company ID from session: 3
[2025-10-30 10:40:29] Database connection included
[2025-10-30 10:40:29] License functions included
[2025-10-30 10:40:29] License type: CL-III
[2025-10-30 10:40:29] Available classes: [
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    }
]
[2025-10-30 10:40:29] Allowed class SGROUP values: [
    "L",
    "O",
    "O",
    "O",
    "O"
]
[2025-10-30 10:40:29] Purchase mode: F
[2025-10-30 10:40:29] Next voucher number: 1
[2025-10-30 10:40:29] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-30 10:40:29] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "L",
        "O",
        "O",
        "O",
        "O"
    ],
    "types": "sssss"
}
[2025-10-30 10:40:29] Items fetched from database: {
    "count": 150,
    "license_filter_applied": true
}
[2025-10-30 10:40:29] Suppliers fetched: {
    "count": 36
}
[2025-10-30 10:40:29] Database connection closed
[2025-10-30 10:40:29] === PURCHASE SESSION ENDED ===
[2025-10-30 10:41:23] === NEW PURCHASE SESSION STARTED ===
[2025-10-30 10:41:23] Session data: {
    "user_id": "3",
    "username": "deccan",
    "CompID": 3,
    "FIN_YEAR_ID": "1",
    "FIN_YEAR_START": "2025-04-01 12:24:30",
    "FIN_YEAR_END": "2026-03-31 12:24:30",
    "FIN_YEAR_DISPLAY": "2025-2026",
    "COMP_NAME": "Deccan Wine Shop"
}
[2025-10-30 10:41:23] POST data: {
    "mode": "F",
    "voc_no": "1",
    "date": "2025-10-30",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-30",
    "inv_no": "",
    "inv_date": "2025-10-30",
    "supplier_name": "AMAR TRADERS",
    "supplier_code": "AMAR",
    "items": [
        {
            "code": "SCMCL0013802",
            "name": "Chak De Badishep Maza .",
            "size": "180 ML (Pet)",
            "bottles_per_case": "12",
            "batch_no": "",
            "auto_batch": "",
            "mfg_month": "",
            "bl": "2.16",
            "vv": "0",
            "tot_bott": "12",
            "free_cases": "0",
            "free_bottles": "0",
            "cases": "1",
            "bottles": "0",
            "case_rate": "120.000",
            "mrp": "0"
        }
    ],
    "cash_disc": "0.00",
    "trade_disc": "0.00",
    "octroi": "0.00",
    "freight": "0.00",
    "stax_per": "0.00",
    "stax_amt": "0.00",
    "tcs_per": "0.00",
    "tcs_amt": "0.00",
    "misc_charg": "0.00",
    "basic_amt": "120.00",
    "tamt": "120.00"
}
[2025-10-30 10:41:23] GET data: {
    "mode": "F"
}
[2025-10-30 10:41:23] Company ID from session: 3
[2025-10-30 10:41:23] Database connection included
[2025-10-30 10:41:23] License functions included
[2025-10-30 10:41:23] License type: CL-III
[2025-10-30 10:41:23] Available classes: [
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    }
]
[2025-10-30 10:41:23] Allowed class SGROUP values: [
    "L",
    "O",
    "O",
    "O",
    "O"
]
[2025-10-30 10:41:23] Purchase mode: F
[2025-10-30 10:41:23] Next voucher number: 1
[2025-10-30 10:41:23] Distinct sizes from database: [
    "50",
    "60",
    "90",
    "170",
    "180",
    "200",
    "250",
    "275",
    "330",
    "355",
    "375",
    "500",
    "650",
    "700",
    "750",
    "1000",
    "1500",
    "1750",
    "2000",
    "3000",
    "4500",
    "15000",
    "20000",
    "30000",
    "50000"
]
[2025-10-30 10:41:23] Items query parameters: {
    "query": "SELECT im.CODE, im.DETAILS, im.DETAILS2, im.PPRICE, im.ITEM_GROUP, im.LIQ_FLAG, im.CLASS,\n                          COALESCE(sc.BOTTLE_PER_CASE, 12) AS BOTTLE_PER_CASE,\n                          CONCAT('SCM', im.CODE) AS SCM_CODE\n                     FROM tblitemmaster im\n                     LEFT JOIN tblsubclass sc ON im.ITEM_GROUP = sc.ITEM_GROUP AND im.LIQ_FLAG = sc.LIQ_FLAG\n                    WHERE im.CLASS IN (?,?,?,?,?)  -- REMOVED: im.LIQ_FLAG = ?\n                 ORDER BY im.DETAILS",
    "params": [
        "L",
        "O",
        "O",
        "O",
        "O"
    ],
    "types": "sssss"
}
[2025-10-30 10:41:23] Items fetched from database: {
    "count": 150,
    "license_filter_applied": true
}
[2025-10-30 10:41:23] Suppliers fetched: {
    "count": 36
}
[2025-10-30 10:41:23] === FORM SUBMISSION STARTED ===
[2025-10-30 10:41:23] Form data extracted: {
    "date": "2025-10-30",
    "voc_no": "1",
    "auto_tp_no": "FL1305-310825\/7654",
    "tp_no": "7654",
    "tp_date": "2025-10-30",
    "inv_no": "",
    "inv_date": "2025-10-30",
    "supplier_code": "AMAR",
    "supplier_name": "AMAR TRADERS",
    "basic_amt": "120.00",
    "total_amt": "120.00"
}
[2025-10-30 10:41:23] Purchase header insert query: {
    "query": "INSERT INTO tblpurchases (\n        DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, \n        TPNO, TP_DATE, SCHDIS, CASHDIS, OCTROI, FREIGHT, STAX_PER, STAX_AMT, \n        TCS_PER, TCS_AMT, MISC_CHARG, PUR_FLAG, CompID\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
    "parameters": [
        "2025-10-30",
        "AMAR",
        "FL1305-310825\/7654",
        "1",
        "",
        "2025-10-30",
        "120.00",
        "7654",
        "2025-10-30",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "T",
        3
    ]
}
[2025-10-30 10:41:23] Purchase header inserted successfully: {
    "purchase_id": 2,
    "affected_rows": 1
}
[2025-10-30 10:41:23] Starting to process purchase items: {
    "item_count": 1
}
[2025-10-30 10:41:23] Processing item 0: {
    "item_code": "SCMCL0013802",
    "item_name": "Chak De Badishep Maza .",
    "cases": 1,
    "bottles": 0,
    "free_cases": 0,
    "free_bottles": 0,
    "case_rate": 120,
    "amount": 120,
    "tot_bott": 12,
    "bl": 2.16
}
[2025-10-30 10:41:23] Item 0 inserted successfully: {
    "purchase_id": 2,
    "item_code": "SCMCL0013802"
}
[2025-10-30 10:41:23] Purchase items processing completed: {
    "successful_items": 1,
    "total_items": 1
}
[2025-10-30 10:41:23] === FORM SUBMISSION COMPLETED SUCCESSFULLY ===
