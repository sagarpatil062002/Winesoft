[2026-01-10 13:47:34] === IMPORT PURCHASE STARTED ===
[2026-01-10 13:47:34] Company ID from session: 1
[2026-01-10 13:47:34] Database connection included
[2026-01-10 13:47:34] License functions included
[2026-01-10 13:47:34] License type: FL-II
[2026-01-10 13:47:34] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "15",
        "SGROUP": "I",
        "DESC": "Imported",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "16",
        "SGROUP": "Q",
        "DESC": "Wine Imp",
        "LIQ_FLAG": "F"
    }
]
[2026-01-10 13:47:34] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M",
    "I",
    "Q"
]
[2026-01-10 13:47:34] === FORM SUBMISSION STARTED ===
[2026-01-10 13:47:34] Import settings: {
    "mode": "ALL",
    "default_status": "T",
    "update_mrp": true,
    "update_stock": true
}
[2026-01-10 13:47:34] Processing CSV file: C:\xampp\tmp\php74C3.tmp
[2026-01-10 13:47:34] Skipping metadata row 1: ﻿Licensee: DIAMOND WINE SHOP (3)
[2026-01-10 13:47:34] Skipping metadata row 2: TP Details
[2026-01-10 13:47:34] CSV Headers found: [
    "received_date",
    "auto_tp_no",
    "manual_tp_no",
    "tp_date",
    "district",
    "scm_party_code",
    "party_name",
    "srno",
    "scm_item_code",
    "item_name",
    "size",
    "qty_cases",
    "qty_bottles",
    "batch_no",
    "mfg_month",
    "mrp",
    "bl",
    "vv_",
    "total_bot_qty",
    "transporter_name",
    "transporter_address",
    "route",
    "vehicle_no",
    "driver_name",
    "driver_mob_no",
    "driver_lic_no",
    "driver_city"
]
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "5571",
    "date": "2025-11-30",
    "supplier": "PRITHVIRAJ TRADERS"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "4807",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "4809",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "4816",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "4818",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "4820",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "12971",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "12972",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "12943",
    "date": "2025-11-30",
    "supplier": "BHARAT WINES"
}
[2026-01-10 13:47:34] Created new TP group: {
    "tp_no": "9502",
    "date": "2025-11-30",
    "supplier": "VISHAL TRADERS"
}
[2026-01-10 13:47:34] Found TP groups: {
    "count": 10,
    "tps": [
        5571,
        4807,
        4809,
        4816,
        4818,
        4820,
        12971,
        12972,
        12943,
        9502
    ]
}
[2026-01-10 13:47:34] Processing TP groups: {
    "total_tps": 10
}
[2026-01-10 13:47:34] Loaded items for batch lookup: {
    "item_count": 7516
}
[2026-01-10 13:47:34] === Processing TP: 5571 ===
[2026-01-10 13:47:34] Finding supplier match for: PRITHVIRAJ TRADERS
[2026-01-10 13:47:34] No supplier match found
[2026-01-10 13:47:34] Supplier match result: {
    "input": "PRITHVIRAJ TRADERS",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 13:47:34] Voucher number calculated: {
    "max_voc": 9,
    "next_voc": 10
}
[2026-01-10 13:47:34] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 13:47:34] Item calculation: {
    "scm_item_code": "SCMBR0018145",
    "cases": 10,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 8000,
    "total_bottles": 120,
    "total_amount_so_far": 8000
}
[2026-01-10 13:47:34] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 13:47:34] Item calculation: {
    "scm_item_code": "SCMPL0041500",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 8120
}
[2026-01-10 13:47:34] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 13:47:34] Item calculation: {
    "scm_item_code": "SCMPL0041501",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 8920
}
[2026-01-10 13:47:34] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 13:47:34] Item calculation: {
    "scm_item_code": "SCMPL0041503",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 9420
}
[2026-01-10 13:47:34] cleanItemCode: 'SCMPL0042876' -> 'PL0042876'
[2026-01-10 13:47:34] Item not found or license restricted: {
    "scm_item_code": "SCMPL0042876",
    "clean_code": "PL0042876",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 13:47:34] TP details: {
    "auto_tp_no": "FL119851-301125\/5571",
    "manual_tp_no": "5571",
    "tp_date": "2025-11-30"
}
[2026-01-10 13:47:34] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, '', '0000-00-00', ?, ?, ?, ?, ?)
[2026-01-10 14:15:46] === IMPORT PURCHASE STARTED ===
[2026-01-10 14:15:46] Company ID from session: 1
[2026-01-10 14:15:46] Database connection included
[2026-01-10 14:15:46] License functions included
[2026-01-10 14:15:46] License type: FL-II
[2026-01-10 14:15:46] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "15",
        "SGROUP": "I",
        "DESC": "Imported",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "16",
        "SGROUP": "Q",
        "DESC": "Wine Imp",
        "LIQ_FLAG": "F"
    }
]
[2026-01-10 14:15:46] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M",
    "I",
    "Q"
]
[2026-01-10 14:15:46] === FORM SUBMISSION STARTED ===
[2026-01-10 14:15:46] Import settings: {
    "mode": "ALL",
    "default_status": "T",
    "update_mrp": true,
    "update_stock": true
}
[2026-01-10 14:15:46] Processing CSV file: C:\xampp\tmp\php451A.tmp
[2026-01-10 14:15:46] Skipping metadata row 1: ﻿Licensee: DIAMOND WINE SHOP (3)
[2026-01-10 14:15:46] Skipping metadata row 2: TP Details
[2026-01-10 14:15:46] CSV Headers found: [
    "received_date",
    "auto_tp_no",
    "manual_tp_no",
    "tp_date",
    "district",
    "scm_party_code",
    "party_name",
    "srno",
    "scm_item_code",
    "item_name",
    "size",
    "qty_cases",
    "qty_bottles",
    "batch_no",
    "mfg_month",
    "mrp",
    "bl",
    "vv_",
    "total_bot_qty",
    "transporter_name",
    "transporter_address",
    "route",
    "vehicle_no",
    "driver_name",
    "driver_mob_no",
    "driver_lic_no",
    "driver_city"
]
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "5571",
    "date": "2025-11-30",
    "supplier": "PRITHVIRAJ TRADERS"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "4807",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "4809",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "4816",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "4818",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "4820",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "12971",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "12972",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "12943",
    "date": "2025-11-30",
    "supplier": "BHARAT WINES"
}
[2026-01-10 14:15:46] Created new TP group: {
    "tp_no": "9502",
    "date": "2025-11-30",
    "supplier": "VISHAL TRADERS"
}
[2026-01-10 14:15:46] Found TP groups: {
    "count": 10,
    "tps": [
        5571,
        4807,
        4809,
        4816,
        4818,
        4820,
        12971,
        12972,
        12943,
        9502
    ]
}
[2026-01-10 14:15:46] Processing TP groups: {
    "total_tps": 10
}
[2026-01-10 14:15:46] Loaded items for batch lookup: {
    "item_count": 7516
}
[2026-01-10 14:15:46] === Processing TP: 5571 ===
[2026-01-10 14:15:46] Finding supplier match for: PRITHVIRAJ TRADERS
[2026-01-10 14:15:46] No supplier match found
[2026-01-10 14:15:46] Supplier match result: {
    "input": "PRITHVIRAJ TRADERS",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 14:15:46] Voucher number calculated: {
    "max_voc": 9,
    "next_voc": 10
}
[2026-01-10 14:15:46] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 14:15:46] Item calculation: {
    "scm_item_code": "SCMBR0018145",
    "cases": 10,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 8000,
    "total_bottles": 120,
    "total_amount_so_far": 8000
}
[2026-01-10 14:15:46] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 14:15:46] Item calculation: {
    "scm_item_code": "SCMPL0041500",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 8120
}
[2026-01-10 14:15:46] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 14:15:46] Item calculation: {
    "scm_item_code": "SCMPL0041501",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 8920
}
[2026-01-10 14:15:46] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 14:15:46] Item calculation: {
    "scm_item_code": "SCMPL0041503",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 9420
}
[2026-01-10 14:15:46] cleanItemCode: 'SCMPL0042876' -> 'PL0042876'
[2026-01-10 14:15:46] Item not found or license restricted: {
    "scm_item_code": "SCMPL0042876",
    "clean_code": "PL0042876",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 14:15:46] TP details: {
    "auto_tp_no": "FL119851-301125\/5571",
    "manual_tp_no": "5571",
    "tp_date": "2025-11-30"
}
[2026-01-10 14:15:46] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 14:15:46] Purchase header inserted: {
    "purchase_id": 11,
    "voucher_no": 10,
    "affected_rows": -1
}
[2026-01-10 14:15:46] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 14:15:46] Inserting item detail: {
    "purchase_id": 11,
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "bl": 78,
    "vv": 0,
    "amount": 8000
}
[2026-01-10 14:28:45] === IMPORT PURCHASE STARTED ===
[2026-01-10 14:28:45] Company ID from session: 1
[2026-01-10 14:28:45] Database connection included
[2026-01-10 14:28:45] License functions included
[2026-01-10 14:28:45] License type: FL-II
[2026-01-10 14:28:45] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "15",
        "SGROUP": "I",
        "DESC": "Imported",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "16",
        "SGROUP": "Q",
        "DESC": "Wine Imp",
        "LIQ_FLAG": "F"
    }
]
[2026-01-10 14:28:45] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M",
    "I",
    "Q"
]
[2026-01-10 14:28:45] === FORM SUBMISSION STARTED ===
[2026-01-10 14:28:45] Import settings: {
    "mode": "ALL",
    "default_status": "T",
    "update_mrp": true,
    "update_stock": true
}
[2026-01-10 14:28:45] Processing CSV file: C:\xampp\tmp\php2880.tmp
[2026-01-10 14:28:45] Skipping metadata row 1: ﻿Licensee: DIAMOND WINE SHOP (3)
[2026-01-10 14:28:45] Skipping metadata row 2: TP Details
[2026-01-10 14:28:45] CSV Headers found: [
    "received_date",
    "auto_tp_no",
    "manual_tp_no",
    "tp_date",
    "district",
    "scm_party_code",
    "party_name",
    "srno",
    "scm_item_code",
    "item_name",
    "size",
    "qty_cases",
    "qty_bottles",
    "batch_no",
    "mfg_month",
    "mrp",
    "bl",
    "vv_",
    "total_bot_qty",
    "transporter_name",
    "transporter_address",
    "route",
    "vehicle_no",
    "driver_name",
    "driver_mob_no",
    "driver_lic_no",
    "driver_city"
]
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "5571",
    "date": "2025-11-30",
    "supplier": "PRITHVIRAJ TRADERS"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "4807",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "4809",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "4816",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "4818",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "4820",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "12971",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "12972",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "12943",
    "date": "2025-11-30",
    "supplier": "BHARAT WINES"
}
[2026-01-10 14:28:45] Created new TP group: {
    "tp_no": "9502",
    "date": "2025-11-30",
    "supplier": "VISHAL TRADERS"
}
[2026-01-10 14:28:45] Found TP groups: {
    "count": 10,
    "tps": [
        5571,
        4807,
        4809,
        4816,
        4818,
        4820,
        12971,
        12972,
        12943,
        9502
    ]
}
[2026-01-10 14:28:45] Processing TP groups: {
    "total_tps": 10
}
[2026-01-10 14:28:45] Loaded items for batch lookup: {
    "item_count": 7516
}
[2026-01-10 14:28:45] === Processing TP: 5571 ===
[2026-01-10 14:28:45] Finding supplier match for: PRITHVIRAJ TRADERS
[2026-01-10 14:28:45] No supplier match found
[2026-01-10 14:28:45] Supplier match result: {
    "input": "PRITHVIRAJ TRADERS",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 14:28:45] Voucher number calculated: {
    "max_voc": 9,
    "next_voc": 10
}
[2026-01-10 14:28:45] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 14:28:45] Item calculation: {
    "scm_item_code": "SCMBR0018145",
    "cases": 10,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 8000,
    "total_bottles": 120,
    "total_amount_so_far": 8000
}
[2026-01-10 14:28:45] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 14:28:45] Item calculation: {
    "scm_item_code": "SCMPL0041500",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 8120
}
[2026-01-10 14:28:45] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 14:28:45] Item calculation: {
    "scm_item_code": "SCMPL0041501",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 8920
}
[2026-01-10 14:28:45] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 14:28:45] Item calculation: {
    "scm_item_code": "SCMPL0041503",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 9420
}
[2026-01-10 14:28:45] cleanItemCode: 'SCMPL0042876' -> 'PL0042876'
[2026-01-10 14:28:45] Item not found or license restricted: {
    "scm_item_code": "SCMPL0042876",
    "clean_code": "PL0042876",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 14:28:45] TP details: {
    "auto_tp_no": "FL119851-301125\/5571",
    "manual_tp_no": "5571",
    "tp_date": "2025-11-30"
}
[2026-01-10 14:28:45] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 14:28:45] Purchase header inserted: {
    "purchase_id": 12,
    "voucher_no": 10,
    "affected_rows": -1
}
[2026-01-10 14:28:45] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 14:28:45] Inserting item detail: {
    "purchase_id": 12,
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "bl": 78,
    "vv": 0,
    "amount": 8000
}
[2026-01-10 15:00:06] === IMPORT PURCHASE STARTED ===
[2026-01-10 15:00:06] Company ID from session: 1
[2026-01-10 15:00:06] Database connection included
[2026-01-10 15:00:06] License functions included
[2026-01-10 15:00:06] License type: FL-II
[2026-01-10 15:00:06] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "15",
        "SGROUP": "I",
        "DESC": "Imported",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "16",
        "SGROUP": "Q",
        "DESC": "Wine Imp",
        "LIQ_FLAG": "F"
    }
]
[2026-01-10 15:00:06] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M",
    "I",
    "Q"
]
[2026-01-10 15:00:06] === FORM SUBMISSION STARTED ===
[2026-01-10 15:00:06] Import settings: {
    "mode": "ALL",
    "default_status": "T",
    "update_mrp": true,
    "update_stock": true
}
[2026-01-10 15:00:06] Processing CSV file: C:\xampp\tmp\phpDB7E.tmp
[2026-01-10 15:00:06] Skipping metadata row 1: ﻿Licensee: DIAMOND WINE SHOP (3)
[2026-01-10 15:00:06] Skipping metadata row 2: TP Details
[2026-01-10 15:00:06] CSV Headers found: [
    "received_date",
    "auto_tp_no",
    "manual_tp_no",
    "tp_date",
    "district",
    "scm_party_code",
    "party_name",
    "srno",
    "scm_item_code",
    "item_name",
    "size",
    "qty_cases",
    "qty_bottles",
    "batch_no",
    "mfg_month",
    "mrp",
    "bl",
    "vv_",
    "total_bot_qty",
    "transporter_name",
    "transporter_address",
    "route",
    "vehicle_no",
    "driver_name",
    "driver_mob_no",
    "driver_lic_no",
    "driver_city"
]
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "5571",
    "date": "2025-11-30",
    "supplier": "PRITHVIRAJ TRADERS"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "4807",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "4809",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "4816",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "4818",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "4820",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "12971",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "12972",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "12943",
    "date": "2025-11-30",
    "supplier": "BHARAT WINES"
}
[2026-01-10 15:00:06] Created new TP group: {
    "tp_no": "9502",
    "date": "2025-11-30",
    "supplier": "VISHAL TRADERS"
}
[2026-01-10 15:00:06] Found TP groups: {
    "count": 10,
    "tps": [
        5571,
        4807,
        4809,
        4816,
        4818,
        4820,
        12971,
        12972,
        12943,
        9502
    ]
}
[2026-01-10 15:00:06] Processing TP groups: {
    "total_tps": 10
}
[2026-01-10 15:00:06] Loaded items for batch lookup: {
    "item_count": 7516
}
[2026-01-10 15:00:06] === Processing TP: 5571 ===
[2026-01-10 15:00:06] Finding supplier match for: PRITHVIRAJ TRADERS
[2026-01-10 15:00:06] No supplier match found
[2026-01-10 15:00:06] Supplier match result: {
    "input": "PRITHVIRAJ TRADERS",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:06] Voucher number calculated: {
    "max_voc": 9,
    "next_voc": 10
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 15:00:06] Item calculation: {
    "scm_item_code": "SCMBR0018145",
    "cases": 10,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 8000,
    "total_bottles": 120,
    "total_amount_so_far": 8000
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 15:00:06] Item calculation: {
    "scm_item_code": "SCMPL0041500",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 8120
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 15:00:06] Item calculation: {
    "scm_item_code": "SCMPL0041501",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 8920
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 15:00:06] Item calculation: {
    "scm_item_code": "SCMPL0041503",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 9420
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0042876' -> 'PL0042876'
[2026-01-10 15:00:06] Item not found or license restricted: {
    "scm_item_code": "SCMPL0042876",
    "clean_code": "PL0042876",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 15:00:06] TP details: {
    "auto_tp_no": "FL119851-301125\/5571",
    "manual_tp_no": "5571",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:06] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:06] Purchase header inserted: {
    "purchase_id": 13,
    "voucher_no": 10,
    "affected_rows": -1
}
[2026-01-10 15:00:06] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:06] Inserting item detail: {
    "purchase_id": 13,
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "bl": 78,
    "vv": 0,
    "amount": 8000
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 15:00:06] Updating MRP for item: {
    "item_code": "BR0018145",
    "mrp": 165
}
[2026-01-10 15:00:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "BR0018145",
    "mrp": 165
}
[2026-01-10 15:00:06] Updating stock for item: {
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:06] Month is archived, updating archive table with cascading
[2026-01-10 15:00:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMBR0018145",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 15:00:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMBR0018145",
    "purchaseDay": "30"
}
[2026-01-10 15:00:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:06] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMBR0018145",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 132
}
[2026-01-10 15:00:06] Cascading completed up to current date
[2026-01-10 15:00:06] Inserting item detail: {
    "purchase_id": 13,
    "item_code": "SCMPL0041500",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 15:00:06] Updating MRP for item: {
    "item_code": "PL0041500",
    "mrp": 1070
}
[2026-01-10 15:00:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041500",
    "mrp": 1070
}
[2026-01-10 15:00:06] Updating stock for item: {
    "item_code": "SCMPL0041500",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:06] Month is archived, updating archive table with cascading
[2026-01-10 15:00:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041500",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041500",
    "purchaseDay": "30"
}
[2026-01-10 15:00:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:06] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041500",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:06] Cascading completed up to current date
[2026-01-10 15:00:06] Inserting item detail: {
    "purchase_id": 13,
    "item_code": "SCMPL0041501",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 15:00:06] Updating MRP for item: {
    "item_code": "PL0041501",
    "mrp": 520
}
[2026-01-10 15:00:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041501",
    "mrp": 520
}
[2026-01-10 15:00:06] Updating stock for item: {
    "item_code": "SCMPL0041501",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:06] Month is archived, updating archive table with cascading
[2026-01-10 15:00:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041501",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041501",
    "purchaseDay": "30"
}
[2026-01-10 15:00:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:06] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041501",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:06] Cascading completed up to current date
[2026-01-10 15:00:06] Inserting item detail: {
    "purchase_id": 13,
    "item_code": "SCMPL0041503",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 15:00:06] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 15:00:06] Updating MRP for item: {
    "item_code": "PL0041503",
    "mrp": 250
}
[2026-01-10 15:00:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041503",
    "mrp": 250
}
[2026-01-10 15:00:06] Updating stock for item: {
    "item_code": "SCMPL0041503",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:06] Month is archived, updating archive table with cascading
[2026-01-10 15:00:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041503",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 15:00:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041503",
    "purchaseDay": "30"
}
[2026-01-10 15:00:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:06] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041503",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 240
}
[2026-01-10 15:00:06] Cascading completed up to current date
[2026-01-10 15:00:06] Items inserted: {
    "total_items": 4,
    "expected_items": 4
}
[2026-01-10 15:00:07] Successfully imported TP: {
    "tp_no": 5571,
    "purchase_id": 13,
    "voucher_no": 10,
    "items_inserted": 4
}
[2026-01-10 15:00:07] === Processing TP: 4807 ===
[2026-01-10 15:00:07] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 15:00:07] No supplier match found
[2026-01-10 15:00:07] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:07] Voucher number calculated: {
    "max_voc": 10,
    "next_voc": 11
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 800
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 1600
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 2400
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 3200
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 3280
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 3360
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 80,
    "total_bottles": 100,
    "total_amount_so_far": 3440
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 3840
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 4240
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 10,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1000,
    "total_bottles": 480,
    "total_amount_so_far": 5240
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 6740
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 7240
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 7360
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 7480
}
[2026-01-10 15:00:07] TP details: {
    "auto_tp_no": "FL1249-301125\/4777",
    "manual_tp_no": "4807",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:07] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:07] Purchase header inserted: {
    "purchase_id": 14,
    "voucher_no": 11,
    "affected_rows": -1
}
[2026-01-10 15:00:07] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 9
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 200
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 700
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1200
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010088",
    "total_bottles": 480,
    "bl": 86.4,
    "vv": 0,
    "amount": 1000
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 480,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 480
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 609
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1329
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1569
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 14,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:07] Month is archived, updating archive table with cascading
[2026-01-10 15:00:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:07] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 15:00:07] Cascading completed up to current date
[2026-01-10 15:00:07] Items inserted: {
    "total_items": 14,
    "expected_items": 14
}
[2026-01-10 15:00:07] Successfully imported TP: {
    "tp_no": 4807,
    "purchase_id": 14,
    "voucher_no": 11,
    "items_inserted": 14
}
[2026-01-10 15:00:07] === Processing TP: 4809 ===
[2026-01-10 15:00:07] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 15:00:07] No supplier match found
[2026-01-10 15:00:07] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:07] Voucher number calculated: {
    "max_voc": 11,
    "next_voc": 12
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 240,
    "total_bottles": 48,
    "total_amount_so_far": 240
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 10,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 800,
    "total_bottles": 1000,
    "total_amount_so_far": 1040
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 1120
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 1920
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 35,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 3500,
    "total_bottles": 1680,
    "total_amount_so_far": 5420
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:07] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 6220
}
[2026-01-10 15:00:07] TP details: {
    "auto_tp_no": "FL1249-301125\/4779",
    "manual_tp_no": "4809",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:07] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:07] Purchase header inserted: {
    "purchase_id": 15,
    "voucher_no": 12,
    "affected_rows": -1
}
[2026-01-10 15:00:07] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:07] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0010111",
    "total_bottles": 48,
    "bl": 18,
    "vv": 0,
    "amount": 240
}
[2026-01-10 15:00:07] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:07] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:07] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "bl": 90,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 1000
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2200
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 27
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0010088",
    "total_bottles": 1680,
    "bl": 302.4,
    "vv": 0,
    "amount": 3500
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 1680,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 1680
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3249
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 15,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 36
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Items inserted: {
    "total_items": 6,
    "expected_items": 6
}
[2026-01-10 15:00:08] Successfully imported TP: {
    "tp_no": 4809,
    "purchase_id": 15,
    "voucher_no": 12,
    "items_inserted": 6
}
[2026-01-10 15:00:08] === Processing TP: 4816 ===
[2026-01-10 15:00:08] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 15:00:08] No supplier match found
[2026-01-10 15:00:08] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:08] Voucher number calculated: {
    "max_voc": 12,
    "next_voc": 13
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 1600
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 3100
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 4600
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 5000
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 5400
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 5520
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 5640
}
[2026-01-10 15:00:08] TP details: {
    "auto_tp_no": "FL1249-301125\/4786",
    "manual_tp_no": "4816",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:08] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:08] Purchase header inserted: {
    "purchase_id": 16,
    "voucher_no": 13,
    "affected_rows": -1
}
[2026-01-10 15:00:08] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 60
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3969
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4689
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2700
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3200
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 16,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 15:00:08] Cascading completed up to current date
[2026-01-10 15:00:08] Items inserted: {
    "total_items": 8,
    "expected_items": 8
}
[2026-01-10 15:00:08] Successfully imported TP: {
    "tp_no": 4816,
    "purchase_id": 16,
    "voucher_no": 13,
    "items_inserted": 8
}
[2026-01-10 15:00:08] === Processing TP: 4818 ===
[2026-01-10 15:00:08] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 15:00:08] No supplier match found
[2026-01-10 15:00:08] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:08] Voucher number calculated: {
    "max_voc": 13,
    "next_voc": 14
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 120
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 920
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 10,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 800,
    "total_bottles": 1000,
    "total_amount_so_far": 1720
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 40,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 4000,
    "total_bottles": 1920,
    "total_amount_so_far": 5720
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 18,
    "total_amount_so_far": 5880
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:08] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 1600,
    "total_bottles": 12,
    "total_amount_so_far": 7480
}
[2026-01-10 15:00:08] TP details: {
    "auto_tp_no": "FL1249-301125\/4788",
    "manual_tp_no": "4818",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:08] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:08] Purchase header inserted: {
    "purchase_id": 17,
    "voucher_no": 14,
    "affected_rows": -1
}
[2026-01-10 15:00:08] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:08] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:08] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 15:00:08] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 15:00:08] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:08] Month is archived, updating archive table with cascading
[2026-01-10 15:00:08] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:08] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 15:00:08] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:08] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:08] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:08] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:08] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:08] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 168
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "bl": 90,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 1000
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4200
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0010088",
    "total_bottles": 1920,
    "bl": 345.6,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 1920,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 1920
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6609
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0010113",
    "total_bottles": 18,
    "bl": 18,
    "vv": 0,
    "amount": 160
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 18,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 18
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 45
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 17,
    "item_code": "SCMPL0035192",
    "total_bottles": 12,
    "bl": 24,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 30
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Items inserted: {
    "total_items": 6,
    "expected_items": 6
}
[2026-01-10 15:00:09] Successfully imported TP: {
    "tp_no": 4818,
    "purchase_id": 17,
    "voucher_no": 14,
    "items_inserted": 6
}
[2026-01-10 15:00:09] === Processing TP: 4820 ===
[2026-01-10 15:00:09] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 15:00:09] No supplier match found
[2026-01-10 15:00:09] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "",
    "found_name": "Not found"
}
[2026-01-10 15:00:09] Voucher number calculated: {
    "max_voc": 14,
    "next_voc": 15
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 500
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 80,
    "total_bottles": 100,
    "total_amount_so_far": 580
}
[2026-01-10 15:00:09] TP details: {
    "auto_tp_no": "FL1249-301125\/4790",
    "manual_tp_no": "4820",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:09] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:09] Purchase header inserted: {
    "purchase_id": 18,
    "voucher_no": 15,
    "affected_rows": -1
}
[2026-01-10 15:00:09] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 18,
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6849
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 18,
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4300
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Items inserted: {
    "total_items": 2,
    "expected_items": 2
}
[2026-01-10 15:00:09] Successfully imported TP: {
    "tp_no": 4820,
    "purchase_id": 18,
    "voucher_no": 15,
    "items_inserted": 2
}
[2026-01-10 15:00:09] === Processing TP: 12971 ===
[2026-01-10 15:00:09] Finding supplier match for: AMAR TRADERS
[2026-01-10 15:00:09] Exact match found: {
    "CODE": "AMAR",
    "DETAILS": "AMAR TRADERS"
}
[2026-01-10 15:00:09] Supplier match result: {
    "input": "AMAR TRADERS",
    "found_code": "AMAR",
    "found_name": "AMAR TRADERS"
}
[2026-01-10 15:00:09] Voucher number calculated: {
    "max_voc": 15,
    "next_voc": 16
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024580' -> 'PL0024580'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024580",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 100,
    "amount": 100,
    "total_bottles": 100,
    "total_amount_so_far": 100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024581",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 96,
    "total_amount_so_far": 340
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024581",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 96,
    "total_amount_so_far": 580
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024582",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 1380
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024582",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 2180
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024583' -> 'PL0024583'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0024583",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 12,
    "total_amount_so_far": 2260
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028276' -> 'PL0028276'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0028276",
    "cases": 3,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 2400,
    "total_bottles": 144,
    "total_amount_so_far": 4660
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028278' -> 'PL0028278'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0028278",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 4780
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028357' -> 'PL0028357'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0028357",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 18,
    "total_amount_so_far": 4940
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0030963' -> 'PL0030963'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0030963",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 96,
    "total_amount_so_far": 5100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031271",
    "cases": 0,
    "bottles": 2,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 2,
    "total_amount_so_far": 5340
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031271",
    "cases": 1,
    "bottles": 10,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 1320,
    "total_bottles": 22,
    "total_amount_so_far": 6660
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031272' -> 'PL0031272'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031272",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 100,
    "total_bottles": 24,
    "total_amount_so_far": 6760
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0036599' -> 'PL0036599'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0036599",
    "cases": 3,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 144,
    "total_amount_so_far": 7000
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0039947' -> 'PL0039947'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0039947",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 96,
    "amount": 120,
    "total_bottles": 96,
    "total_amount_so_far": 7120
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0036598' -> 'PL0036598'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0036598",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 48,
    "total_amount_so_far": 7920
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031274' -> 'PL0031274'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031274",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 100,
    "total_bottles": 12,
    "total_amount_so_far": 8020
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031275' -> 'PL0031275'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031275",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 24,
    "amount": 80,
    "total_bottles": 24,
    "total_amount_so_far": 8100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031945",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 500,
    "total_bottles": 120,
    "total_amount_so_far": 8600
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031945",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 500,
    "total_bottles": 120,
    "total_amount_so_far": 9100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0031946' -> 'PL0031946'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0031946",
    "cases": 5,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 4000,
    "total_bottles": 120,
    "total_amount_so_far": 13100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0038461' -> 'PL0038461'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0038461",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 13220
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0038467' -> 'PL0038467'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0038467",
    "cases": 3,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 2400,
    "total_bottles": 144,
    "total_amount_so_far": 15620
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0038472' -> 'PL0038472'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0038472",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 96,
    "amount": 1600,
    "total_bottles": 192,
    "total_amount_so_far": 17220
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0036420' -> 'PL0036420'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0036420",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 96,
    "amount": 1600,
    "total_bottles": 192,
    "total_amount_so_far": 18820
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0040014' -> 'PL0040014'
[2026-01-10 15:00:09] Item calculation: {
    "scm_item_code": "SCMPL0040014",
    "cases": 6,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 600,
    "total_bottles": 288,
    "total_amount_so_far": 19420
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMKS0041677' -> 'KS0041677'
[2026-01-10 15:00:09] Item not found or license restricted: {
    "scm_item_code": "SCMKS0041677",
    "clean_code": "KS0041677",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 15:00:09] TP details: {
    "auto_tp_no": "FL1305-301125\/12971",
    "manual_tp_no": "12971",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:09] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:09] Purchase header inserted: {
    "purchase_id": 19,
    "voucher_no": 16,
    "affected_rows": -1
}
[2026-01-10 15:00:09] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024580",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024580' -> 'PL0024580'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024580",
    "mrp": 135
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024580",
    "mrp": 135
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024580",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024580",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024580",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024580",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 100
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 240
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024581",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 240
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024581",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024582",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024582",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0024583",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0024583' -> 'PL0024583'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0024583",
    "mrp": 1025
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024583",
    "mrp": 1025
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0024583",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024583",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024583",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024583",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0028276",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 2400
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028276' -> 'PL0028276'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0028276",
    "mrp": 205
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028276",
    "mrp": 205
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0028276",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028276",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028276",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028276",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0028278",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028278' -> 'PL0028278'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0028278",
    "mrp": 860
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028278",
    "mrp": 860
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0028278",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028278",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028278",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028278",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:09] Cascading completed up to current date
[2026-01-10 15:00:09] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0028357",
    "total_bottles": 18,
    "bl": 18,
    "vv": 0,
    "amount": 160
}
[2026-01-10 15:00:09] cleanItemCode: 'SCMPL0028357' -> 'PL0028357'
[2026-01-10 15:00:09] Updating MRP for item: {
    "item_code": "PL0028357",
    "mrp": 1140
}
[2026-01-10 15:00:09] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028357",
    "mrp": 1140
}
[2026-01-10 15:00:09] Updating stock for item: {
    "item_code": "SCMPL0028357",
    "total_bottles": 18,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:09] Month is archived, updating archive table with cascading
[2026-01-10 15:00:09] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028357",
    "dayOfMonth": "30",
    "totalBottles": 18
}
[2026-01-10 15:00:09] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028357",
    "purchaseDay": "30"
}
[2026-01-10 15:00:09] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:09] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:09] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028357",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:09] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:09] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:09] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0030963",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 160
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0030963' -> 'PL0030963'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0030963",
    "mrp": 440
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0030963",
    "mrp": 440
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0030963",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0030963",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0030963",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0030963",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031271",
    "total_bottles": 2,
    "bl": 1.5,
    "vv": 0,
    "amount": 240
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031271",
    "total_bottles": 2,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "dayOfMonth": "30",
    "totalBottles": 2
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031271",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031271",
    "total_bottles": 22,
    "bl": 16.5,
    "vv": 0,
    "amount": 1320
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031271",
    "total_bottles": 22,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "dayOfMonth": "30",
    "totalBottles": 22
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031271",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031272",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031272' -> 'PL0031272'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031272",
    "mrp": 685
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031272",
    "mrp": 685
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031272",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031272",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031272",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031272",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0036599",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 240
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0036599' -> 'PL0036599'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0036599",
    "mrp": 330
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036599",
    "mrp": 330
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0036599",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036599",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036599",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036599",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 156
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0039947",
    "total_bottles": 96,
    "bl": 8.64,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0039947' -> 'PL0039947'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0039947",
    "mrp": 165
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0039947",
    "mrp": 165
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0039947",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0039947",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0039947",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0039947",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0036598",
    "total_bottles": 48,
    "bl": 8.64,
    "vv": 0,
    "amount": 800
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0036598' -> 'PL0036598'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0036598",
    "mrp": 400
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036598",
    "mrp": 400
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0036598",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036598",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036598",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036598",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 60
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031274",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031274' -> 'PL0031274'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031274",
    "mrp": 1600
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031274",
    "mrp": 1600
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031274",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031274",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031274",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031274",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 13
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031275",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031275' -> 'PL0031275'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031275",
    "mrp": 800
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031275",
    "mrp": 800
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031275",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031275",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031275",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031275",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 500
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031945",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 123
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 500
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031945",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 243
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0031946",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0031946' -> 'PL0031946'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0031946",
    "mrp": 155
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031946",
    "mrp": 155
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0031946",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031946",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031946",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031946",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0038461",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0038461' -> 'PL0038461'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0038461",
    "mrp": 1120
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038461",
    "mrp": 1120
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0038461",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038461",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038461",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038461",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0038467",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 2400
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0038467' -> 'PL0038467'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0038467",
    "mrp": 280
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038467",
    "mrp": 280
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0038467",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038467",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038467",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038467",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0038472",
    "total_bottles": 192,
    "bl": 17.28,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0038472' -> 'PL0038472'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0038472",
    "mrp": 145
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038472",
    "mrp": 145
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0038472",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038472",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038472",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038472",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0036420",
    "total_bottles": 192,
    "bl": 17.28,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0036420' -> 'PL0036420'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0036420",
    "mrp": 145
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036420",
    "mrp": 145
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0036420",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036420",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036420",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036420",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 15:00:10] Cascading completed up to current date
[2026-01-10 15:00:10] Inserting item detail: {
    "purchase_id": 19,
    "item_code": "SCMPL0040014",
    "total_bottles": 288,
    "bl": 51.84,
    "vv": 0,
    "amount": 600
}
[2026-01-10 15:00:10] cleanItemCode: 'SCMPL0040014' -> 'PL0040014'
[2026-01-10 15:00:10] Updating MRP for item: {
    "item_code": "PL0040014",
    "mrp": 270
}
[2026-01-10 15:00:10] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040014",
    "mrp": 270
}
[2026-01-10 15:00:10] Updating stock for item: {
    "item_code": "SCMPL0040014",
    "total_bottles": 288,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:10] Month is archived, updating archive table with cascading
[2026-01-10 15:00:10] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040014",
    "dayOfMonth": "30",
    "totalBottles": 288
}
[2026-01-10 15:00:10] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040014",
    "purchaseDay": "30"
}
[2026-01-10 15:00:10] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:10] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:10] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040014",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:10] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:10] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:10] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 288
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Items inserted: {
    "total_items": 26,
    "expected_items": 26
}
[2026-01-10 15:00:11] Successfully imported TP: {
    "tp_no": 12971,
    "purchase_id": 19,
    "voucher_no": 16,
    "items_inserted": 26
}
[2026-01-10 15:00:11] === Processing TP: 12972 ===
[2026-01-10 15:00:11] Finding supplier match for: AMAR TRADERS
[2026-01-10 15:00:11] Exact match found: {
    "CODE": "AMAR",
    "DETAILS": "AMAR TRADERS"
}
[2026-01-10 15:00:11] Supplier match result: {
    "input": "AMAR TRADERS",
    "found_code": "AMAR",
    "found_name": "AMAR TRADERS"
}
[2026-01-10 15:00:11] Voucher number calculated: {
    "max_voc": 16,
    "next_voc": 17
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031817' -> 'PL0031817'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0031817",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 24,
    "amount": 400,
    "total_bottles": 120,
    "total_amount_so_far": 400
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031818' -> 'PL0031818'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0031818",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 1600,
    "total_bottles": 48,
    "total_amount_so_far": 2000
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031819' -> 'PL0031819'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0031819",
    "cases": 3,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 300,
    "total_bottles": 72,
    "total_amount_so_far": 2300
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031822' -> 'PL0031822'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0031822",
    "cases": 3,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 360,
    "total_bottles": 72,
    "total_amount_so_far": 2660
}
[2026-01-10 15:00:11] TP details: {
    "auto_tp_no": "FL1305-301125\/12972",
    "manual_tp_no": "12972",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:11] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Purchase header inserted: {
    "purchase_id": 20,
    "voucher_no": 17,
    "affected_rows": -1
}
[2026-01-10 15:00:11] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 20,
    "item_code": "SCMPL0031817",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 400
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031817' -> 'PL0031817'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0031817",
    "mrp": 150
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031817",
    "mrp": 150
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0031817",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031817",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031817",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031817",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 20,
    "item_code": "SCMPL0031818",
    "total_bottles": 48,
    "bl": 13.2,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031818' -> 'PL0031818'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0031818",
    "mrp": 150
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031818",
    "mrp": 150
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0031818",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031818",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031818",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031818",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 20,
    "item_code": "SCMPL0031819",
    "total_bottles": 72,
    "bl": 19.8,
    "vv": 0,
    "amount": 300
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031819' -> 'PL0031819'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0031819",
    "mrp": 150
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031819",
    "mrp": 150
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0031819",
    "total_bottles": 72,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031819",
    "dayOfMonth": "30",
    "totalBottles": 72
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031819",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031819",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 20,
    "item_code": "SCMPL0031822",
    "total_bottles": 72,
    "bl": 19.8,
    "vv": 0,
    "amount": 360
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0031822' -> 'PL0031822'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0031822",
    "mrp": 150
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031822",
    "mrp": 150
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0031822",
    "total_bottles": 72,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031822",
    "dayOfMonth": "30",
    "totalBottles": 72
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031822",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031822",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Items inserted: {
    "total_items": 4,
    "expected_items": 4
}
[2026-01-10 15:00:11] Successfully imported TP: {
    "tp_no": 12972,
    "purchase_id": 20,
    "voucher_no": 17,
    "items_inserted": 4
}
[2026-01-10 15:00:11] === Processing TP: 12943 ===
[2026-01-10 15:00:11] Finding supplier match for: BHARAT WINES
[2026-01-10 15:00:11] Exact match found: {
    "CODE": "BHAR",
    "DETAILS": "BHARAT WINES"
}
[2026-01-10 15:00:11] Supplier match result: {
    "input": "BHARAT WINES",
    "found_code": "BHAR",
    "found_name": "BHARAT WINES"
}
[2026-01-10 15:00:11] Voucher number calculated: {
    "max_voc": 17,
    "next_voc": 18
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMWN0041700' -> 'WN0041700'
[2026-01-10 15:00:11] Item not found or license restricted: {
    "scm_item_code": "SCMWN0041700",
    "clean_code": "WN0041700",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMWN0041743' -> 'WN0041743'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMWN0041743",
    "cases": 4,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 3200,
    "total_bottles": 192,
    "total_amount_so_far": 3200
}
[2026-01-10 15:00:11] TP details: {
    "auto_tp_no": "FL173-301125\/12947",
    "manual_tp_no": "12943",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:11] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Purchase header inserted: {
    "purchase_id": 21,
    "voucher_no": 18,
    "affected_rows": -1
}
[2026-01-10 15:00:11] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 21,
    "item_code": "SCMWN0041743",
    "total_bottles": 192,
    "bl": 34.56,
    "vv": 0,
    "amount": 3200
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMWN0041743' -> 'WN0041743'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "WN0041743",
    "mrp": 58
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "WN0041743",
    "mrp": 58
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMWN0041743",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMWN0041743",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMWN0041743",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMWN0041743",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Items inserted: {
    "total_items": 1,
    "expected_items": 1
}
[2026-01-10 15:00:11] Successfully imported TP: {
    "tp_no": 12943,
    "purchase_id": 21,
    "voucher_no": 18,
    "items_inserted": 1
}
[2026-01-10 15:00:11] === Processing TP: 9502 ===
[2026-01-10 15:00:11] Finding supplier match for: VISHAL TRADERS
[2026-01-10 15:00:11] Exact match found: {
    "CODE": "VISH",
    "DETAILS": "VISHAL TRADERS"
}
[2026-01-10 15:00:11] Supplier match result: {
    "input": "VISHAL TRADERS",
    "found_code": "VISH",
    "found_name": "VISHAL TRADERS"
}
[2026-01-10 15:00:11] Voucher number calculated: {
    "max_voc": 18,
    "next_voc": 19
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040930' -> 'PL0040930'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0040930",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 96,
    "amount": 120,
    "total_bottles": 96,
    "total_amount_so_far": 120
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040931' -> 'PL0040931'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0040931",
    "cases": 4,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 3200,
    "total_bottles": 192,
    "total_amount_so_far": 3320
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040935' -> 'PL0040935'
[2026-01-10 15:00:11] Item calculation: {
    "scm_item_code": "SCMPL0040935",
    "cases": 5,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 4000,
    "total_bottles": 240,
    "total_amount_so_far": 7320
}
[2026-01-10 15:00:11] TP details: {
    "auto_tp_no": "FL178-301125\/9468",
    "manual_tp_no": "9502",
    "tp_date": "2025-11-30"
}
[2026-01-10 15:00:11] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Purchase header inserted: {
    "purchase_id": 22,
    "voucher_no": 19,
    "affected_rows": -1
}
[2026-01-10 15:00:11] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 22,
    "item_code": "SCMPL0040930",
    "total_bottles": 96,
    "bl": 8.64,
    "vv": 0,
    "amount": 120
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040930' -> 'PL0040930'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0040930",
    "mrp": 115
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040930",
    "mrp": 115
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0040930",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040930",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040930",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040930",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 22,
    "item_code": "SCMPL0040931",
    "total_bottles": 192,
    "bl": 34.56,
    "vv": 0,
    "amount": 3200
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040931' -> 'PL0040931'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0040931",
    "mrp": 220
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040931",
    "mrp": 220
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0040931",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040931",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040931",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040931",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Inserting item detail: {
    "purchase_id": 22,
    "item_code": "SCMPL0040935",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 15:00:11] cleanItemCode: 'SCMPL0040935' -> 'PL0040935'
[2026-01-10 15:00:11] Updating MRP for item: {
    "item_code": "PL0040935",
    "mrp": 170
}
[2026-01-10 15:00:11] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040935",
    "mrp": 170
}
[2026-01-10 15:00:11] Updating stock for item: {
    "item_code": "SCMPL0040935",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 15:00:11] Month is archived, updating archive table with cascading
[2026-01-10 15:00:11] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040935",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 15:00:11] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040935",
    "purchaseDay": "30"
}
[2026-01-10 15:00:11] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 15:00:11] Cascading updates completed for all days after purchase day
[2026-01-10 15:00:11] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040935",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 15:00:11] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 15:00:11] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 15:00:11] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 240
}
[2026-01-10 15:00:11] Cascading completed up to current date
[2026-01-10 15:00:11] Items inserted: {
    "total_items": 3,
    "expected_items": 3
}
[2026-01-10 15:00:12] Successfully imported TP: {
    "tp_no": 9502,
    "purchase_id": 22,
    "voucher_no": 19,
    "items_inserted": 3
}
[2026-01-10 15:00:12] Import completed: {
    "successCount": 10,
    "errorCount": 0
}
[2026-01-10 15:00:12] === IMPORT PURCHASE ENDED ===
[2026-01-10 17:19:55] === IMPORT PURCHASE STARTED ===
[2026-01-10 17:19:55] Company ID from session: 1
[2026-01-10 17:19:55] Database connection included
[2026-01-10 17:19:55] License functions included
[2026-01-10 17:19:55] License type: FL-II
[2026-01-10 17:19:55] Available classes: [
    {
        "SRNO": "1",
        "SGROUP": "W",
        "DESC": "WHISKY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "2",
        "SGROUP": "V",
        "DESC": "WINES",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "3",
        "SGROUP": "G",
        "DESC": "GIN",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "4",
        "SGROUP": "F",
        "DESC": "FERMENTED BEER",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "5",
        "SGROUP": "D",
        "DESC": "BRANDY",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "6",
        "SGROUP": "K",
        "DESC": "VODKA",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "7",
        "SGROUP": "R",
        "DESC": "RUM",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "8",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "9",
        "SGROUP": "L",
        "DESC": "LIQUORS",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "10",
        "SGROUP": "O",
        "DESC": "OTHERS\/GENERAL",
        "LIQ_FLAG": "C"
    },
    {
        "SRNO": "11",
        "SGROUP": "O",
        "DESC": "COLD DRINKS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "12",
        "SGROUP": "O",
        "DESC": "SODA",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "13",
        "SGROUP": "O",
        "DESC": "EXTRA CLASS",
        "LIQ_FLAG": "O"
    },
    {
        "SRNO": "14",
        "SGROUP": "M",
        "DESC": "Mild Beer",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "15",
        "SGROUP": "I",
        "DESC": "Imported",
        "LIQ_FLAG": "F"
    },
    {
        "SRNO": "16",
        "SGROUP": "Q",
        "DESC": "Wine Imp",
        "LIQ_FLAG": "F"
    }
]
[2026-01-10 17:19:55] Allowed class SGROUP values: [
    "W",
    "V",
    "G",
    "F",
    "D",
    "K",
    "R",
    "O",
    "L",
    "O",
    "O",
    "O",
    "O",
    "M",
    "I",
    "Q"
]
[2026-01-10 17:19:55] === FORM SUBMISSION STARTED ===
[2026-01-10 17:19:55] Import settings: {
    "mode": "ALL",
    "default_status": "T",
    "update_mrp": true,
    "update_stock": true
}
[2026-01-10 17:19:55] Processing CSV file: C:\xampp\tmp\phpDBBF.tmp
[2026-01-10 17:19:55] Skipping metadata row 1: ﻿Licensee: DIAMOND WINE SHOP (3)
[2026-01-10 17:19:55] Skipping metadata row 2: TP Details
[2026-01-10 17:19:55] CSV Headers found: [
    "received_date",
    "auto_tp_no",
    "manual_tp_no",
    "tp_date",
    "district",
    "scm_party_code",
    "party_name",
    "srno",
    "scm_item_code",
    "item_name",
    "size",
    "qty_cases",
    "qty_bottles",
    "batch_no",
    "mfg_month",
    "mrp",
    "bl",
    "vv_",
    "total_bot_qty",
    "transporter_name",
    "transporter_address",
    "route",
    "vehicle_no",
    "driver_name",
    "driver_mob_no",
    "driver_lic_no",
    "driver_city"
]
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "5571",
    "date": "2025-11-30",
    "supplier": "PRITHVIRAJ TRADERS"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "4807",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "4809",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "4816",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "4818",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "4820",
    "date": "2025-11-30",
    "supplier": "EMPIRE SPIRIT INDIA"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "12971",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "12972",
    "date": "2025-11-30",
    "supplier": "AMAR TRADERS"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "12943",
    "date": "2025-11-30",
    "supplier": "BHARAT WINES"
}
[2026-01-10 17:19:55] Created new TP group: {
    "tp_no": "9502",
    "date": "2025-11-30",
    "supplier": "VISHAL TRADERS"
}
[2026-01-10 17:19:55] Found TP groups: {
    "count": 10,
    "tps": [
        5571,
        4807,
        4809,
        4816,
        4818,
        4820,
        12971,
        12972,
        12943,
        9502
    ]
}
[2026-01-10 17:19:55] Processing TP groups: {
    "total_tps": 10
}
[2026-01-10 17:19:55] Loaded items for batch lookup: {
    "item_count": 7516
}
[2026-01-10 17:19:55] === Processing TP: 5571 ===
[2026-01-10 17:19:55] Finding supplier match for: PRITHVIRAJ TRADERS
[2026-01-10 17:19:55] Total suppliers in database: 36
[2026-01-10 17:19:55] New best match found: {
    "supplier": "RAJ MARKETING & CO.",
    "code": "RAJ",
    "score": 80,
    "input_normalized": "prithviraj",
    "db_normalized": "raj marketing"
}
[2026-01-10 17:19:55] Best supplier match selected: {
    "input": "PRITHVIRAJ TRADERS",
    "matched_name": "RAJ MARKETING & CO.",
    "matched_code": "RAJ",
    "match_score": 80
}
[2026-01-10 17:19:55] Supplier match result: {
    "input": "PRITHVIRAJ TRADERS",
    "found_code": "RAJ",
    "found_name": "RAJ MARKETING & CO."
}
[2026-01-10 17:19:55] Voucher number calculated: {
    "max_voc": 9,
    "next_voc": 10
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 17:19:55] Item calculation: {
    "scm_item_code": "SCMBR0018145",
    "cases": 10,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 8000,
    "total_bottles": 120,
    "total_amount_so_far": 8000
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 17:19:55] Item calculation: {
    "scm_item_code": "SCMPL0041500",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 8120
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 17:19:55] Item calculation: {
    "scm_item_code": "SCMPL0041501",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 8920
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 17:19:55] Item calculation: {
    "scm_item_code": "SCMPL0041503",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 9420
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0042876' -> 'PL0042876'
[2026-01-10 17:19:55] Item not found or license restricted: {
    "scm_item_code": "SCMPL0042876",
    "clean_code": "PL0042876",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 17:19:55] TP details: {
    "auto_tp_no": "FL119851-301125\/5571",
    "manual_tp_no": "5571",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:19:55] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:55] Purchase header inserted: {
    "purchase_id": 23,
    "voucher_no": 10,
    "affected_rows": -1
}
[2026-01-10 17:19:55] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:55] Inserting item detail: {
    "purchase_id": 23,
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "bl": 78,
    "vv": 0,
    "amount": 8000
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMBR0018145' -> 'BR0018145'
[2026-01-10 17:19:55] Updating MRP for item: {
    "item_code": "BR0018145",
    "mrp": 165
}
[2026-01-10 17:19:55] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "BR0018145",
    "mrp": 165
}
[2026-01-10 17:19:55] Updating stock for item: {
    "item_code": "SCMBR0018145",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:55] Month is archived, updating archive table with cascading
[2026-01-10 17:19:55] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMBR0018145",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 17:19:55] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMBR0018145",
    "purchaseDay": "30"
}
[2026-01-10 17:19:55] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:55] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:55] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMBR0018145",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:55] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:55] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:55] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 17:19:55] Cascading completed up to current date
[2026-01-10 17:19:55] Inserting item detail: {
    "purchase_id": 23,
    "item_code": "SCMPL0041500",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041500' -> 'PL0041500'
[2026-01-10 17:19:55] Updating MRP for item: {
    "item_code": "PL0041500",
    "mrp": 1070
}
[2026-01-10 17:19:55] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041500",
    "mrp": 1070
}
[2026-01-10 17:19:55] Updating stock for item: {
    "item_code": "SCMPL0041500",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:55] Month is archived, updating archive table with cascading
[2026-01-10 17:19:55] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041500",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:55] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041500",
    "purchaseDay": "30"
}
[2026-01-10 17:19:55] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:55] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:55] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041500",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:55] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:55] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:55] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:19:55] Cascading completed up to current date
[2026-01-10 17:19:55] Inserting item detail: {
    "purchase_id": 23,
    "item_code": "SCMPL0041501",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041501' -> 'PL0041501'
[2026-01-10 17:19:55] Updating MRP for item: {
    "item_code": "PL0041501",
    "mrp": 520
}
[2026-01-10 17:19:55] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041501",
    "mrp": 520
}
[2026-01-10 17:19:55] Updating stock for item: {
    "item_code": "SCMPL0041501",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:55] Month is archived, updating archive table with cascading
[2026-01-10 17:19:55] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041501",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:19:55] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041501",
    "purchaseDay": "30"
}
[2026-01-10 17:19:55] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:55] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:55] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041501",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:55] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:55] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:55] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:19:55] Cascading completed up to current date
[2026-01-10 17:19:55] Inserting item detail: {
    "purchase_id": 23,
    "item_code": "SCMPL0041503",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 17:19:55] cleanItemCode: 'SCMPL0041503' -> 'PL0041503'
[2026-01-10 17:19:55] Updating MRP for item: {
    "item_code": "PL0041503",
    "mrp": 250
}
[2026-01-10 17:19:55] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0041503",
    "mrp": 250
}
[2026-01-10 17:19:55] Updating stock for item: {
    "item_code": "SCMPL0041503",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:55] Month is archived, updating archive table with cascading
[2026-01-10 17:19:55] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041503",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 17:19:55] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0041503",
    "purchaseDay": "30"
}
[2026-01-10 17:19:55] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:55] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:55] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0041503",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:55] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:55] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:55] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 240
}
[2026-01-10 17:19:56] Cascading completed up to current date
[2026-01-10 17:19:56] Items inserted: {
    "total_items": 4,
    "expected_items": 4
}
[2026-01-10 17:19:56] Successfully imported TP: {
    "tp_no": 5571,
    "purchase_id": 23,
    "voucher_no": 10,
    "items_inserted": 4
}
[2026-01-10 17:19:56] === Processing TP: 4807 ===
[2026-01-10 17:19:56] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 17:19:56] Total suppliers in database: 36
[2026-01-10 17:19:56] New best match found: {
    "supplier": "EMPIRE SPIRT INDIA",
    "code": "EM2",
    "score": 94.73684210526316,
    "input_normalized": "empire spirit india",
    "db_normalized": "empire spirt india"
}
[2026-01-10 17:19:56] Best supplier match selected: {
    "input": "EMPIRE SPIRIT INDIA",
    "matched_name": "EMPIRE SPIRT INDIA",
    "matched_code": "EM2",
    "match_score": 94.73684210526316
}
[2026-01-10 17:19:56] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "EM2",
    "found_name": "EMPIRE SPIRT INDIA"
}
[2026-01-10 17:19:56] Voucher number calculated: {
    "max_voc": 10,
    "next_voc": 11
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 800
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 1600
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 2400
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 3200
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 3280
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 3360
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 80,
    "total_bottles": 100,
    "total_amount_so_far": 3440
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 3840
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 4240
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 10,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1000,
    "total_bottles": 480,
    "total_amount_so_far": 5240
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 6740
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 7240
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 7360
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:56] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 7480
}
[2026-01-10 17:19:56] TP details: {
    "auto_tp_no": "FL1249-301125\/4777",
    "manual_tp_no": "4807",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:19:56] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:56] Purchase header inserted: {
    "purchase_id": 24,
    "voucher_no": 11,
    "affected_rows": -1
}
[2026-01-10 17:19:56] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:56] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:56] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:56] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:56] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:56] Month is archived, updating archive table with cascading
[2026-01-10 17:19:56] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 17:19:56] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 17:19:56] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:56] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:56] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:56] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:56] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:56] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6
}
[2026-01-10 17:19:56] Cascading completed up to current date
[2026-01-10 17:19:56] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:56] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:56] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:56] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:56] Month is archived, updating archive table with cascading
[2026-01-10 17:19:56] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 17:19:56] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 17:19:56] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:56] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:56] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:56] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:56] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:56] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:19:56] Cascading completed up to current date
[2026-01-10 17:19:56] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:56] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:56] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:56] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:56] Month is archived, updating archive table with cascading
[2026-01-10 17:19:56] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:56] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:19:56] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:56] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:56] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:56] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:56] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:56] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:19:56] Cascading completed up to current date
[2026-01-10 17:19:56] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:56] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:56] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:56] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:56] Month is archived, updating archive table with cascading
[2026-01-10 17:19:56] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:56] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:19:56] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:56] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:56] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:56] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:56] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:56] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:19:56] Cascading completed up to current date
[2026-01-10 17:19:56] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:19:56] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:56] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:56] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:56] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:56] Month is archived, updating archive table with cascading
[2026-01-10 17:19:56] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 17:19:56] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 17:19:56] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:56] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:56] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:56] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:56] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:56] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 9
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 200
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 700
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1200
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010088",
    "total_bottles": 480,
    "bl": 86.4,
    "vv": 0,
    "amount": 1000
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 480,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 480
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 561
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:57] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:57] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1281
}
[2026-01-10 17:19:57] Cascading completed up to current date
[2026-01-10 17:19:57] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 17:19:57] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:57] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:57] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:57] Month is archived, updating archive table with cascading
[2026-01-10 17:19:57] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 17:19:57] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:19:57] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:57] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:57] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:57] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 1521
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:58] Month is archived, updating archive table with cascading
[2026-01-10 17:19:58] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:19:58] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:19:58] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:58] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:58] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:58] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 24,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:58] Month is archived, updating archive table with cascading
[2026-01-10 17:19:58] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:19:58] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:19:58] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:58] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:58] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:58] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Items inserted: {
    "total_items": 14,
    "expected_items": 14
}
[2026-01-10 17:19:58] Successfully imported TP: {
    "tp_no": 4807,
    "purchase_id": 24,
    "voucher_no": 11,
    "items_inserted": 14
}
[2026-01-10 17:19:58] === Processing TP: 4809 ===
[2026-01-10 17:19:58] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 17:19:58] Total suppliers in database: 36
[2026-01-10 17:19:58] New best match found: {
    "supplier": "EMPIRE SPIRT INDIA",
    "code": "EM2",
    "score": 94.73684210526316,
    "input_normalized": "empire spirit india",
    "db_normalized": "empire spirt india"
}
[2026-01-10 17:19:58] Best supplier match selected: {
    "input": "EMPIRE SPIRIT INDIA",
    "matched_name": "EMPIRE SPIRT INDIA",
    "matched_code": "EM2",
    "match_score": 94.73684210526316
}
[2026-01-10 17:19:58] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "EM2",
    "found_name": "EMPIRE SPIRT INDIA"
}
[2026-01-10 17:19:58] Voucher number calculated: {
    "max_voc": 11,
    "next_voc": 12
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 240,
    "total_bottles": 48,
    "total_amount_so_far": 240
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 10,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 800,
    "total_bottles": 1000,
    "total_amount_so_far": 1040
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 9,
    "total_amount_so_far": 1120
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 800,
    "total_bottles": 6,
    "total_amount_so_far": 1920
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 35,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 3500,
    "total_bottles": 1680,
    "total_amount_so_far": 5420
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:58] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 6220
}
[2026-01-10 17:19:58] TP details: {
    "auto_tp_no": "FL1249-301125\/4779",
    "manual_tp_no": "4809",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:19:58] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:58] Purchase header inserted: {
    "purchase_id": 25,
    "voucher_no": 12,
    "affected_rows": -1
}
[2026-01-10 17:19:58] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0010111",
    "total_bottles": 48,
    "bl": 18,
    "vv": 0,
    "amount": 240
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:58] Month is archived, updating archive table with cascading
[2026-01-10 17:19:58] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 17:19:58] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:19:58] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:58] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:58] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:58] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "bl": 90,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:58] Month is archived, updating archive table with cascading
[2026-01-10 17:19:58] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 1000
}
[2026-01-10 17:19:58] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:19:58] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:58] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:58] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:58] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2200
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 9,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:58] Month is archived, updating archive table with cascading
[2026-01-10 17:19:58] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 9
}
[2026-01-10 17:19:58] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 17:19:58] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:58] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:58] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:58] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:58] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:58] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 27
}
[2026-01-10 17:19:58] Cascading completed up to current date
[2026-01-10 17:19:58] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "bl": 12,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:58] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:19:58] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:58] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:19:58] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 6,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 6
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0010088",
    "total_bottles": 1680,
    "bl": 302.4,
    "vv": 0,
    "amount": 3500
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 1680,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 1680
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3201
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 25,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 36
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Items inserted: {
    "total_items": 6,
    "expected_items": 6
}
[2026-01-10 17:19:59] Successfully imported TP: {
    "tp_no": 4809,
    "purchase_id": 25,
    "voucher_no": 12,
    "items_inserted": 6
}
[2026-01-10 17:19:59] === Processing TP: 4816 ===
[2026-01-10 17:19:59] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 17:19:59] Total suppliers in database: 36
[2026-01-10 17:19:59] New best match found: {
    "supplier": "EMPIRE SPIRT INDIA",
    "code": "EM2",
    "score": 94.73684210526316,
    "input_normalized": "empire spirit india",
    "db_normalized": "empire spirt india"
}
[2026-01-10 17:19:59] Best supplier match selected: {
    "input": "EMPIRE SPIRIT INDIA",
    "matched_name": "EMPIRE SPIRT INDIA",
    "matched_code": "EM2",
    "match_score": 94.73684210526316
}
[2026-01-10 17:19:59] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "EM2",
    "found_name": "EMPIRE SPIRT INDIA"
}
[2026-01-10 17:19:59] Voucher number calculated: {
    "max_voc": 12,
    "next_voc": 13
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 800
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 1600
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 3100
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 15,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 1500,
    "total_bottles": 720,
    "total_amount_so_far": 4600
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 5000
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 400,
    "total_bottles": 500,
    "total_amount_so_far": 5400
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 5520
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:19:59] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 5640
}
[2026-01-10 17:19:59] TP details: {
    "auto_tp_no": "FL1249-301125\/4786",
    "manual_tp_no": "4816",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:19:59] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:59] Purchase header inserted: {
    "purchase_id": 26,
    "voucher_no": 13,
    "affected_rows": -1
}
[2026-01-10 17:19:59] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 60
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 17:19:59] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:19:59] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:19:59] Cascading updates completed for all days after purchase day
[2026-01-10 17:19:59] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:19:59] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:19:59] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:19:59] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3921
}
[2026-01-10 17:19:59] Cascading completed up to current date
[2026-01-10 17:19:59] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "bl": 129.6,
    "vv": 0,
    "amount": 1500
}
[2026-01-10 17:19:59] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:19:59] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:19:59] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 720,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:19:59] Month is archived, updating archive table with cascading
[2026-01-10 17:19:59] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 720
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4641
}
[2026-01-10 17:20:00] Cascading completed up to current date
[2026-01-10 17:20:00] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:00] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:00] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:00] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:00] Month is archived, updating archive table with cascading
[2026-01-10 17:20:00] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2700
}
[2026-01-10 17:20:00] Cascading completed up to current date
[2026-01-10 17:20:00] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "bl": 45,
    "vv": 0,
    "amount": 400
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:00] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:00] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:00] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 500,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:00] Month is archived, updating archive table with cascading
[2026-01-10 17:20:00] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 500
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 3200
}
[2026-01-10 17:20:00] Cascading completed up to current date
[2026-01-10 17:20:00] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:20:00] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:00] Month is archived, updating archive table with cascading
[2026-01-10 17:20:00] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 17:20:00] Cascading completed up to current date
[2026-01-10 17:20:00] Inserting item detail: {
    "purchase_id": 26,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:20:00] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:00] Month is archived, updating archive table with cascading
[2026-01-10 17:20:00] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 17:20:00] Cascading completed up to current date
[2026-01-10 17:20:00] Items inserted: {
    "total_items": 8,
    "expected_items": 8
}
[2026-01-10 17:20:00] Successfully imported TP: {
    "tp_no": 4816,
    "purchase_id": 26,
    "voucher_no": 13,
    "items_inserted": 8
}
[2026-01-10 17:20:00] === Processing TP: 4818 ===
[2026-01-10 17:20:00] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 17:20:00] Total suppliers in database: 36
[2026-01-10 17:20:00] New best match found: {
    "supplier": "EMPIRE SPIRT INDIA",
    "code": "EM2",
    "score": 94.73684210526316,
    "input_normalized": "empire spirit india",
    "db_normalized": "empire spirt india"
}
[2026-01-10 17:20:00] Best supplier match selected: {
    "input": "EMPIRE SPIRIT INDIA",
    "matched_name": "EMPIRE SPIRT INDIA",
    "matched_code": "EM2",
    "match_score": 94.73684210526316
}
[2026-01-10 17:20:00] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "EM2",
    "found_name": "EMPIRE SPIRT INDIA"
}
[2026-01-10 17:20:00] Voucher number calculated: {
    "max_voc": 13,
    "next_voc": 14
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0010111",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 120,
    "total_bottles": 24,
    "total_amount_so_far": 120
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0010112",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 12,
    "total_amount_so_far": 920
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 10,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 800,
    "total_bottles": 1000,
    "total_amount_so_far": 1720
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 40,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 4000,
    "total_bottles": 1920,
    "total_amount_so_far": 5720
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0010113",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 18,
    "total_amount_so_far": 5880
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:20:00] Item calculation: {
    "scm_item_code": "SCMPL0035192",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 6,
    "amount": 1600,
    "total_bottles": 12,
    "total_amount_so_far": 7480
}
[2026-01-10 17:20:00] TP details: {
    "auto_tp_no": "FL1249-301125\/4788",
    "manual_tp_no": "4818",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:00] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:00] Purchase header inserted: {
    "purchase_id": 27,
    "voucher_no": 14,
    "affected_rows": -1
}
[2026-01-10 17:20:00] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:00] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:00] cleanItemCode: 'SCMPL0010111' -> 'PL0010111'
[2026-01-10 17:20:00] Updating MRP for item: {
    "item_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010111",
    "mrp": 440
}
[2026-01-10 17:20:00] Updating stock for item: {
    "item_code": "SCMPL0010111",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:00] Month is archived, updating archive table with cascading
[2026-01-10 17:20:00] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:00] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010111",
    "purchaseDay": "30"
}
[2026-01-10 17:20:00] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:00] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:00] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010111",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:00] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:00] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:00] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 168
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010112' -> 'PL0010112'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010112",
    "mrp": 880
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0010112",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010112",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010112",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "bl": 90,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 1000,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 1000
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4200
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0010088",
    "total_bottles": 1920,
    "bl": 345.6,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 1920,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 1920
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6561
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0010113",
    "total_bottles": 18,
    "bl": 18,
    "vv": 0,
    "amount": 160
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010113' -> 'PL0010113'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010113",
    "mrp": 1200
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0010113",
    "total_bottles": 18,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "dayOfMonth": "30",
    "totalBottles": 18
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010113",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010113",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 45
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 27,
    "item_code": "SCMPL0035192",
    "total_bottles": 12,
    "bl": 24,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0035192' -> 'PL0035192'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0035192",
    "mrp": 2400
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0035192",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0035192",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0035192",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 30
}
[2026-01-10 17:20:01] Cascading completed up to current date
[2026-01-10 17:20:01] Items inserted: {
    "total_items": 6,
    "expected_items": 6
}
[2026-01-10 17:20:01] Successfully imported TP: {
    "tp_no": 4818,
    "purchase_id": 27,
    "voucher_no": 14,
    "items_inserted": 6
}
[2026-01-10 17:20:01] === Processing TP: 4820 ===
[2026-01-10 17:20:01] Finding supplier match for: EMPIRE SPIRIT INDIA
[2026-01-10 17:20:01] Total suppliers in database: 36
[2026-01-10 17:20:01] New best match found: {
    "supplier": "EMPIRE SPIRT INDIA",
    "code": "EM2",
    "score": 94.73684210526316,
    "input_normalized": "empire spirit india",
    "db_normalized": "empire spirt india"
}
[2026-01-10 17:20:01] Best supplier match selected: {
    "input": "EMPIRE SPIRIT INDIA",
    "matched_name": "EMPIRE SPIRT INDIA",
    "matched_code": "EM2",
    "match_score": 94.73684210526316
}
[2026-01-10 17:20:01] Supplier match result: {
    "input": "EMPIRE SPIRIT INDIA",
    "found_code": "EM2",
    "found_name": "EMPIRE SPIRT INDIA"
}
[2026-01-10 17:20:01] Voucher number calculated: {
    "max_voc": 14,
    "next_voc": 15
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:20:01] Item calculation: {
    "scm_item_code": "SCMPL0010088",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 500,
    "total_bottles": 240,
    "total_amount_so_far": 500
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:01] Item calculation: {
    "scm_item_code": "SCMPL0010076",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 100,
    "amount": 80,
    "total_bottles": 100,
    "total_amount_so_far": 580
}
[2026-01-10 17:20:01] TP details: {
    "auto_tp_no": "FL1249-301125\/4790",
    "manual_tp_no": "4820",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:01] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:01] Purchase header inserted: {
    "purchase_id": 28,
    "voucher_no": 15,
    "affected_rows": -1
}
[2026-01-10 17:20:01] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:01] Inserting item detail: {
    "purchase_id": 28,
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 500
}
[2026-01-10 17:20:01] cleanItemCode: 'SCMPL0010088' -> 'PL0010088'
[2026-01-10 17:20:01] Updating MRP for item: {
    "item_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:20:01] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010088",
    "mrp": 220
}
[2026-01-10 17:20:01] Updating stock for item: {
    "item_code": "SCMPL0010088",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:01] Month is archived, updating archive table with cascading
[2026-01-10 17:20:01] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 17:20:01] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010088",
    "purchaseDay": "30"
}
[2026-01-10 17:20:01] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:01] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:01] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010088",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:01] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:01] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:01] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 6801
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 28,
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0010076' -> 'PL0010076'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:02] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0010076",
    "mrp": 120
}
[2026-01-10 17:20:02] Updating stock for item: {
    "item_code": "SCMPL0010076",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:02] Month is archived, updating archive table with cascading
[2026-01-10 17:20:02] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 17:20:02] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0010076",
    "purchaseDay": "30"
}
[2026-01-10 17:20:02] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:02] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:02] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0010076",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:02] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:02] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:02] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 4300
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Items inserted: {
    "total_items": 2,
    "expected_items": 2
}
[2026-01-10 17:20:02] Successfully imported TP: {
    "tp_no": 4820,
    "purchase_id": 28,
    "voucher_no": 15,
    "items_inserted": 2
}
[2026-01-10 17:20:02] === Processing TP: 12971 ===
[2026-01-10 17:20:02] Finding supplier match for: AMAR TRADERS
[2026-01-10 17:20:02] Total suppliers in database: 36
[2026-01-10 17:20:02] New best match found: {
    "supplier": "AMAR TRADERS",
    "code": "AMAR",
    "score": 100,
    "input_normalized": "amar",
    "db_normalized": "amar"
}
[2026-01-10 17:20:02] Best supplier match selected: {
    "input": "AMAR TRADERS",
    "matched_name": "AMAR TRADERS",
    "matched_code": "AMAR",
    "match_score": 100
}
[2026-01-10 17:20:02] Supplier match result: {
    "input": "AMAR TRADERS",
    "found_code": "AMAR",
    "found_name": "AMAR TRADERS"
}
[2026-01-10 17:20:02] Voucher number calculated: {
    "max_voc": 15,
    "next_voc": 16
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024580' -> 'PL0024580'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024580",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 100,
    "amount": 100,
    "total_bottles": 100,
    "total_amount_so_far": 100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024581",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 96,
    "total_amount_so_far": 340
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024581",
    "cases": 2,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 96,
    "total_amount_so_far": 580
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024582",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 1380
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024582",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 800,
    "total_bottles": 24,
    "total_amount_so_far": 2180
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024583' -> 'PL0024583'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0024583",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 80,
    "total_bottles": 12,
    "total_amount_so_far": 2260
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0028276' -> 'PL0028276'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0028276",
    "cases": 3,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 2400,
    "total_bottles": 144,
    "total_amount_so_far": 4660
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0028278' -> 'PL0028278'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0028278",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 4780
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0028357' -> 'PL0028357'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0028357",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 18,
    "total_amount_so_far": 4940
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0030963' -> 'PL0030963'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0030963",
    "cases": 2,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 160,
    "total_bottles": 96,
    "total_amount_so_far": 5100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031271",
    "cases": 0,
    "bottles": 2,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 2,
    "total_amount_so_far": 5340
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031271",
    "cases": 1,
    "bottles": 10,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 1320,
    "total_bottles": 22,
    "total_amount_so_far": 6660
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031272' -> 'PL0031272'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031272",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 100,
    "total_bottles": 24,
    "total_amount_so_far": 6760
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0036599' -> 'PL0036599'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0036599",
    "cases": 3,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 1,
    "amount": 240,
    "total_bottles": 144,
    "total_amount_so_far": 7000
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0039947' -> 'PL0039947'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0039947",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 96,
    "amount": 120,
    "total_bottles": 96,
    "total_amount_so_far": 7120
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0036598' -> 'PL0036598'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0036598",
    "cases": 1,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 800,
    "total_bottles": 48,
    "total_amount_so_far": 7920
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031274' -> 'PL0031274'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031274",
    "cases": 1,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 100,
    "total_bottles": 12,
    "total_amount_so_far": 8020
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031275' -> 'PL0031275'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031275",
    "cases": 1,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 24,
    "amount": 80,
    "total_bottles": 24,
    "total_amount_so_far": 8100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031945",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 500,
    "total_bottles": 120,
    "total_amount_so_far": 8600
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031945",
    "cases": 5,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 500,
    "total_bottles": 120,
    "total_amount_so_far": 9100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0031946' -> 'PL0031946'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0031946",
    "cases": 5,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 4000,
    "total_bottles": 120,
    "total_amount_so_far": 13100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0038461' -> 'PL0038461'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0038461",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 1,
    "amount": 120,
    "total_bottles": 12,
    "total_amount_so_far": 13220
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0038467' -> 'PL0038467'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0038467",
    "cases": 3,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 2400,
    "total_bottles": 144,
    "total_amount_so_far": 15620
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0038472' -> 'PL0038472'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0038472",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 96,
    "amount": 1600,
    "total_bottles": 192,
    "total_amount_so_far": 17220
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0036420' -> 'PL0036420'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0036420",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 96,
    "amount": 1600,
    "total_bottles": 192,
    "total_amount_so_far": 18820
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0040014' -> 'PL0040014'
[2026-01-10 17:20:02] Item calculation: {
    "scm_item_code": "SCMPL0040014",
    "cases": 6,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 1,
    "amount": 600,
    "total_bottles": 288,
    "total_amount_so_far": 19420
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMKS0041677' -> 'KS0041677'
[2026-01-10 17:20:02] Item not found or license restricted: {
    "scm_item_code": "SCMKS0041677",
    "clean_code": "KS0041677",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 17:20:02] TP details: {
    "auto_tp_no": "FL1305-301125\/12971",
    "manual_tp_no": "12971",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:02] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:02] Purchase header inserted: {
    "purchase_id": 29,
    "voucher_no": 16,
    "affected_rows": -1
}
[2026-01-10 17:20:02] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024580",
    "total_bottles": 100,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024580' -> 'PL0024580'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0024580",
    "mrp": 135
}
[2026-01-10 17:20:02] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024580",
    "mrp": 135
}
[2026-01-10 17:20:02] Updating stock for item: {
    "item_code": "SCMPL0024580",
    "total_bottles": 100,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:02] Month is archived, updating archive table with cascading
[2026-01-10 17:20:02] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024580",
    "dayOfMonth": "30",
    "totalBottles": 100
}
[2026-01-10 17:20:02] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024580",
    "purchaseDay": "30"
}
[2026-01-10 17:20:02] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:02] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:02] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024580",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:02] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:02] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:02] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 100
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 240
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 17:20:02] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 17:20:02] Updating stock for item: {
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:02] Month is archived, updating archive table with cascading
[2026-01-10 17:20:02] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 17:20:02] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "purchaseDay": "30"
}
[2026-01-10 17:20:02] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:02] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:02] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024581",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:02] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:02] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:02] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 240
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024581' -> 'PL0024581'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 17:20:02] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024581",
    "mrp": 250
}
[2026-01-10 17:20:02] Updating stock for item: {
    "item_code": "SCMPL0024581",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:02] Month is archived, updating archive table with cascading
[2026-01-10 17:20:02] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 17:20:02] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024581",
    "purchaseDay": "30"
}
[2026-01-10 17:20:02] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:02] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:02] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024581",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:02] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:02] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:02] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 17:20:02] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 17:20:02] Updating stock for item: {
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:02] Month is archived, updating archive table with cascading
[2026-01-10 17:20:02] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:02] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "purchaseDay": "30"
}
[2026-01-10 17:20:02] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:02] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:02] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024582",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:02] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:02] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:02] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:20:02] Cascading completed up to current date
[2026-01-10 17:20:02] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:20:02] cleanItemCode: 'SCMPL0024582' -> 'PL0024582'
[2026-01-10 17:20:02] Updating MRP for item: {
    "item_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024582",
    "mrp": 515
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0024582",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024582",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024582",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0024583",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0024583' -> 'PL0024583'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0024583",
    "mrp": 1025
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0024583",
    "mrp": 1025
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0024583",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024583",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0024583",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0024583",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0028276",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 2400
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0028276' -> 'PL0028276'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0028276",
    "mrp": 205
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028276",
    "mrp": 205
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0028276",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028276",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028276",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028276",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0028278",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0028278' -> 'PL0028278'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0028278",
    "mrp": 860
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028278",
    "mrp": 860
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0028278",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028278",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028278",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028278",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0028357",
    "total_bottles": 18,
    "bl": 18,
    "vv": 0,
    "amount": 160
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0028357' -> 'PL0028357'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0028357",
    "mrp": 1140
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0028357",
    "mrp": 1140
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0028357",
    "total_bottles": 18,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028357",
    "dayOfMonth": "30",
    "totalBottles": 18
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0028357",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0028357",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 18
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0030963",
    "total_bottles": 96,
    "bl": 17.28,
    "vv": 0,
    "amount": 160
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0030963' -> 'PL0030963'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0030963",
    "mrp": 440
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0030963",
    "mrp": 440
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0030963",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0030963",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0030963",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0030963",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 17:20:03] Cascading completed up to current date
[2026-01-10 17:20:03] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031271",
    "total_bottles": 2,
    "bl": 1.5,
    "vv": 0,
    "amount": 240
}
[2026-01-10 17:20:03] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 17:20:03] Updating MRP for item: {
    "item_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 17:20:03] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 17:20:03] Updating stock for item: {
    "item_code": "SCMPL0031271",
    "total_bottles": 2,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:03] Month is archived, updating archive table with cascading
[2026-01-10 17:20:03] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "dayOfMonth": "30",
    "totalBottles": 2
}
[2026-01-10 17:20:03] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "purchaseDay": "30"
}
[2026-01-10 17:20:03] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:03] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:03] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031271",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:03] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:03] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:03] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 2
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031271",
    "total_bottles": 22,
    "bl": 16.5,
    "vv": 0,
    "amount": 1320
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0031271' -> 'PL0031271'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031271",
    "mrp": 1370
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0031271",
    "total_bottles": 22,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "dayOfMonth": "30",
    "totalBottles": 22
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031271",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031271",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031272",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0031272' -> 'PL0031272'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0031272",
    "mrp": 685
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031272",
    "mrp": 685
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0031272",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031272",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031272",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031272",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0036599",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 240
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0036599' -> 'PL0036599'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0036599",
    "mrp": 330
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036599",
    "mrp": 330
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0036599",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036599",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036599",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036599",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0039947",
    "total_bottles": 96,
    "bl": 8.64,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0039947' -> 'PL0039947'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0039947",
    "mrp": 165
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0039947",
    "mrp": 165
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0039947",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0039947",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0039947",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0039947",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0036598",
    "total_bottles": 48,
    "bl": 8.64,
    "vv": 0,
    "amount": 800
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0036598' -> 'PL0036598'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0036598",
    "mrp": 400
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036598",
    "mrp": 400
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0036598",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036598",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036598",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036598",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031274",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 100
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0031274' -> 'PL0031274'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0031274",
    "mrp": 1600
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031274",
    "mrp": 1600
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0031274",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031274",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031274",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031274",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 13
}
[2026-01-10 17:20:04] Cascading completed up to current date
[2026-01-10 17:20:04] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031275",
    "total_bottles": 24,
    "bl": 9,
    "vv": 0,
    "amount": 80
}
[2026-01-10 17:20:04] cleanItemCode: 'SCMPL0031275' -> 'PL0031275'
[2026-01-10 17:20:04] Updating MRP for item: {
    "item_code": "PL0031275",
    "mrp": 800
}
[2026-01-10 17:20:04] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031275",
    "mrp": 800
}
[2026-01-10 17:20:04] Updating stock for item: {
    "item_code": "SCMPL0031275",
    "total_bottles": 24,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:04] Month is archived, updating archive table with cascading
[2026-01-10 17:20:04] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031275",
    "dayOfMonth": "30",
    "totalBottles": 24
}
[2026-01-10 17:20:04] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031275",
    "purchaseDay": "30"
}
[2026-01-10 17:20:04] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:04] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:04] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031275",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:04] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:04] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:04] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 24
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 500
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031945",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 123
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 500
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0031945' -> 'PL0031945'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031945",
    "mrp": 155
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0031945",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031945",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031945",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 243
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0031946",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0031946' -> 'PL0031946'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0031946",
    "mrp": 155
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031946",
    "mrp": 155
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0031946",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031946",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031946",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031946",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0038461",
    "total_bottles": 12,
    "bl": 9,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0038461' -> 'PL0038461'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0038461",
    "mrp": 1120
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038461",
    "mrp": 1120
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0038461",
    "total_bottles": 12,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038461",
    "dayOfMonth": "30",
    "totalBottles": 12
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038461",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038461",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 12
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0038467",
    "total_bottles": 144,
    "bl": 25.92,
    "vv": 0,
    "amount": 2400
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0038467' -> 'PL0038467'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0038467",
    "mrp": 280
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038467",
    "mrp": 280
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0038467",
    "total_bottles": 144,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038467",
    "dayOfMonth": "30",
    "totalBottles": 144
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038467",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038467",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 144
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0038472",
    "total_bottles": 192,
    "bl": 17.28,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0038472' -> 'PL0038472'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0038472",
    "mrp": 145
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0038472",
    "mrp": 145
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0038472",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038472",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0038472",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0038472",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 17:20:05] Cascading completed up to current date
[2026-01-10 17:20:05] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0036420",
    "total_bottles": 192,
    "bl": 17.28,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 17:20:05] cleanItemCode: 'SCMPL0036420' -> 'PL0036420'
[2026-01-10 17:20:05] Updating MRP for item: {
    "item_code": "PL0036420",
    "mrp": 145
}
[2026-01-10 17:20:05] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0036420",
    "mrp": 145
}
[2026-01-10 17:20:05] Updating stock for item: {
    "item_code": "SCMPL0036420",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:05] Month is archived, updating archive table with cascading
[2026-01-10 17:20:05] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036420",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 17:20:05] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0036420",
    "purchaseDay": "30"
}
[2026-01-10 17:20:05] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:05] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:05] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0036420",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:05] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:05] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:05] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 29,
    "item_code": "SCMPL0040014",
    "total_bottles": 288,
    "bl": 51.84,
    "vv": 0,
    "amount": 600
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0040014' -> 'PL0040014'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "PL0040014",
    "mrp": 270
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040014",
    "mrp": 270
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMPL0040014",
    "total_bottles": 288,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040014",
    "dayOfMonth": "30",
    "totalBottles": 288
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040014",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040014",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 288
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Items inserted: {
    "total_items": 26,
    "expected_items": 26
}
[2026-01-10 17:20:06] Successfully imported TP: {
    "tp_no": 12971,
    "purchase_id": 29,
    "voucher_no": 16,
    "items_inserted": 26
}
[2026-01-10 17:20:06] === Processing TP: 12972 ===
[2026-01-10 17:20:06] Finding supplier match for: AMAR TRADERS
[2026-01-10 17:20:06] Total suppliers in database: 36
[2026-01-10 17:20:06] New best match found: {
    "supplier": "AMAR TRADERS",
    "code": "AMAR",
    "score": 100,
    "input_normalized": "amar",
    "db_normalized": "amar"
}
[2026-01-10 17:20:06] Best supplier match selected: {
    "input": "AMAR TRADERS",
    "matched_name": "AMAR TRADERS",
    "matched_code": "AMAR",
    "match_score": 100
}
[2026-01-10 17:20:06] Supplier match result: {
    "input": "AMAR TRADERS",
    "found_code": "AMAR",
    "found_name": "AMAR TRADERS"
}
[2026-01-10 17:20:06] Voucher number calculated: {
    "max_voc": 16,
    "next_voc": 17
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031817' -> 'PL0031817'
[2026-01-10 17:20:06] Item calculation: {
    "scm_item_code": "SCMPL0031817",
    "cases": 5,
    "bottles": 0,
    "case_rate": 80,
    "bottles_per_case": 24,
    "amount": 400,
    "total_bottles": 120,
    "total_amount_so_far": 400
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031818' -> 'PL0031818'
[2026-01-10 17:20:06] Item calculation: {
    "scm_item_code": "SCMPL0031818",
    "cases": 2,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 24,
    "amount": 1600,
    "total_bottles": 48,
    "total_amount_so_far": 2000
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031819' -> 'PL0031819'
[2026-01-10 17:20:06] Item calculation: {
    "scm_item_code": "SCMPL0031819",
    "cases": 3,
    "bottles": 0,
    "case_rate": 100,
    "bottles_per_case": 24,
    "amount": 300,
    "total_bottles": 72,
    "total_amount_so_far": 2300
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031822' -> 'PL0031822'
[2026-01-10 17:20:06] Item calculation: {
    "scm_item_code": "SCMPL0031822",
    "cases": 3,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 24,
    "amount": 360,
    "total_bottles": 72,
    "total_amount_so_far": 2660
}
[2026-01-10 17:20:06] TP details: {
    "auto_tp_no": "FL1305-301125\/12972",
    "manual_tp_no": "12972",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:06] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:06] Purchase header inserted: {
    "purchase_id": 30,
    "voucher_no": 17,
    "affected_rows": -1
}
[2026-01-10 17:20:06] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 30,
    "item_code": "SCMPL0031817",
    "total_bottles": 120,
    "bl": 33,
    "vv": 0,
    "amount": 400
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031817' -> 'PL0031817'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "PL0031817",
    "mrp": 150
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031817",
    "mrp": 150
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMPL0031817",
    "total_bottles": 120,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031817",
    "dayOfMonth": "30",
    "totalBottles": 120
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031817",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031817",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 120
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 30,
    "item_code": "SCMPL0031818",
    "total_bottles": 48,
    "bl": 13.2,
    "vv": 0,
    "amount": 1600
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031818' -> 'PL0031818'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "PL0031818",
    "mrp": 150
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031818",
    "mrp": 150
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMPL0031818",
    "total_bottles": 48,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031818",
    "dayOfMonth": "30",
    "totalBottles": 48
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031818",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031818",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 48
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 30,
    "item_code": "SCMPL0031819",
    "total_bottles": 72,
    "bl": 19.8,
    "vv": 0,
    "amount": 300
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031819' -> 'PL0031819'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "PL0031819",
    "mrp": 150
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031819",
    "mrp": 150
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMPL0031819",
    "total_bottles": 72,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031819",
    "dayOfMonth": "30",
    "totalBottles": 72
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031819",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031819",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 30,
    "item_code": "SCMPL0031822",
    "total_bottles": 72,
    "bl": 19.8,
    "vv": 0,
    "amount": 360
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMPL0031822' -> 'PL0031822'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "PL0031822",
    "mrp": 150
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0031822",
    "mrp": 150
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMPL0031822",
    "total_bottles": 72,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031822",
    "dayOfMonth": "30",
    "totalBottles": 72
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0031822",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0031822",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 72
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Items inserted: {
    "total_items": 4,
    "expected_items": 4
}
[2026-01-10 17:20:06] Successfully imported TP: {
    "tp_no": 12972,
    "purchase_id": 30,
    "voucher_no": 17,
    "items_inserted": 4
}
[2026-01-10 17:20:06] === Processing TP: 12943 ===
[2026-01-10 17:20:06] Finding supplier match for: BHARAT WINES
[2026-01-10 17:20:06] Total suppliers in database: 36
[2026-01-10 17:20:06] New best match found: {
    "supplier": "BHARAT WINES",
    "code": "BHAR",
    "score": 100,
    "input_normalized": "bharat wines",
    "db_normalized": "bharat wines"
}
[2026-01-10 17:20:06] Best supplier match selected: {
    "input": "BHARAT WINES",
    "matched_name": "BHARAT WINES",
    "matched_code": "BHAR",
    "match_score": 100
}
[2026-01-10 17:20:06] Supplier match result: {
    "input": "BHARAT WINES",
    "found_code": "BHAR",
    "found_name": "BHARAT WINES"
}
[2026-01-10 17:20:06] Voucher number calculated: {
    "max_voc": 17,
    "next_voc": 18
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMWN0041700' -> 'WN0041700'
[2026-01-10 17:20:06] Item not found or license restricted: {
    "scm_item_code": "SCMWN0041700",
    "clean_code": "WN0041700",
    "allowed_classes": [
        "W",
        "V",
        "G",
        "F",
        "D",
        "K",
        "R",
        "O",
        "L",
        "O",
        "O",
        "O",
        "O",
        "M",
        "I",
        "Q"
    ]
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMWN0041743' -> 'WN0041743'
[2026-01-10 17:20:06] Item calculation: {
    "scm_item_code": "SCMWN0041743",
    "cases": 4,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 3200,
    "total_bottles": 192,
    "total_amount_so_far": 3200
}
[2026-01-10 17:20:06] TP details: {
    "auto_tp_no": "FL173-301125\/12947",
    "manual_tp_no": "12943",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:06] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:06] Purchase header inserted: {
    "purchase_id": 31,
    "voucher_no": 18,
    "affected_rows": -1
}
[2026-01-10 17:20:06] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:06] Inserting item detail: {
    "purchase_id": 31,
    "item_code": "SCMWN0041743",
    "total_bottles": 192,
    "bl": 34.56,
    "vv": 0,
    "amount": 3200
}
[2026-01-10 17:20:06] cleanItemCode: 'SCMWN0041743' -> 'WN0041743'
[2026-01-10 17:20:06] Updating MRP for item: {
    "item_code": "WN0041743",
    "mrp": 58
}
[2026-01-10 17:20:06] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "WN0041743",
    "mrp": 58
}
[2026-01-10 17:20:06] Updating stock for item: {
    "item_code": "SCMWN0041743",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:06] Month is archived, updating archive table with cascading
[2026-01-10 17:20:06] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMWN0041743",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 17:20:06] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMWN0041743",
    "purchaseDay": "30"
}
[2026-01-10 17:20:06] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:06] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:06] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMWN0041743",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:06] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:06] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:06] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 17:20:06] Cascading completed up to current date
[2026-01-10 17:20:06] Items inserted: {
    "total_items": 1,
    "expected_items": 1
}
[2026-01-10 17:20:06] Successfully imported TP: {
    "tp_no": 12943,
    "purchase_id": 31,
    "voucher_no": 18,
    "items_inserted": 1
}
[2026-01-10 17:20:06] === Processing TP: 9502 ===
[2026-01-10 17:20:06] Finding supplier match for: VISHAL TRADERS
[2026-01-10 17:20:06] Total suppliers in database: 36
[2026-01-10 17:20:07] New best match found: {
    "supplier": "VISHAL TRADERS",
    "code": "VISH",
    "score": 100,
    "input_normalized": "vishal",
    "db_normalized": "vishal"
}
[2026-01-10 17:20:07] Best supplier match selected: {
    "input": "VISHAL TRADERS",
    "matched_name": "VISHAL TRADERS",
    "matched_code": "VISH",
    "match_score": 100
}
[2026-01-10 17:20:07] Supplier match result: {
    "input": "VISHAL TRADERS",
    "found_code": "VISH",
    "found_name": "VISHAL TRADERS"
}
[2026-01-10 17:20:07] Voucher number calculated: {
    "max_voc": 18,
    "next_voc": 19
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040930' -> 'PL0040930'
[2026-01-10 17:20:07] Item calculation: {
    "scm_item_code": "SCMPL0040930",
    "cases": 1,
    "bottles": 0,
    "case_rate": 120,
    "bottles_per_case": 96,
    "amount": 120,
    "total_bottles": 96,
    "total_amount_so_far": 120
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040931' -> 'PL0040931'
[2026-01-10 17:20:07] Item calculation: {
    "scm_item_code": "SCMPL0040931",
    "cases": 4,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 3200,
    "total_bottles": 192,
    "total_amount_so_far": 3320
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040935' -> 'PL0040935'
[2026-01-10 17:20:07] Item calculation: {
    "scm_item_code": "SCMPL0040935",
    "cases": 5,
    "bottles": 0,
    "case_rate": 800,
    "bottles_per_case": 1,
    "amount": 4000,
    "total_bottles": 240,
    "total_amount_so_far": 7320
}
[2026-01-10 17:20:07] TP details: {
    "auto_tp_no": "FL178-301125\/9468",
    "manual_tp_no": "9502",
    "tp_date": "2025-11-30"
}
[2026-01-10 17:20:07] Purchase header insert query: INSERT INTO tblpurchases (
                DATE, SUBCODE, AUTO_TPNO, VOC_NO, INV_NO, INV_DATE, TAMT, 
                TPNO, TP_DATE, PUR_FLAG, CompID
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:07] Purchase header inserted: {
    "purchase_id": 32,
    "voucher_no": 19,
    "affected_rows": -1
}
[2026-01-10 17:20:07] Purchase details insert query: INSERT INTO tblpurchasedetails (
                PurchaseID, ItemCode, ItemName, Size, Cases, Bottles, FreeCases, FreeBottles, 
                CaseRate, MRP, Amount, BottlesPerCase, BatchNo, AutoBatch, MfgMonth, BL, VV, TotBott
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-10 17:20:07] Inserting item detail: {
    "purchase_id": 32,
    "item_code": "SCMPL0040930",
    "total_bottles": 96,
    "bl": 8.64,
    "vv": 0,
    "amount": 120
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040930' -> 'PL0040930'
[2026-01-10 17:20:07] Updating MRP for item: {
    "item_code": "PL0040930",
    "mrp": 115
}
[2026-01-10 17:20:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040930",
    "mrp": 115
}
[2026-01-10 17:20:07] Updating stock for item: {
    "item_code": "SCMPL0040930",
    "total_bottles": 96,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:07] Month is archived, updating archive table with cascading
[2026-01-10 17:20:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040930",
    "dayOfMonth": "30",
    "totalBottles": 96
}
[2026-01-10 17:20:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040930",
    "purchaseDay": "30"
}
[2026-01-10 17:20:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:07] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040930",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 96
}
[2026-01-10 17:20:07] Cascading completed up to current date
[2026-01-10 17:20:07] Inserting item detail: {
    "purchase_id": 32,
    "item_code": "SCMPL0040931",
    "total_bottles": 192,
    "bl": 34.56,
    "vv": 0,
    "amount": 3200
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040931' -> 'PL0040931'
[2026-01-10 17:20:07] Updating MRP for item: {
    "item_code": "PL0040931",
    "mrp": 220
}
[2026-01-10 17:20:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040931",
    "mrp": 220
}
[2026-01-10 17:20:07] Updating stock for item: {
    "item_code": "SCMPL0040931",
    "total_bottles": 192,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:07] Month is archived, updating archive table with cascading
[2026-01-10 17:20:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040931",
    "dayOfMonth": "30",
    "totalBottles": 192
}
[2026-01-10 17:20:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040931",
    "purchaseDay": "30"
}
[2026-01-10 17:20:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:07] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040931",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 192
}
[2026-01-10 17:20:07] Cascading completed up to current date
[2026-01-10 17:20:07] Inserting item detail: {
    "purchase_id": 32,
    "item_code": "SCMPL0040935",
    "total_bottles": 240,
    "bl": 43.2,
    "vv": 0,
    "amount": 4000
}
[2026-01-10 17:20:07] cleanItemCode: 'SCMPL0040935' -> 'PL0040935'
[2026-01-10 17:20:07] Updating MRP for item: {
    "item_code": "PL0040935",
    "mrp": 170
}
[2026-01-10 17:20:07] MRP update result: {
    "success": true,
    "affected_rows": 0,
    "clean_code": "PL0040935",
    "mrp": 170
}
[2026-01-10 17:20:07] Updating stock for item: {
    "item_code": "SCMPL0040935",
    "total_bottles": 240,
    "purchase_date": "2025-11-30",
    "day_of_month": "30",
    "month": "11",
    "year": "2025"
}
[2026-01-10 17:20:07] Month is archived, updating archive table with cascading
[2026-01-10 17:20:07] Updating archived month stock: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040935",
    "dayOfMonth": "30",
    "totalBottles": 240
}
[2026-01-10 17:20:07] Starting cascading updates in table: {
    "table": "tbldailystock_1_11_25",
    "monthYear": "2025-11",
    "itemCode": "SCMPL0040935",
    "purchaseDay": "30"
}
[2026-01-10 17:20:07] Month has 30 days: {
    "timestamp": "2025-11-01",
    "daysInMonth": "30"
}
[2026-01-10 17:20:07] Cascading updates completed for all days after purchase day
[2026-01-10 17:20:07] Continuing cascading to current month: {
    "comp_id": 1,
    "itemCode": "SCMPL0040935",
    "purchaseDate": "2025-11-30"
}
[2026-01-10 17:20:07] Starting cascading from month: {
    "startMonth": 12,
    "startYear": "2025"
}
[2026-01-10 17:20:07] Found table for cascading: {
    "table": "tbldailystock_1_12_25",
    "month": 12,
    "year": "2025"
}
[2026-01-10 17:20:07] Got opening value from previous month: {
    "prevTable": "tbldailystock_1_11_25",
    "prevClosingColumn": "DAY_30_CLOSING",
    "openingValue": 240
}
[2026-01-10 17:20:07] Cascading completed up to current date
[2026-01-10 17:20:07] Items inserted: {
    "total_items": 3,
    "expected_items": 3
}
[2026-01-10 17:20:07] Successfully imported TP: {
    "tp_no": 9502,
    "purchase_id": 32,
    "voucher_no": 19,
    "items_inserted": 3
}
[2026-01-10 17:20:07] Import completed: {
    "successCount": 10,
    "errorCount": 0
}
[2026-01-10 17:20:07] === IMPORT PURCHASE ENDED ===
